import { RxFormGroup } from "../services/rx-form-group";
import { FormControlDirective } from "./form-control-directive";
import { RxFormControl } from "../services/form-control";
export class FormGroupDirective {
    constructor(element, formGroup) {
        this.element = element;
        this.formGroup = formGroup;
        this._formControls = new Array();
        this._formGroups = new Array();
        this.map();
    }
    map() {
        var childFormControls = this.element.querySelectorAll(`[form-control-path^="${this.formGroup.path}"]`);
        if (childFormControls) {
            childFormControls.forEach((t) => {
                var formControlName = t.getAttribute("form-control-path");
                let control = this.formGroup.get(formControlName);
                if (control instanceof RxFormControl) {
                    var formControl = new FormControlDirective(t, control);
                    this._formControls.push(formControl);
                }
            });
        }
    }
    destroy() {
        this._formControls.forEach(t => {
            t.destroy();
        });
        Object.keys(this.formGroup.controls).forEach(t => {
            if (this.formGroup.controls[t] instanceof RxFormGroup)
                this.formGroup.controls[t].destroy();
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1ncm91cC5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Acnh3ZWIvcmVhY3RpdmUtZm9ybXMvIiwic291cmNlcyI6WyJkaXJlY3RpdmVzL2Zvcm0tZ3JvdXAuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFekQsTUFBTSxPQUFPLGtCQUFrQjtJQUszQixZQUFvQixPQUFZLEVBQVUsU0FBc0I7UUFBNUMsWUFBTyxHQUFQLE9BQU8sQ0FBSztRQUFVLGNBQVMsR0FBVCxTQUFTLENBQWE7UUFIeEQsa0JBQWEsR0FBMkIsSUFBSSxLQUFLLEVBQXdCLENBQUM7UUFDMUUsZ0JBQVcsR0FBeUIsSUFBSSxLQUFLLEVBQXNCLENBQUM7UUFHeEUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2YsQ0FBQztJQUVELEdBQUc7UUFDQyxJQUFJLGlCQUFpQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsd0JBQXdCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxJQUFJLENBQWEsQ0FBQztRQUNuSCxJQUFJLGlCQUFpQixFQUFFO1lBQ25CLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQU0sRUFBRSxFQUFFO2dCQUNqQyxJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBQzFELElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUNsRCxJQUFJLE9BQU8sWUFBWSxhQUFhLEVBQUU7b0JBQ2xDLElBQUksV0FBVyxHQUFHLElBQUksb0JBQW9CLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO29CQUN2RCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztpQkFDeEM7WUFDTCxDQUFDLENBQUMsQ0FBQTtTQUNMO0lBQ0wsQ0FBQztJQUVELE9BQU87UUFDSCxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUMzQixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDaEIsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQzdDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFlBQVksV0FBVztnQkFDakQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSeEZvcm1Hcm91cCB9IGZyb20gXCIuLi9zZXJ2aWNlcy9yeC1mb3JtLWdyb3VwXCI7XHJcbmltcG9ydCB7IEZvcm1Db250cm9sRGlyZWN0aXZlIH0gZnJvbSBcIi4vZm9ybS1jb250cm9sLWRpcmVjdGl2ZVwiO1xyXG5pbXBvcnQgeyBSeEZvcm1Db250cm9sIH0gZnJvbSBcIi4uL3NlcnZpY2VzL2Zvcm0tY29udHJvbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1Hcm91cERpcmVjdGl2ZSB7XHJcblxyXG4gICAgcHJpdmF0ZSBfZm9ybUNvbnRyb2xzOiBGb3JtQ29udHJvbERpcmVjdGl2ZVtdID0gbmV3IEFycmF5PEZvcm1Db250cm9sRGlyZWN0aXZlPigpO1xyXG4gICAgcHJpdmF0ZSBfZm9ybUdyb3VwczogRm9ybUdyb3VwRGlyZWN0aXZlW10gPSBuZXcgQXJyYXk8Rm9ybUdyb3VwRGlyZWN0aXZlPigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogYW55LCBwcml2YXRlIGZvcm1Hcm91cDogUnhGb3JtR3JvdXApIHtcclxuICAgICAgICB0aGlzLm1hcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1hcCgpIHtcclxuICAgICAgICB2YXIgY2hpbGRGb3JtQ29udHJvbHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgW2Zvcm0tY29udHJvbC1wYXRoXj1cIiR7dGhpcy5mb3JtR3JvdXAucGF0aH1cIl1gKSBhcyBOb2RlTGlzdDtcclxuICAgICAgICBpZiAoY2hpbGRGb3JtQ29udHJvbHMpIHtcclxuICAgICAgICAgICAgY2hpbGRGb3JtQ29udHJvbHMuZm9yRWFjaCgodDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm9ybUNvbnRyb2xOYW1lID0gdC5nZXRBdHRyaWJ1dGUoXCJmb3JtLWNvbnRyb2wtcGF0aFwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBjb250cm9sID0gdGhpcy5mb3JtR3JvdXAuZ2V0KGZvcm1Db250cm9sTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbCBpbnN0YW5jZW9mIFJ4Rm9ybUNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2xEaXJlY3RpdmUodCwgY29udHJvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZm9ybUNvbnRyb2xzLnB1c2goZm9ybUNvbnRyb2wpO1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtQ29udHJvbHMuZm9yRWFjaCh0ID0+IHtcclxuICAgICAgICAgICAgdC5kZXN0cm95KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5mb3JtR3JvdXAuY29udHJvbHMpLmZvckVhY2godCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1Hcm91cC5jb250cm9sc1t0XSBpbnN0YW5jZW9mIFJ4Rm9ybUdyb3VwKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtR3JvdXAuY29udHJvbHNbdF0uZGVzdHJveSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iXX0=