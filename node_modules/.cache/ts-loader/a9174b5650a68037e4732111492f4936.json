{"remainingRequest":"/home/cmurray/britevue-frontend/node_modules/babel-loader/lib/index.js!/home/cmurray/britevue-frontend/node_modules/ts-loader/index.js??ref--14-2!/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cmurray/britevue-frontend/src/views/Dashboard/Profile/Profile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cmurray/britevue-frontend/src/views/Dashboard/Profile/Profile.vue","mtime":1628691920058},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9jbXVycmF5L2JyaXRldnVlLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9jbXVycmF5L2JyaXRldnVlLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvY211cnJheS9icml0ZXZ1ZS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL2NtdXJyYXkvYnJpdGV2dWUtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvaG9tZS9jbXVycmF5L2JyaXRldnVlLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IFZ1ZSwgQ29tcG9uZW50LCBJbmplY3QgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IExvZ2luIGZyb20gIkAvY29tcG9uZW50cy9Mb2dpbi9Mb2dpbi52dWUiOwppbXBvcnQgU2lnbnVwIGZyb20gIkAvY29tcG9uZW50cy9TaWdudXAvU2lnbnVwLnZ1ZSI7CmltcG9ydCBNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvTW9kYWwvTW9kYWwudnVlIjsKaW1wb3J0IFZ1ZUdvb2dsZUF1dG9jb21wbGV0ZSBmcm9tICJ2dWUtZ29vZ2xlLWF1dG9jb21wbGV0ZSI7CmltcG9ydCAiLi9IYW5kY2FzaC5jc3MiOwppbXBvcnQgUmV2aWV3SW1hZ2VNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvSW1hZ2VNb2RhbC9SZXZpZXdJbWFnZU1vZGFsLnZ1ZSI7CnZhciBIYW5kY2FzaEFwcElEID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9IQ19BUFBfSUQ7CnZhciBNb25leWJ1dHRvbkFwcElEID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9NQl9BUFBfSUQ7CnZhciBNb25leWJ1dHRvblJlZGlyZWN0VVJJID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9NQl9SRURJUkVDVF9VUkk7Cgp2YXIgUHJvZmlsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhQcm9maWxlLCBfVnVlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihQcm9maWxlKTsKCiAgZnVuY3Rpb24gUHJvZmlsZSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZmlsZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLmxvYWRpbmdSZXZpZXdzID0gZmFsc2U7CiAgICBfdGhpcy5wcm9maWxlID0gbnVsbDsKICAgIF90aGlzLmN1cnJlbnRVc2VyID0gbnVsbDsKICAgIF90aGlzLm5vdGlmaWNhdGlvbnMgPSBbXTsKICAgIF90aGlzLmZhdm9yaXRlX3Jldmlld2VycyA9IFtdOwogICAgX3RoaXMuZmF2b3JpdGVfcGxhY2VzID0gW107CiAgICBfdGhpcy5mYXZvcml0ZV91c2VycyA9IFtdOwogICAgX3RoaXMuZmF2b3JpdGVfbG9jYXRpb25zID0gW107CiAgICBfdGhpcy5yZXZpZXdzID0gW107CgogICAgaWYgKHR5cGVvZiBfdGhpcy4kcm91dGUucGFyYW1zLmlkICE9ICd1bmRlZmluZWQnKSB7CiAgICAgIF90aGlzLnByb2ZpbGVfaWQgPSBfdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgfSBlbHNlIHsvLyB0aGlzLmdldFJvdXRlUGF0aCgnaG9tZScsICcnKTsKICAgIH0KCiAgICBfdGhpcy5zdGVwID0gMjsKICAgIF90aGlzLnNob3dSZXZpZXdzID0gNjsgLy8gb25ib2FyZGluZyBzdXJ2ZXkKCiAgICBfdGhpcy5zdWJtaXR0aW5nU3VydmV5ID0gZmFsc2U7CiAgICBfdGhpcy5zdXJ2ZXlMb2NhbFJlc3RhdXJhbnRRdWVzdGlvbiA9ICJXaGF0J3MgeW91ciBmYXZvcml0ZSByZXN0YXVyYW50PyI7CiAgICBfdGhpcy5zdXJ2ZXlMb2NhbFJlc3RhdXJhbnQgPSAiIjsKICAgIF90aGlzLnN1cnZleU1leGljYW5SZXN0YXVyYW50UXVlc3Rpb24gPSAiV2hhdCdzIHlvdXIgZmF2b3JpdGUgTWV4aWNhbiByZXN0YXVyYW50PyI7CiAgICBfdGhpcy5zdXJ2ZXlNZXhpY2FuUmVzdGF1cmFudCA9ICIiOwogICAgX3RoaXMuc3VydmV5UGl6emFQbGFjZVF1ZXN0aW9uID0gIldoYXQncyB5b3VyIGZhdm9yaXRlIHBpenphIHBsYWNlPyI7CiAgICBfdGhpcy5zdXJ2ZXlQaXp6YVBsYWNlID0gIiI7CiAgICBfdGhpcy5zdXJ2ZXlCcmVha2Zhc3RQbGFjZVF1ZXN0aW9uID0gIldoYXQncyB5b3VyIGZhdm9yaXRlIHBsYWNlIHRvIGdldCBicmVha2Zhc3Q/IjsKICAgIF90aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlID0gIiI7CiAgICBfdGhpcy5zdXJ2ZXlDb2ZmZWVRdWVzdGlvbiA9ICJXaGF0J3MgeW91ciBmYXZvcml0ZSBjb2ZmZWUgc2hvcD8iOwogICAgX3RoaXMuc3VydmV5Q29mZmVlID0gIiI7CiAgICBfdGhpcy5ub3RpZmljYXRpb25zID0gW107CiAgICBfdGhpcy5zaG93SGFuZGNhc2hNb2RhbCA9IGZhbHNlOwogICAgX3RoaXMudXNlclBob3RvTG9hZGluZyA9IGZhbHNlOwogICAgX3RoaXMucmV2aWV3UGhvdG9zID0gW107CiAgICBfdGhpcy5zaG93UmV2aWV3SW1hZ2VNb2RhbCA9IGZhbHNlOwogICAgX3RoaXMubWFpblJldmlld0ltYWdlTW9kZWwgPSAnJzsKCiAgICB2YXIgdXNlciA9IF90aGlzLnVzZXJfc2VydmljZS5nZXRDdXJyZW50VXNlcigpOwoKICAgIGlmICh1c2VyKSB7CiAgICAgIF90aGlzLmN1cnJlbnRVc2VyID0gdXNlcjsKICAgIH0KCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUHJvZmlsZSwgW3sKICAgIGtleTogIm1vdW50ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9tb3VudGVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB0b2tlbk9iaiwgZmV0Y2hVc2VyLCBmYXZvcml0ZV9yZXZpZXdlcnMsIGZhdm9yaXRlX3VzZXJzLCBpLCBmYXZvcml0ZV91c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuICE9IG51bGwgJiYgdGhpcy4kcm91dGUucXVlcnkudXNlcm5hbWUgIT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRva2VuT2JqID0gewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy4kcm91dGUucXVlcnkudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLiRyb3V0ZS5xdWVyeS50b2tlbiwKICAgICAgICAgICAgICAgICAgZXhwaXJlc19hdDogdGhpcy4kcm91dGUucXVlcnkuZXhwaXJlc19hdAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIEpTT04uc3RyaW5naWZ5KHRva2VuT2JqKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJfc2VydmljZS51cGRhdGVVc2VyTG9jYWxTdG9yYWdlKHRoaXMuJHJvdXRlLnF1ZXJ5LnVzZXJuYW1lKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51c2VyX3NlcnZpY2UudXBkYXRlVXNlckxvY2FsU3RvcmFnZSgiIik7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcl9zZXJ2aWNlLmdldFVzZXIodGhpcy5wcm9maWxlX2lkKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGZldGNoVXNlciA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEoZmV0Y2hVc2VyLnN0YXR1cyA9PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlck5vdGlmaWNhdGlvbigpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlID0gZmV0Y2hVc2VyLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvZmlsZS53YWxsZXQgIT0gJycpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gMzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9maWxlLm9uYm9hcmRpbmdTdXJ2ZXlEb25lID09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwID0gNDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmFsbFVzZXJSZXZpZXdzKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkRmF2b3JpdGVMb2NhdGlvbnMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZhdm9yaXRlc19zZXIucmV2aWV3ZXJzKHRoaXMucHJvZmlsZS5pZCk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBmYXZvcml0ZV9yZXZpZXdlcnMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGZhdm9yaXRlX3Jldmlld2Vycy5zdGF0dXMgPT0gMjAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZhdm9yaXRlX3Jldmlld2VycyA9IGZhdm9yaXRlX3Jldmlld2Vycy5kYXRhOwogICAgICAgICAgICAgICAgZmF2b3JpdGVfdXNlcnMgPSBuZXcgQXJyYXkoZmF2b3JpdGVfcmV2aWV3ZXJzLmxlbmd0aCk7CgogICAgICAgICAgICAgICAgaWYgKCEoZmF2b3JpdGVfcmV2aWV3ZXJzICYmIGZhdm9yaXRlX3Jldmlld2Vycy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZV9yZXZpZXdlcnMgPSBmYXZvcml0ZV9yZXZpZXdlcnM7CiAgICAgICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgIGlmICghKGkgPCBmYXZvcml0ZV9yZXZpZXdlcnMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJfc2VydmljZS5nZXRVc2VyKGZhdm9yaXRlX3Jldmlld2Vyc1tpXS5mYXZvcml0ZSk7CgogICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICBmYXZvcml0ZV91c2VyID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoZmF2b3JpdGVfdXNlci5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVfdXNlciA9IGZhdm9yaXRlX3VzZXIuZGF0YTsKICAgICAgICAgICAgICAgICAgZmF2b3JpdGVfdXNlcnNbaV0gPSBmYXZvcml0ZV91c2VyLmRhdGE7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVfdXNlcnMgPSBmYXZvcml0ZV91c2VyczsKCiAgICAgICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDkpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Mb2dpbigpOwoKICAgICAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1s5LCA0NF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgICByZXR1cm4gX21vdW50ZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1vdW50ZWQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzdXJ2ZXlMb2NhbFJlc3RhdXJhbnRDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdXJ2ZXlMb2NhbFJlc3RhdXJhbnRDaGFuZ2VkKHJldCwgcGxhY2UsIGlkKSB7CiAgICAgIGlmICh0eXBlb2YgcGxhY2UucGxhY2VfaWQgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICB0aGlzLnN1cnZleUxvY2FsUmVzdGF1cmFudCA9IHBsYWNlLnBsYWNlX2lkOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib3BlbkxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuTG9naW4oKSB7CiAgICAgIGlmICghdGhpcy4kcmVmc1snc2lnbnVwJ10uaXNPcGVuKCkpIHsKICAgICAgICB0aGlzLiRyZWZzWydsb2dpbiddLnNob3dNb2RhbCgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib25Mb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Mb2dpbigpIHsKICAgICAgdGhpcy5mbGFzaCgnWW91IGhhdmUgbG9nZ2VkIGluIHN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJywgewogICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgfSk7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uU2lnbnVwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblNpZ251cCgpIHsKICAgICAgdGhpcy5mbGFzaCgnWW91IGhhdmUgc2lnbmVkIHVwIHN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJywgewogICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgfSk7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5TaWdudXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5TaWdudXAoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ3NpZ251cCddLnNob3dNb2RhbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogInN1cnZleVBpenphUGxhY2VDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdXJ2ZXlQaXp6YVBsYWNlQ2hhbmdlZChyZXQsIHBsYWNlLCBpZCkgewogICAgICBpZiAodHlwZW9mIHBsYWNlLnBsYWNlX2lkICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgdGhpcy5zdXJ2ZXlQaXp6YVBsYWNlID0gcGxhY2UucGxhY2VfaWQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdXJ2ZXlDb2ZmZWVDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdXJ2ZXlDb2ZmZWVDaGFuZ2VkKHJldCwgcGxhY2UsIGlkKSB7CiAgICAgIGlmICh0eXBlb2YgcGxhY2UucGxhY2VfaWQgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICB0aGlzLnN1cnZleUNvZmZlZSA9IHBsYWNlLnBsYWNlX2lkOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic3VydmV5QnJlYWtmYXN0UGxhY2VDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdXJ2ZXlCcmVha2Zhc3RQbGFjZUNoYW5nZWQocmV0LCBwbGFjZSwgaWQpIHsKICAgICAgaWYgKHR5cGVvZiBwbGFjZS5wbGFjZV9pZCAhPSAidW5kZWZpbmVkIikgewogICAgICAgIHRoaXMuc3VydmV5QnJlYWtmYXN0UGxhY2UgPSBwbGFjZS5wbGFjZV9pZDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInN1cnZleU1leGljYW5SZXN0YXVyYW50Q2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3VydmV5TWV4aWNhblJlc3RhdXJhbnRDaGFuZ2VkKHJldCwgcGxhY2UsIGlkKSB7CiAgICAgIGlmICh0eXBlb2YgcGxhY2UucGxhY2VfaWQgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICB0aGlzLnN1cnZleU1leGljYW5SZXN0YXVyYW50ID0gcGxhY2UucGxhY2VfaWQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbWFnZVVybEFsdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW1hZ2VVcmxBbHQoZXZlbnQpIHsKICAgICAgZXZlbnQudGFyZ2V0LnNyYyA9IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9uby1waG90by1hdmF0YXIucG5nIik7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd01vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93TW9kYWwoKSB7CiAgICAgIHRoaXMuJHJlZnNbJ21vZGFsLWVkaXQtcHJvZmlsZSddLnNob3coKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWRlTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGVNb2RhbCgpIHsKICAgICAgdGhpcy4kcmVmc1snbW9kYWwtZWRpdC1wcm9maWxlJ10uaGlkZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNraXBTdXJ2ZXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNraXBTdXJ2ZXkoKSB7CiAgICAgIHRoaXMuc3RlcCA9IDQ7CiAgICB9CiAgfSwgewogICAga2V5OiAicHVyY2hhc2VSZXZpZXciLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wdXJjaGFzZVJldmlldyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocmV2aWV3X2lkKSB7CiAgICAgICAgdmFyIHNwaW5uZXIsIGJ1dHRvbiwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1cmNoYXNlLXNwaW5uZXItJyArIHJldmlld19pZCk7CiAgICAgICAgICAgICAgICBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHVyY2hhc2UtYnV0dG9uLScgKyByZXZpZXdfaWQpOwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja1VzZXJXYWxsZXQoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2aWV3c19zZXIuYnV5UmV2aWV3KHJldmlld19pZCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICB0aGlzLmZsYXNoKCdTdWNjZXNzZnVsbHkgcHVyY2hhc2VkIHJldmlldyBpbiB0eCAnICsgcmVzLmRhdGEucGF5bWVudFR4LCAnc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09IDU1NSkgewogICAgICAgICAgICAgICAgICB0aGlzLnNob3dIYW5kY2FzaE1vZGFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2goJ0ZhaWxlZCB0byBwdXJjaGFzZSByZXZpZXcnLCAnZXJyb3InLCB7CiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogNTAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFVzZXJSZXZpZXdzKCk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBwdXJjaGFzZVJldmlldyhfeCkgewogICAgICAgIHJldHVybiBfcHVyY2hhc2VSZXZpZXcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHB1cmNoYXNlUmV2aWV3OwogICAgfSgpCiAgfSwgewogICAga2V5OiAibG9hZEZhdm9yaXRlTG9jYXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9hZEZhdm9yaXRlTG9jYXRpb25zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgZmF2b3JpdGVfcGxhY2VzLCBmYXZvcml0ZV9sb2NhdGlvbnMsIGksIGZhdm9yaXRlX2xvY2F0aW9uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvZmlsZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mYXZvcml0ZXNfc2VyLnBsYWNlcyh0aGlzLnByb2ZpbGUuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBmYXZvcml0ZV9wbGFjZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGZhdm9yaXRlX2xvY2F0aW9ucyA9IG5ldyBBcnJheShmYXZvcml0ZV9wbGFjZXMubGVuZ3RoKTsKCiAgICAgICAgICAgICAgICBpZiAoIShmYXZvcml0ZV9wbGFjZXMuc3RhdHVzID09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZmF2b3JpdGVfcGxhY2VzID0gZmF2b3JpdGVfcGxhY2VzLmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKCEoZmF2b3JpdGVfcGxhY2VzICYmIGZhdm9yaXRlX3BsYWNlcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVfcGxhY2VzID0gZmF2b3JpdGVfcGxhY2VzOwogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoIShpIDwgZmF2b3JpdGVfcGxhY2VzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYWNlX3Nlci5nZXRQbGFjZShmYXZvcml0ZV9wbGFjZXNbaV0uZmF2b3JpdGUpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgZmF2b3JpdGVfbG9jYXRpb24gPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVfbG9jYXRpb24gPSBmYXZvcml0ZV9sb2NhdGlvbjsKICAgICAgICAgICAgICAgIGZhdm9yaXRlX2xvY2F0aW9uc1tpXSA9IGZhdm9yaXRlX2xvY2F0aW9uOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgdGhpcy5mYXZvcml0ZV9sb2NhdGlvbnMgPSBmYXZvcml0ZV9sb2NhdGlvbnM7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2FkRmF2b3JpdGVMb2NhdGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIF9sb2FkRmF2b3JpdGVMb2NhdGlvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvYWRGYXZvcml0ZUxvY2F0aW9uczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImFsbFVzZXJSZXZpZXdzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWxsVXNlclJldmlld3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciByZXZpZXdzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLnJldmlld3MgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ1Jldmlld3MgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2aWV3c19zZXIuYWxsVXNlclJldmlld3ModGhpcy5wcm9maWxlLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmV2aWV3cyA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJldmlld3Muc3RhdHVzID09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5yZXZpZXdzID0gcmV2aWV3cy5kYXRhOwoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMucmV2aWV3cyAhPSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFJldmlld0xvY2F0aW9ucygpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nUmV2aWV3cyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYWxsVXNlclJldmlld3MoKSB7CiAgICAgICAgcmV0dXJuIF9hbGxVc2VyUmV2aWV3cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWxsVXNlclJldmlld3M7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2FkUmV2aWV3TG9jYXRpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9hZFJldmlld0xvY2F0aW9ucyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHJldnMsIGksIHJldiwgcGxhY2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldnMgPSBbXTsKICAgICAgICAgICAgICAgIGkgPSAwOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpZiAoIShpIDwgdGhpcy5yZXZpZXdzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV2ID0gdGhpcy5yZXZpZXdzW2ldOwoKICAgICAgICAgICAgICAgIGlmICghKHJldi5wbGFjZUlEID09IG51bGwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoImNvbnRpbnVlIiwgMTcpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wbGFjZV9zZXIuZ2V0UGxhY2UocmV2LnBsYWNlSUQpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBwbGFjZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgcmV2LnRpdGxlID0gcGxhY2UubmFtZTsKICAgICAgICAgICAgICAgIHJldnMucHVzaChyZXYpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQ1LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgdGhpcy5yZXZpZXdzID0gcmV2czsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ1Jldmlld3MgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcywgW1s2LCAxNF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9hZFJldmlld0xvY2F0aW9ucygpIHsKICAgICAgICByZXR1cm4gX2xvYWRSZXZpZXdMb2NhdGlvbnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvYWRSZXZpZXdMb2NhdGlvbnM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzdWJtaXRPbmJvYXJkaW5nU3VydmV5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc3VibWl0T25ib2FyZGluZ1N1cnZleSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHN1cnZleVJlc3BvbnNlcywgcmVzcG9uc2UsIHN1cnZleV9yZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN1cnZleVJlc3BvbnNlcyA9IFtdOwogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAiIiwKICAgICAgICAgICAgICAgICAgYW5zd2VyOiAiIgogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdXJ2ZXlMb2NhbFJlc3RhdXJhbnQgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246IHRoaXMuc3VydmV5TG9jYWxSZXN0YXVyYW50UXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleUxvY2FsUmVzdGF1cmFudAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBzdXJ2ZXlSZXNwb25zZXMucHVzaChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnQgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246IHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnRRdWVzdGlvbiwKICAgICAgICAgICAgICAgICAgICBhbnN3ZXI6IHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnQKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgc3VydmV5UmVzcG9uc2VzLnB1c2gocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlICE9ICIiKSB7CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gewogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiB0aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIHN1cnZleVJlc3BvbnNlcy5wdXNoKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdXJ2ZXlDb2ZmZWUgIT0gIiIpIHsKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246IHRoaXMuc3VydmV5Q29mZmVlUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleUNvZmZlZQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBzdXJ2ZXlSZXNwb25zZXMucHVzaChyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHRoaXMuc3VydmV5UGl6emFQbGFjZSAhPSAiIikgewogICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHsKICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbjogdGhpcy5zdXJ2ZXlQaXp6YVBsYWNlUXVlc3Rpb24sCiAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleVBpenphUGxhY2UKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgc3VydmV5UmVzcG9uc2VzLnB1c2gocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMucHJvZmlsZSA9PSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgaWYgKCEoc3VydmV5UmVzcG9uc2VzLmxlbmd0aCA9PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmZsYXNoKCdQbGVhc2UgaW5jbHVkZSBhdCBsZWFzdCBvbmUgc3VydmV5IHJlc3BvbnNlIG9yIHNraXAgdGhlIHN1cnZleScsICdlcnJvcicsIHsKICAgICAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgdGhpcy5vbmJvYXJkaW5nU3VydmV5ID0gewogICAgICAgICAgICAgICAgICBpZDogIjEiLAogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy5wcm9maWxlLmlkLAogICAgICAgICAgICAgICAgICByZXNwb25zZXM6IHN1cnZleVJlc3BvbnNlcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0dGluZ1N1cnZleSA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VydmV5X3Nlci5wb3N0U3VydmV5KHRoaXMub25ib2FyZGluZ1N1cnZleSk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBzdXJ2ZXlfcmVzID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHN1cnZleV9yZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICB0aGlzLmZsYXNoKCdTdWNjZXNzZnVsbHkgc3VibWl0dGVkIHN1cnZleSByZXNwb25zZSEgWW91IHdlcmUgcGFpZCAnICsgc3VydmV5X3Jlcy5kYXRhLnRvdGFsRWFybmluZ3MgKyAnIGNlbnRzIGluIHRyYW5zYWN0aW9uICcgKyBzdXJ2ZXlfcmVzLmRhdGEucGF5bWVudFR4LCAnc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAxMDAwMAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlLmVhcm5pbmdzID0gc3VydmV5X3Jlcy5kYXRhLnRvdGFsRWFybmluZ3M7CiAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0dGluZ1N1cnZleSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB0aGlzLmxvYWRGYXZvcml0ZUxvY2F0aW9ucygpOwogICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSA0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5mbGFzaCgnU29tZXRoaW5nIHdlbnQgd3JvbmcnLCAnZXJyb3InLCB7CiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMTAwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0dGluZ1N1cnZleSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc3VibWl0T25ib2FyZGluZ1N1cnZleSgpIHsKICAgICAgICByZXR1cm4gX3N1Ym1pdE9uYm9hcmRpbmdTdXJ2ZXkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHN1Ym1pdE9uYm9hcmRpbmdTdXJ2ZXk7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJyZWRpcmVjdFRvSEMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZGlyZWN0VG9IQygpIHsKICAgICAgaWYgKHRoaXMucHJvZmlsZSAhPSBudWxsKSB7CiAgICAgICAgdGhpcy4kY29va2llcy5zZXQoJ3VzZXJuYW1lJywgdGhpcy5wcm9maWxlLmlkKTsKICAgICAgfQoKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly9hcHAuaGFuZGNhc2guaW8vIy9hdXRob3JpemVBcHA/YXBwSWQ9JyArIEhhbmRjYXNoQXBwSUQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2VuZXJhdGVTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVTdGF0ZSgpIHsKICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICB2YXIgY2hhcmFjdGVycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7CiAgICAgIHZhciBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogImdldFJvdXRlUGF0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Um91dGVQYXRoKG5hbWUsIHBhcmFtZXRlcnMpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIHBhcmFtczogcGFyYW1ldGVycwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cHZvdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cHZvdGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHJldmlld19pZCwgZSkgewogICAgICAgIHZhciBzcGlubmVyLCB1cHZvdGVFbGVtZW50LCB1cHZvdGVJY29uLCByZXMsIHVwdm90ZVJlc3VsdCwgdm90ZSwgbXNnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrVXNlcldhbGxldCgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXB2b3RlLXNwaW5uZXItJyArIHJldmlld19pZCk7CiAgICAgICAgICAgICAgICB1cHZvdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vwdm90ZS0nICsgcmV2aWV3X2lkKTsKICAgICAgICAgICAgICAgIHVwdm90ZUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXB2b3RlLWljb24tJyArIHJldmlld19pZCk7CiAgICAgICAgICAgICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgdXB2b3RlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTsKICAgICAgICAgICAgICAgIHVwdm90ZUljb24uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2aWV3c19zZXIudXB2b3RlUmV2aWV3KHRoaXMuY3VycmVudFVzZXIuaWQsIHJldmlld19pZCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7CiAgICAgICAgICAgICAgICB1cHZvdGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgdXB2b3RlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgdXB2b3RlUmVzdWx0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICAgIHZvdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXB2b3RlLScgKyByZXZpZXdfaWQpLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXB2b3RlLScgKyByZXZpZXdfaWQpLmlubmVySFRNTCA9IChwYXJzZUludCh2b3RlKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2goJ1N1Y2Nlc3NmdWxseSB1cHZvdGVkIHJldmlldycsICdzdWNjZXNzJywgewogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT0gNTU1KSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0hhbmRjYXNoTW9kYWwgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbXNnID0gcmVzLmRhdGEubWVzc2FnZTsKCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXNnICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbGFzaChtc2csICdlcnJvcicsIHsKICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXB2b3RlKF94MiwgX3gzKSB7CiAgICAgICAgcmV0dXJuIF91cHZvdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwdm90ZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRvd252b3RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZG93bnZvdGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KHJldmlld19pZCwgZSkgewogICAgICAgIHZhciBzcGlubmVyLCBkb3dudm90ZUVsZW1lbnQsIGRvd252b3RlSWNvbiwgcmVzLCB2b3RlLCBtc2c7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tVc2VyV2FsbGV0KCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3Bpbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dudm90ZS1zcGlubmVyLScgKyByZXZpZXdfaWQpOwogICAgICAgICAgICAgICAgZG93bnZvdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd252b3RlLScgKyByZXZpZXdfaWQpOwogICAgICAgICAgICAgICAgZG93bnZvdGVJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd252b3RlLWljb24tJyArIHJldmlld19pZCk7CiAgICAgICAgICAgICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgZG93bnZvdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgZG93bnZvdGVJY29uLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmlld3Nfc2VyLmRvd25SZXZpZXcodGhpcy5wcm9maWxlLmlkLCByZXZpZXdfaWQpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgZG93bnZvdGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgZG93bnZvdGVJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICB2b3RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd252b3RlLScgKyByZXZpZXdfaWQpLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bnZvdGUtJyArIHJldmlld19pZCkuaW5uZXJIVE1MID0gKHBhcnNlSW50KHZvdGUpIC0gMSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5mbGFzaCgnU3VjY2Vzc2Z1bGx5IGRvd252b3RlZCByZXZpZXcnLCAnc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMuc3RhdHVzID09IDU1NSkgewogICAgICAgICAgICAgICAgICB0aGlzLnNob3dIYW5kY2FzaE1vZGFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG1zZyA9IHJlcy5kYXRhLm1lc3NhZ2U7CgogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1zZyAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2gobXNnLCAnZXJyb3InLCB7CiAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRvd252b3RlKF94NCwgX3g1KSB7CiAgICAgICAgcmV0dXJuIF9kb3dudm90ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZG93bnZvdGU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ1cGxvYWRQcm9maWxlUGljdHVyZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwbG9hZFByb2ZpbGVQaWN0dXJlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShldmVudCkgewogICAgICAgIHZhciBpbnB1dCwgZmlsZVR5cGUsIHZhbGlkSW1hZ2VUeXBlcywgcGhvdG8sIHVwbG9hZF91c2VyX3Bob3RvOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIERPTSBpbnB1dCBlbGVtZW50CiAgICAgICAgICAgICAgICBpbnB1dCA9IGV2ZW50LnRhcmdldDsKCiAgICAgICAgICAgICAgICBpZiAoIShpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZmlsZVR5cGUgPSBpbnB1dC5maWxlc1swXVsidHlwZSJdOwogICAgICAgICAgICAgICAgdmFsaWRJbWFnZVR5cGVzID0gWyJpbWFnZS9qcGciLCAiaW1hZ2UvZ2lmIiwgImltYWdlL2pwZWciLCAiaW1hZ2UvcG5nIl07CgogICAgICAgICAgICAgICAgaWYgKCF2YWxpZEltYWdlVHlwZXMuaW5jbHVkZXMoZmlsZVR5cGUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBob3RvID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcl9zZXJ2aWNlLnVwbG9hZFVzZXJQaG90byhwaG90bywgdGhpcy5wcm9maWxlLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgdXBsb2FkX3VzZXJfcGhvdG8gPSBfY29udGV4dDkuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXVwbG9hZF91c2VyX3Bob3RvKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMudXNlclBob3RvTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcl9zZXJ2aWNlLnVwZGF0ZVVzZXJMb2NhbFN0b3JhZ2UodGhpcy5wcm9maWxlLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHRoaXMuZmxhc2goJ1VwZGF0ZWQgcHJvZmlsZSBwaWN0dXJlJywgJ3N1Y2Nlc3MnLCB7CiAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy51c2VyUGhvdG9Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIHRoaXMuZmxhc2goJ1BsZWFzZSB0cnkgdG8gdXBsb2FkIGEgdmFsaWQgaW1hZ2UnLCAnZXJyb3InLCB7CiAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBsb2FkUHJvZmlsZVBpY3R1cmUoX3g2KSB7CiAgICAgICAgcmV0dXJuIF91cGxvYWRQcm9maWxlUGljdHVyZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBsb2FkUHJvZmlsZVBpY3R1cmU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzaG93TW9yZVJldmlld3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dNb3JlUmV2aWV3cygpIHsKICAgICAgdGhpcy5zaG93UmV2aWV3cyArPSA2OwogICAgfQogIH0sIHsKICAgIGtleTogInRva2VuRXhwaXJlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3Rva2VuRXhwaXJlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJfc2VydmljZS5sb2dvdXQoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAiaG9tZSIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHRva2VuRXhwaXJlZCgpIHsKICAgICAgICByZXR1cm4gX3Rva2VuRXhwaXJlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdG9rZW5FeHBpcmVkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZGVsZXRlUmV2aWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZGVsZXRlUmV2aWV3ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEocmV2aWV3X2lkKSB7CiAgICAgICAgdmFyIF9kZWxldGVSZXZpZXcyOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja1VzZXJXYWxsZXQoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyByZXZpZXcnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmV2aWV3c19zZXIuZGVsZXRlUmV2aWV3KHJldmlld19pZCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9kZWxldGVSZXZpZXcyID0gX2NvbnRleHQxMS5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChfZGVsZXRlUmV2aWV3Mi5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuYWxsVXNlclJldmlld3MoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2goJ0ZhaWxlZCB0byBkZWxldGUgcmV2aWV3JywgJ2Vycm9yJywgewogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZGVsZXRlUmV2aWV3KF94NykgewogICAgICAgIHJldHVybiBfZGVsZXRlUmV2aWV3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZWxldGVSZXZpZXc7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJlZGl0UmV2aWV3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZWRpdFJldmlldyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKHBsYWNlX2lkLCBwbGFjZV9uYW1lLCByZXZpZXdfaWQpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVXNlcldhbGxldCgpKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Um91dGVQYXRoKCduZXdfcmV2aWV3JywgewogICAgICAgICAgICAgICAgICAgICdwbGFjZV9pZCc6IHBsYWNlX2lkLAogICAgICAgICAgICAgICAgICAgICdwbGFjZV9uYW1lJzogcGxhY2VfbmFtZSwKICAgICAgICAgICAgICAgICAgICAncmV2aWV3X2lkJzogcmV2aWV3X2lkCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGVkaXRSZXZpZXcoX3g4LCBfeDksIF94MTApIHsKICAgICAgICByZXR1cm4gX2VkaXRSZXZpZXcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGVkaXRSZXZpZXc7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjaGVja1VzZXJXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrVXNlcldhbGxldCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHsKICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlci53YWxsZXQpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3BlbkxvZ2luKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVc2VyTm90aWZpY2F0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0VXNlck5vdGlmaWNhdGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciB4OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbl9zZXJ2aWNlLmdldFVzZXJOb3RpZmljYXRpb25zKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHggPSBfY29udGV4dDEzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHguc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSB4LmRhdGEubm90aWZpY2F0aW9uczsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRVc2VyTm90aWZpY2F0aW9uKCkgewogICAgICAgIHJldHVybiBfZ2V0VXNlck5vdGlmaWNhdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0VXNlck5vdGlmaWNhdGlvbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNsZWFyTm90aWZpY2F0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NsZWFyTm90aWZpY2F0aW9ucyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KCkgewogICAgICAgIHZhciB4OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbl9zZXJ2aWNlLmNsZWFyVXNlck5vdGlmaWNhdGlvbnMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgeCA9IF9jb250ZXh0MTQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoeC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAvKmF3YWl0IHRoaXMuZ2V0VXNlck5vdGlmaWNhdGlvbigpOyovCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE0LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY2xlYXJOb3RpZmljYXRpb25zKCkgewogICAgICAgIHJldHVybiBfY2xlYXJOb3RpZmljYXRpb25zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjbGVhck5vdGlmaWNhdGlvbnM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVQcm9maWxlRm9ybSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZVByb2ZpbGVGb3JtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTUoZSkgewogICAgICAgIHZhciBhcHByb3ZlZCwgZW1haWwsIGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgdXBkYXRlX3Byb2ZpbGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBhcHByb3ZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBlbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpOyAvL2NvbnN0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkJykgYXMgSFRNTElucHV0RWxlbWVudDsKCiAgICAgICAgICAgICAgICBmaXJzdF9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpcnN0X25hbWUnKTsKICAgICAgICAgICAgICAgIGxhc3RfbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXN0X25hbWUnKTsKCiAgICAgICAgICAgICAgICBpZiAoZW1haWwudmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWxfZXJyb3InKS5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbF9lcnJvcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgICBhcHByb3ZlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLyppZiAocGFzc3dvcmQudmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRfZXJyb3InKSEuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRfZXJyb3InKSEuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7CiAgICAgICAgICAgICAgICAgIGFwcHJvdmVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9Ki8KCgogICAgICAgICAgICAgICAgaWYgKGZpcnN0X25hbWUudmFsdWUubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlyc3RfbmFtZV9lcnJvcicpLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpcnN0X25hbWVfZXJyb3InKS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgICAgICAgICAgICAgYXBwcm92ZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAobGFzdF9uYW1lLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RfbmFtZV9lcnJvcicpLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RfbmFtZV9lcnJvcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICAgICAgICAgICAgICBhcHByb3ZlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghYXBwcm92ZWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlcl9zZXJ2aWNlLnVwZGF0ZVByb2ZpbGUodGhpcy5wcm9maWxlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHVwZGF0ZV9wcm9maWxlID0gX2NvbnRleHQxNS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICh1cGRhdGVfcHJvZmlsZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZmxhc2goJ1lvdXIgcHJvZmlsZSBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJywgewogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGVGb3JtKF94MTEpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZVByb2ZpbGVGb3JtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVQcm9maWxlRm9ybTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogIm9wZW5SZXZpZXdJbWFnZU1vZGVsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuUmV2aWV3SW1hZ2VNb2RlbChyZXZpZXdfcGhvdG9zKSB7CiAgICAgIHRoaXMucmV2aWV3UGhvdG9zID0gcmV2aWV3X3Bob3RvczsKICAgICAgdGhpcy5tYWluUmV2aWV3SW1hZ2VNb2RlbCA9IHJldmlld19waG90b3NbMF0udXJsOwogICAgICB0aGlzLnNob3dSZXZpZXdJbWFnZU1vZGFsID0gIXRoaXMuc2hvd1Jldmlld0ltYWdlTW9kYWw7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2hhbmdlU2hvd1Jldmlld0ltYWdlTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoYW5nZVNob3dSZXZpZXdJbWFnZU1vZGFsKCkgewogICAgICB0aGlzLnNob3dSZXZpZXdJbWFnZU1vZGFsID0gZmFsc2U7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUHJvZmlsZTsKfShWdWUpOwoKX19kZWNvcmF0ZShbSW5qZWN0KCd1c2VyU2VydmljZScpXSwgUHJvZmlsZS5wcm90b3R5cGUsICJ1c2VyX3NlcnZpY2UiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbSW5qZWN0KCdyZXZpZXdzU2VydmljZScpXSwgUHJvZmlsZS5wcm90b3R5cGUsICJyZXZpZXdzX3NlciIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtJbmplY3QoJ3BsYWNlU2VydmljZScpXSwgUHJvZmlsZS5wcm90b3R5cGUsICJwbGFjZV9zZXIiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbSW5qZWN0KCdmYXZvcml0ZXNTZXJ2aWNlJyldLCBQcm9maWxlLnByb3RvdHlwZSwgImZhdm9yaXRlc19zZXIiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbSW5qZWN0KCdnb29nbGVTZXJ2aWNlJyldLCBQcm9maWxlLnByb3RvdHlwZSwgImdvb2dsZV9zZXIiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbSW5qZWN0KCdzdXJ2ZXlTZXJ2aWNlJyldLCBQcm9maWxlLnByb3RvdHlwZSwgInN1cnZleV9zZXIiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbSW5qZWN0KCdub3RpZmljYXRpb25zU2VydmljZScpXSwgUHJvZmlsZS5wcm90b3R5cGUsICJub3RpZmljYXRpb25fc2VydmljZSIsIHZvaWQgMCk7CgpQcm9maWxlID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBMb2dpbjogTG9naW4sCiAgICBTaWdudXA6IFNpZ251cCwKICAgIE1vZGFsOiBNb2RhbCwKICAgIFZ1ZUdvb2dsZUF1dG9jb21wbGV0ZTogVnVlR29vZ2xlQXV0b2NvbXBsZXRlLAogICAgUmV2aWV3SW1hZ2VNb2RhbDogUmV2aWV3SW1hZ2VNb2RhbAogIH0sCiAgbWV0YUluZm86IHsKICAgIHRpdGxlOiAiQnJpdGV2dWUgLSBCbG9ja2NoYWluIHZlcmlmaWVkIHJldmlld3Mgd2hlcmUgcmV2aWV3ZXJzIGdldCBwYWlkIiwKICAgIG1ldGE6IFt7CiAgICAgIG5hbWU6ICd0aXRsZScsCiAgICAgIGNvbnRlbnQ6ICdCcml0ZXZ1ZSAtIEJsb2NrY2hhaW4gdmVyaWZpZWQgcmV2aWV3cyB3aGVyZSByZXZpZXdlcnMgZ2V0IHBhaWQnCiAgICB9LCB7CiAgICAgIG5hbWU6ICdkZXNjcmlwdGlvbicsCiAgICAgIGNvbnRlbnQ6ICdCZWdpbiBlYXJuaW5nIG1vbmV5IGZvciB5b3VyIHJldmlld3Mgb2YgYnVzaW5lc3NlcyBhbmQgcGxhY2VzIHdpdGggQnJpdGV2dWUuIFdlIHdpbGwgcGF5IHlvdSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBob21ldG93biB0byBnZXQgc3RhcnRlZCEnCiAgICB9LCB7CiAgICAgIGl0ZW1wcm9wOiAnbmFtZScsCiAgICAgIGNvbnRlbnQ6ICJCcml0ZXZ1ZSIKICAgIH0sIHsKICAgICAgaXRlbXByb3A6ICdkZXNjcmlwdGlvbicsCiAgICAgIGNvbnRlbnQ6ICJCZWdpbiBlYXJuaW5nIG1vbmV5IGZvciB5b3VyIHJldmlld3Mgb2YgYnVzaW5lc3NlcyBhbmQgcGxhY2VzIHdpdGggQnJpdGV2dWUuIFdlIHdpbGwgcGF5IHlvdSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBob21ldG93biB0byBnZXQgc3RhcnRlZCEiCiAgICB9LCB7CiAgICAgIGl0ZW1wcm9wOiAnaW1hZ2UnLAogICAgICBjb250ZW50OiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKQogICAgfSwgewogICAgICBwcm9wZXJ0eTogJ29nOnR5cGUnLAogICAgICBjb250ZW50OiAid2Vic2l0ZSIKICAgIH0sIHsKICAgICAgcHJvcGVydHk6ICdvZzp1cmwnLAogICAgICBjb250ZW50OiAiaHR0cHM6Ly9icml0ZXZ1ZS5jb20vIgogICAgfSwgewogICAgICBwcm9wZXJ0eTogJ29nOnRpdGxlJywKICAgICAgY29udGVudDogIkJyaXRldnVlIC0gQmxvY2tjaGFpbiB2ZXJpZmllZCByZXZpZXdzIHdoZXJlIHJldmlld2VycyBnZXQgcGFpZCIKICAgIH0sIHsKICAgICAgcHJvcGVydHk6ICdvZzpkZXNjcmlwdGlvbicsCiAgICAgIGNvbnRlbnQ6ICJCZWdpbiBlYXJuaW5nIG1vbmV5IGZvciB5b3VyIHJldmlld3Mgb2YgYnVzaW5lc3NlcyBhbmQgcGxhY2VzIHdpdGggQnJpdGV2dWUuIFdlIHdpbGwgcGF5IHlvdSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBob21ldG93biB0byBnZXQgc3RhcnRlZCEiCiAgICB9LCB7CiAgICAgIHByb3BlcnR5OiAnb2c6aW1hZ2UnLAogICAgICBjb250ZW50OiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKQogICAgfSwgewogICAgICBwcm9wZXJ0eTogJ29nOnNpdGVfbmFtZScsCiAgICAgIGNvbnRlbnQ6ICdicml0ZXZ1ZScKICAgIH0sIHsKICAgICAgbmFtZTogJ3R3aXR0ZXI6Y2FyZCcsCiAgICAgIGNvbnRlbnQ6ICJzdW1tYXJ5X2xhcmdlX2ltYWdlIgogICAgfSwgewogICAgICBuYW1lOiAndHdpdHRlcjp1cmwnLAogICAgICBjb250ZW50OiAiaHR0cHM6Ly9icml0ZXZ1ZS5jb20vIgogICAgfSwgewogICAgICBuYW1lOiAndHdpdHRlcjp0aXRsZScsCiAgICAgIGNvbnRlbnQ6ICJCcml0ZXZ1ZSAtIEJsb2NrY2hhaW4gdmVyaWZpZWQgcmV2aWV3cyB3aGVyZSByZXZpZXdlcnMgZ2V0IHBhaWQiCiAgICB9LCB7CiAgICAgIG5hbWU6ICd0d2l0dGVyOmRlc2NyaXB0aW9uJywKICAgICAgY29udGVudDogIkJlZ2luIGVhcm5pbmcgbW9uZXkgZm9yIHlvdXIgcmV2aWV3cyBvZiBidXNpbmVzc2VzIGFuZCBwbGFjZXMgd2l0aCBCcml0ZXZ1ZS4gV2Ugd2lsbCBwYXkgeW91IGZvciBpbmZvcm1hdGlvbiBhYm91dCB5b3VyIGhvbWV0b3duIHRvIGdldCBzdGFydGVkISIKICAgIH0sIHsKICAgICAgbmFtZTogJ3R3aXR0ZXI6aW1hZ2UnLAogICAgICBjb250ZW50OiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKQogICAgfV0KICB9Cn0pXSwgUHJvZmlsZSk7CmV4cG9ydCBkZWZhdWx0IFByb2ZpbGU7"},{"version":3,"sources":["/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cmurray/britevue-frontend/src/views/Dashboard/Profile/Profile.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Vue, Component, Inject} from 'vue-property-decorator';\nimport {IReview} from \"@/interfaces/IReview\";\nimport {INotification} from \"@/interfaces/INotification\";\nimport {ISurvey} from \"@/interfaces/ISurvey\";\nimport {IUser} from \"@/interfaces/IUser\";\nimport {IPlace} from \"@/interfaces/IPlace\";\nimport {IFavorite} from \"@/interfaces/IFavorite\";\nimport {ReviewsService} from \"@/services/ReviewsService\";\nimport {FavoritesService} from \"@/services/FavoritesService\";\nimport {UserService} from \"@/services/UserService\";\nimport {PlaceService} from \"@/services/PlaceService\";\nimport {GoogleService} from \"@/services/GoogleService\";\nimport {SurveyService} from \"@/services/SurveyService\";\nimport Login from \"@/components/Login/Login.vue\";\nimport Signup from \"@/components/Signup/Signup.vue\";\nimport Modal from \"@/components/Modal/Modal.vue\";\nimport VueGoogleAutocomplete from \"vue-google-autocomplete\"\nimport \"./Handcash.css\";\nimport {NotificationsService} from \"@/services/NotficationsService\";\nimport ReviewImageModal from \"@/components/ImageModal/ReviewImageModal.vue\";\n\nconst HandcashAppID = process.env.VUE_APP_HC_APP_ID\nconst MoneybuttonAppID = process.env.VUE_APP_MB_APP_ID\nconst MoneybuttonRedirectURI = process.env.VUE_APP_MB_REDIRECT_URI\n@Component({\n  components: {\n    Login,\n    Signup,\n    Modal,\n    VueGoogleAutocomplete,\n    ReviewImageModal\n  },\n  metaInfo:{\n    title: \"Britevue - Blockchain verified reviews where reviewers get paid\",\n    meta: [\n      { name:'title',content:'Britevue - Blockchain verified reviews where reviewers get paid'},\n      { name: 'description', content:  'Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!'},\n      { itemprop: 'name', content: \"Britevue\"},\n      { itemprop: 'description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { itemprop: 'image', content:  require('@/assets/images/logo_black.svg')},\n      { property: 'og:type', content: \"website\"},\n      { property: 'og:url', content: \"https://britevue.com/\"},\n      { property: 'og:title', content: \"Britevue - Blockchain verified reviews where reviewers get paid\"},\n      { property: 'og:description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { property: 'og:image', content:  require('@/assets/images/logo_black.svg')},\n      { property: 'og:site_name', content: 'britevue'},\n      { name: 'twitter:card', content: \"summary_large_image\"},\n      { name: 'twitter:url', content: \"https://britevue.com/\"},\n      { name: 'twitter:title', content: \"Britevue - Blockchain verified reviews where reviewers get paid\"},\n      { name: 'twitter:description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { name: 'twitter:image', content: require('@/assets/images/logo_black.svg') },\n    ]\n  }\n})\nexport default class Profile extends Vue {\n  @Inject('userService')\n  user_service!: UserService;\n\n  loadingReviews = false\n  step: number;\n  profile: IUser | null = null;\n  profile_id!: string;\n  currentUser: IUser | null = null;\n  notifications: INotification[] = [];\n  favorite_reviewers: IFavorite[] = [];\n  favorite_places: IFavorite[] = [];\n  favorite_user!: IUser;\n  favorite_users: IUser[] = [];\n  favorite_location!: IPlace;\n  favorite_locations: IPlace[] = [];\n  reviews: IReview[] = [];\n  @Inject('reviewsService')\n  reviews_ser!: ReviewsService;\n\n  @Inject('placeService')\n  place_ser!: PlaceService;\n\n  @Inject('favoritesService')\n  favorites_ser!: FavoritesService;\n\n  @Inject('googleService')\n  google_ser!: GoogleService;\n  showReviews: number;\n\n  @Inject('surveyService')\n  survey_ser!: SurveyService;\n\n  @Inject('notificationsService')\n  notification_service!: NotificationsService;\n\n  // Onboarding survey vars\n  surveyLocalRestaurantQuestion: string;\n  surveyLocalRestaurant: string;\n  surveyMexicanRestaurantQuestion: string;\n  surveyMexicanRestaurant: string;\n  surveyPizzaPlaceQuestion: string;\n  surveyPizzaPlace: string;\n  surveyBreakfastPlaceQuestion: string;\n  surveyBreakfastPlace: string;\n  surveyCoffeeQuestion: string;\n  surveyCoffee: string;\n\n  onboardingSurvey!: ISurvey;\n  flash: any;\n  userPhotoLoading: boolean;\n  submittingSurvey: boolean;\n  reviewPhotos: [];\n  showReviewImageModal: boolean;\n  mainReviewImageModel: string;\n\n  showHandcashModal: boolean;\n\n  constructor() {\n    super();\n    if (typeof this.$route.params.id != 'undefined') {\n      this.profile_id = this.$route.params.id;\n    } else {\n     // this.getRoutePath('home', '');\n    }\n    this.step = 2;\n    this.showReviews = 6;\n    // onboarding survey\n    this.submittingSurvey = false;\n    this.surveyLocalRestaurantQuestion = \"What's your favorite restaurant?\";\n    this.surveyLocalRestaurant = \"\";\n    this.surveyMexicanRestaurantQuestion = \"What's your favorite Mexican restaurant?\";\n    this.surveyMexicanRestaurant = \"\";\n    this.surveyPizzaPlaceQuestion = \"What's your favorite pizza place?\";\n    this.surveyPizzaPlace = \"\";\n    this.surveyBreakfastPlaceQuestion = \"What's your favorite place to get breakfast?\";\n    this.surveyBreakfastPlace = \"\";\n    this.surveyCoffeeQuestion = \"What's your favorite coffee shop?\";\n    this.surveyCoffee = \"\";\n    this.notifications = [];\n    this.showHandcashModal = false;\n    this.userPhotoLoading = false;\n    this.reviewPhotos = [];\n    this.showReviewImageModal = false;\n    this.mainReviewImageModel = '';\n    const user = this.user_service.getCurrentUser();\n    if (user) {\n      this.currentUser = user;\n    }\n  }\n\n  async mounted() {\n    if (this.$route.query.token != null && this.$route.query.username != null) {\n      const tokenObj = {\n        username: this.$route.query.username,\n        token: this.$route.query.token,\n        expires_at: this.$route.query.expires_at\n      }\n      localStorage.setItem('token', JSON.stringify(tokenObj))\n      await this.user_service.updateUserLocalStorage(this.$route.query.username as string)\n    } else {\n      await this.user_service.updateUserLocalStorage(\"\");\n    }\n\n    try {\n      const fetchUser = await this.user_service.getUser(this.profile_id);\n      if (fetchUser.status == 200) {\n        await this.getUserNotification();\n        this.profile = fetchUser.data;\n        if (this.profile!.wallet != '') {\n          this.step = 3;\n        }\n        if (this.profile!.onboardingSurveyDone == true) {\n          this.step = 4;\n        }\n\n        this.allUserReviews();\n        await this.loadFavoriteLocations();\n\n        let favorite_reviewers = await this.favorites_ser.reviewers(this.profile!.id);\n        if (favorite_reviewers.status == 200) {\n          favorite_reviewers = favorite_reviewers.data;\n          const favorite_users = new Array(favorite_reviewers.length)\n          if (favorite_reviewers && favorite_reviewers.length) {\n            this.favorite_reviewers = favorite_reviewers;\n            for (let i = 0; i < favorite_reviewers.length; i++) {\n              const favorite_user = await this.user_service.getUser(favorite_reviewers[i].favorite);\n              if (favorite_user.status == 200) {\n                this.favorite_user = favorite_user.data;\n                favorite_users[i] = favorite_user.data;\n              }\n \n            }\n            this.favorite_users = favorite_users;\n          }\n\n        }\n\n\n      } else {\n      //  this.getRoutePath('home', '');\n      }\n    } catch(e) {\n      console.error(e)\n      this.openLogin()\n    }\n  }\n\n  surveyLocalRestaurantChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyLocalRestaurant = place.place_id\n    }\n  }\n\n  openLogin() {\n    if (!(this.$refs['signup'] as any).isOpen()) {\n      (this.$refs['login'] as any).showModal();\n    }\n  }\n\n  onLogin() {\n    this.flash('You have logged in successfully', 'success', {timeout: 3000});\n    location.reload();\n  }\n  onSignup() {\n    this.flash('You have signed up successfully', 'success', {timeout: 3000});\n    location.reload();\n  }\n  openSignup() {\n    (this.$refs['signup'] as any).showModal();\n  }\n  surveyPizzaPlaceChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyPizzaPlace = place.place_id\n    }\n  }\n\n  surveyCoffeeChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyCoffee = place.place_id\n    }\n  }\n\n  surveyBreakfastPlaceChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyBreakfastPlace = place.place_id\n    }\n  }\n\n  surveyMexicanRestaurantChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyMexicanRestaurant = place.place_id\n    }\n  }\n\n  imageUrlAlt(event: any) {\n    event.target.src = require(\"@/assets/images/no-photo-avatar.png\");\n  }\n\n  showModal() {\n    (this.$refs['modal-edit-profile'] as any).show();\n  }\n\n  hideModal() {\n    (this.$refs['modal-edit-profile'] as any).hide();\n  }\n\n\n  skipSurvey() {\n    this.step = 4\n  }\n  async purchaseReview(review_id: string) {\n    const spinner=document.getElementById('purchase-spinner-' + review_id) as HTMLElement;\n    const button=document.getElementById('purchase-button-' + review_id) as HTMLElement;\n    if(this.checkUserWallet()){\n      spinner.classList.remove('d-none');\n      button.classList.add('d-none')\n      const res = await this.reviews_ser.buyReview(review_id)\n      if (res.status == 200) {\n        this.flash('Successfully purchased review in tx '+res.data.paymentTx, 'success', {timeout: 5000});\n      } else if (res.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        this.flash('Failed to purchase review', 'error', {timeout: 5000})\n      }\n      spinner.classList.add('d-none')\n      await this.allUserReviews()\n    }\n  }\n\n  async loadFavoriteLocations() {\n    if (this.profile) {\n      let favorite_places = await this.favorites_ser.places(this.profile.id);\n\n      const favorite_locations = new Array(favorite_places.length)\n      if (favorite_places.status == 200) {\n        favorite_places = favorite_places.data;\n        if (favorite_places && favorite_places.length) {\n          this.favorite_places = favorite_places;\n          for (let i = 0; i < favorite_places.length; i++) {\n            const favorite_location = await this.place_ser.getPlace(favorite_places[i].favorite);\n            this.favorite_location = favorite_location;\n            favorite_locations[i] = favorite_location;\n          }\n\n          this.favorite_locations = favorite_locations;\n        }\n      }\n    }\n  }\n\n  async allUserReviews() {\n    this.reviews = [];\n    this.loadingReviews = true\n    const reviews = await this.reviews_ser.allUserReviews(this.profile!.id);\n    if (reviews.status == 200) {\n      this.reviews = reviews.data;\n      if (this.reviews != null) {\n        await this.loadReviewLocations()\n      }\n\n    }\n    this.loadingReviews = false\n  }\n\n  async loadReviewLocations() {\n    const revs = []\n    for (let i = 0; i < this.reviews.length; i++) {\n      const rev = this.reviews[i];\n      if (rev.placeID == null) {\n        continue\n      }\n      try {\n        const place = await this.place_ser.getPlace(rev.placeID)\n        rev.title = place.name\n        revs.push(rev)\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    this.reviews = revs\n    this.loadingReviews = false\n  }\n\n  async submitOnboardingSurvey() {\n    const surveyResponses = []\n    let response = {\n      question: \"\",\n      answer: \"\"\n    }\n    if (this.surveyLocalRestaurant != \"\") {\n      response = {\n        question: this.surveyLocalRestaurantQuestion,\n        answer: this.surveyLocalRestaurant\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyMexicanRestaurant != \"\") {\n      response = {\n        question: this.surveyMexicanRestaurantQuestion,\n        answer: this.surveyMexicanRestaurant\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyBreakfastPlace != \"\") {\n      response = {\n        question: this.surveyBreakfastPlaceQuestion,\n        answer: this.surveyBreakfastPlace\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyCoffee != \"\") {\n      response = {\n        question: this.surveyCoffeeQuestion,\n        answer: this.surveyCoffee\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyPizzaPlace != \"\") {\n      response = {\n        question: this.surveyPizzaPlaceQuestion,\n        answer: this.surveyPizzaPlace\n      }\n      surveyResponses.push(response)\n    }\n    if (this.profile == null) {\n      return\n    }\n    if (surveyResponses.length == 0) {\n      this.flash('Please include at least one survey response or skip the survey', 'error', {timeout: 10000})\n      return\n    }\n    this.onboardingSurvey = {\n      id: \"1\",\n      username: this.profile.id,\n      responses: surveyResponses\n    }\n\n    this.submittingSurvey = true\n\n    const survey_res = await this.survey_ser.postSurvey(this.onboardingSurvey)\n    if (survey_res.status == 200) {\n      this.flash('Successfully submitted survey response! You were paid ' + survey_res.data.totalEarnings + ' cents in transaction ' + survey_res.data.paymentTx, 'success', {timeout: 10000});\n      this.profile.earnings = survey_res.data.totalEarnings\n      this.submittingSurvey = false\n      this.loadFavoriteLocations()\n      this.step = 4\n    } else {\n      this.flash('Something went wrong', 'error', {timeout: 10000});\n      this.submittingSurvey = false\n    }\n\n  }\n\n  redirectToHC() {\n    if (this.profile != null) {\n      this.$cookies.set('username', this.profile.id)\n    }\n    window.location.href = 'https://app.handcash.io/#/authorizeApp?appId=' + HandcashAppID\n  }\n\n  generateState() {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    for (let i = 0; i < 10; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n\n  getRoutePath(name: string, parameters: any) {\n    return this.$router.push({name: name, params: parameters});\n  }\n\n  async upvote(review_id: string, e: any) {\n    e.preventDefault();\n    if (this.checkUserWallet()) {\n      const spinner=document.getElementById('upvote-spinner-' + review_id) as HTMLElement;\n      const upvoteElement=document.getElementById('upvote-' + review_id) as HTMLElement;\n      const upvoteIcon=document.getElementById('upvote-icon-' + review_id) as HTMLElement;\n      spinner.classList.remove('d-none');\n      upvoteElement.classList.add('d-none');\n      upvoteIcon.classList.add('d-none');\n      const res = await this.reviews_ser.upvoteReview(this.currentUser!.id, review_id);\n      spinner.classList.add('d-none');\n      upvoteElement.classList.remove('d-none');\n      upvoteIcon.classList.remove('d-none');\n      if (res.status == 200) {\n        const upvoteResult = res.data\n        const vote = document.getElementById('upvote-' + review_id)!.textContent;\n        document.getElementById('upvote-' + review_id)!.innerHTML = (parseInt(vote!) + 1).toString();\n        this.flash('Successfully upvoted review', 'success', {timeout: 5000})\n      } else if(res.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        const msg = res.data.message\n        if (typeof msg != 'undefined') {\n          this.flash(msg, 'error', {timeout: 5000})\n        }\n      }\n    }\n\n  }\n\n  async downvote(review_id: string, e: any) {\n    e.preventDefault();\n    if (this.checkUserWallet()) {\n      const spinner=document.getElementById('downvote-spinner-' + review_id) as HTMLElement;\n      const downvoteElement=document.getElementById('downvote-' + review_id) as HTMLElement;\n      const downvoteIcon=document.getElementById('downvote-icon-' + review_id) as HTMLElement;\n      spinner.classList.remove('d-none');\n      downvoteElement.classList.add('d-none');\n      downvoteIcon.classList.add('d-none');\n      const res = await this.reviews_ser.downReview(this.profile!.id, review_id);\n      spinner.classList.add('d-none');\n      downvoteElement.classList.remove('d-none');\n      downvoteIcon.classList.remove('d-none');\n      if (res.status == 200) {\n        const vote = document.getElementById('downvote-' + review_id)!.textContent;\n        document.getElementById('downvote-' + review_id)!.innerHTML = (parseInt(vote!) - 1).toString();\n        this.flash('Successfully downvoted review', 'success', {timeout: 5000})\n      } else if(res.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        const msg = res.data.message\n        if (typeof msg != 'undefined') {\n          this.flash(msg, 'error', {timeout: 5000})\n        }\n      }\n    }\n  }\n\n  async uploadProfilePicture(event: any) {\n    // Reference to the DOM input element\n    const input = event.target;\n    if (input.files && input.files[0]) {\n      const fileType = input.files[0][\"type\"];\n      const validImageTypes = [\"image/jpg\", \"image/gif\", \"image/jpeg\", \"image/png\"];\n      if (validImageTypes.includes(fileType)) {\n        const photo = event.target.files[0] as File;\n        const upload_user_photo = await this.user_service.uploadUserPhoto(photo, this.profile!.id);\n        if (upload_user_photo) {\n          this.userPhotoLoading = true;\n          await this.user_service.updateUserLocalStorage(this.profile!.id);\n          this.flash('Updated profile picture', 'success', {timeout: 5000});\n          this.userPhotoLoading = false;\n          location.reload();\n        }\n      } else {\n        this.flash('Please try to upload a valid image', 'error', {timeout: 5000});\n      }\n    }\n  }\n\n  showMoreReviews() {\n    this.showReviews += 6;\n  }\n\n  async tokenExpired() {\n    await this.user_service.logout();\n    this.$router.push({name: \"home\"});\n  }\n\n  async deleteReview(review_id: string) {\n    if (this.checkUserWallet()) {\n      if (confirm('Are you sure you want to delete this review')) {\n        const deleteReview = await this.reviews_ser.deleteReview(review_id);\n        if (deleteReview.status == 200) {\n          this.allUserReviews();\n        } else {\n          this.flash('Failed to delete review', 'error', {timeout: 5000});\n        }\n      }\n    }\n\n  }\n\n  async editReview(place_id: string, place_name: string, review_id: string) {\n    if (this.checkUserWallet()) {\n      this.getRoutePath('new_review', {'place_id': place_id, 'place_name': place_name, 'review_id': review_id});\n    }\n  }\n\n  checkUserWallet() {\n    if (this.currentUser) {\n      if (this.currentUser.wallet) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      this.openLogin()\n    }\n  }\n\n  async getUserNotification() {\n    const x = await this.notification_service.getUserNotifications();\n    if (x.status == 200) {\n      this.notifications = x.data.notifications;\n    }\n  }\n\n  async clearNotifications() {\n    const x = await this.notification_service.clearUserNotifications();\n    if (x.status == 200) {\n      location.reload();\n      /*await this.getUserNotification();*/\n    }\n  }\n\n  async updateProfileForm(e: any) {\n\n    e.preventDefault();\n    let approved = true;\n    const email = document.getElementById('email') as HTMLInputElement;\n    //const password = document.getElementById('password') as HTMLInputElement;\n    const first_name = document.getElementById('first_name') as HTMLInputElement;\n    const last_name = document.getElementById('last_name') as HTMLInputElement;\n\n    if (email.value.length > 0) {\n      document.getElementById('email_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('email_error')!.classList.remove('d-none');\n      approved = false;\n    }\n    /*if (password.value.length > 0) {\n      document.getElementById('password_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('password_error')!.classList.remove('d-none');\n      approved = false;\n    }*/\n    if (first_name.value.length > 0) {\n      document.getElementById('first_name_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('first_name_error')!.classList.remove('d-none');\n      approved = false;\n    }\n    if (last_name.value.length > 0) {\n      document.getElementById('last_name_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('last_name_error')!.classList.remove('d-none');\n      approved = false;\n    }\n\n    if (approved) {\n      const update_profile = await this.user_service.updateProfile(this.profile!);\n      if (update_profile.status == 200) {\n        this.flash('Your profile has been updated successfully', 'success', {timeout: 3000});\n      }\n    }\n\n  }\n\n  openReviewImageModel(review_photos: any) {\n    this.reviewPhotos = review_photos;\n    this.mainReviewImageModel = review_photos[0].url;\n    this.showReviewImageModal = !this.showReviewImageModal;\n\n  }\n\n  changeShowReviewImageModal() {\n    this.showReviewImageModal = false;\n  }\n}\n"],"sourceRoot":""}]}