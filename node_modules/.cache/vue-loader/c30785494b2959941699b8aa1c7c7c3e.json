{"remainingRequest":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cmurray/britevue-frontend/src/views/Dashboard/Profile/Profile.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cmurray/britevue-frontend/src/views/Dashboard/Profile/Profile.vue","mtime":1628691920058},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7VnVlLCBDb21wb25lbnQsIEluamVjdH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7SVJldmlld30gZnJvbSAiQC9pbnRlcmZhY2VzL0lSZXZpZXciOwppbXBvcnQge0lOb3RpZmljYXRpb259IGZyb20gIkAvaW50ZXJmYWNlcy9JTm90aWZpY2F0aW9uIjsKaW1wb3J0IHtJU3VydmV5fSBmcm9tICJAL2ludGVyZmFjZXMvSVN1cnZleSI7CmltcG9ydCB7SVVzZXJ9IGZyb20gIkAvaW50ZXJmYWNlcy9JVXNlciI7CmltcG9ydCB7SVBsYWNlfSBmcm9tICJAL2ludGVyZmFjZXMvSVBsYWNlIjsKaW1wb3J0IHtJRmF2b3JpdGV9IGZyb20gIkAvaW50ZXJmYWNlcy9JRmF2b3JpdGUiOwppbXBvcnQge1Jldmlld3NTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL1Jldmlld3NTZXJ2aWNlIjsKaW1wb3J0IHtGYXZvcml0ZXNTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL0Zhdm9yaXRlc1NlcnZpY2UiOwppbXBvcnQge1VzZXJTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL1VzZXJTZXJ2aWNlIjsKaW1wb3J0IHtQbGFjZVNlcnZpY2V9IGZyb20gIkAvc2VydmljZXMvUGxhY2VTZXJ2aWNlIjsKaW1wb3J0IHtHb29nbGVTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL0dvb2dsZVNlcnZpY2UiOwppbXBvcnQge1N1cnZleVNlcnZpY2V9IGZyb20gIkAvc2VydmljZXMvU3VydmV5U2VydmljZSI7CmltcG9ydCBMb2dpbiBmcm9tICJAL2NvbXBvbmVudHMvTG9naW4vTG9naW4udnVlIjsKaW1wb3J0IFNpZ251cCBmcm9tICJAL2NvbXBvbmVudHMvU2lnbnVwL1NpZ251cC52dWUiOwppbXBvcnQgTW9kYWwgZnJvbSAiQC9jb21wb25lbnRzL01vZGFsL01vZGFsLnZ1ZSI7CmltcG9ydCBWdWVHb29nbGVBdXRvY29tcGxldGUgZnJvbSAidnVlLWdvb2dsZS1hdXRvY29tcGxldGUiCmltcG9ydCAiLi9IYW5kY2FzaC5jc3MiOwppbXBvcnQge05vdGlmaWNhdGlvbnNTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL05vdGZpY2F0aW9uc1NlcnZpY2UiOwppbXBvcnQgUmV2aWV3SW1hZ2VNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvSW1hZ2VNb2RhbC9SZXZpZXdJbWFnZU1vZGFsLnZ1ZSI7Cgpjb25zdCBIYW5kY2FzaEFwcElEID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9IQ19BUFBfSUQKY29uc3QgTW9uZXlidXR0b25BcHBJRCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfTUJfQVBQX0lECmNvbnN0IE1vbmV5YnV0dG9uUmVkaXJlY3RVUkkgPSBwcm9jZXNzLmVudi5WVUVfQVBQX01CX1JFRElSRUNUX1VSSQpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBMb2dpbiwKICAgIFNpZ251cCwKICAgIE1vZGFsLAogICAgVnVlR29vZ2xlQXV0b2NvbXBsZXRlLAogICAgUmV2aWV3SW1hZ2VNb2RhbAogIH0sCiAgbWV0YUluZm86ewogICAgdGl0bGU6ICJCcml0ZXZ1ZSAtIEJsb2NrY2hhaW4gdmVyaWZpZWQgcmV2aWV3cyB3aGVyZSByZXZpZXdlcnMgZ2V0IHBhaWQiLAogICAgbWV0YTogWwogICAgICB7IG5hbWU6J3RpdGxlJyxjb250ZW50OidCcml0ZXZ1ZSAtIEJsb2NrY2hhaW4gdmVyaWZpZWQgcmV2aWV3cyB3aGVyZSByZXZpZXdlcnMgZ2V0IHBhaWQnfSwKICAgICAgeyBuYW1lOiAnZGVzY3JpcHRpb24nLCBjb250ZW50OiAgJ0JlZ2luIGVhcm5pbmcgbW9uZXkgZm9yIHlvdXIgcmV2aWV3cyBvZiBidXNpbmVzc2VzIGFuZCBwbGFjZXMgd2l0aCBCcml0ZXZ1ZS4gV2Ugd2lsbCBwYXkgeW91IGZvciBpbmZvcm1hdGlvbiBhYm91dCB5b3VyIGhvbWV0b3duIHRvIGdldCBzdGFydGVkISd9LAogICAgICB7IGl0ZW1wcm9wOiAnbmFtZScsIGNvbnRlbnQ6ICJCcml0ZXZ1ZSJ9LAogICAgICB7IGl0ZW1wcm9wOiAnZGVzY3JpcHRpb24nLCBjb250ZW50OiAiQmVnaW4gZWFybmluZyBtb25leSBmb3IgeW91ciByZXZpZXdzIG9mIGJ1c2luZXNzZXMgYW5kIHBsYWNlcyB3aXRoIEJyaXRldnVlLiBXZSB3aWxsIHBheSB5b3UgZm9yIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgaG9tZXRvd24gdG8gZ2V0IHN0YXJ0ZWQhIn0sCiAgICAgIHsgaXRlbXByb3A6ICdpbWFnZScsIGNvbnRlbnQ6ICByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKX0sCiAgICAgIHsgcHJvcGVydHk6ICdvZzp0eXBlJywgY29udGVudDogIndlYnNpdGUifSwKICAgICAgeyBwcm9wZXJ0eTogJ29nOnVybCcsIGNvbnRlbnQ6ICJodHRwczovL2JyaXRldnVlLmNvbS8ifSwKICAgICAgeyBwcm9wZXJ0eTogJ29nOnRpdGxlJywgY29udGVudDogIkJyaXRldnVlIC0gQmxvY2tjaGFpbiB2ZXJpZmllZCByZXZpZXdzIHdoZXJlIHJldmlld2VycyBnZXQgcGFpZCJ9LAogICAgICB7IHByb3BlcnR5OiAnb2c6ZGVzY3JpcHRpb24nLCBjb250ZW50OiAiQmVnaW4gZWFybmluZyBtb25leSBmb3IgeW91ciByZXZpZXdzIG9mIGJ1c2luZXNzZXMgYW5kIHBsYWNlcyB3aXRoIEJyaXRldnVlLiBXZSB3aWxsIHBheSB5b3UgZm9yIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgaG9tZXRvd24gdG8gZ2V0IHN0YXJ0ZWQhIn0sCiAgICAgIHsgcHJvcGVydHk6ICdvZzppbWFnZScsIGNvbnRlbnQ6ICByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKX0sCiAgICAgIHsgcHJvcGVydHk6ICdvZzpzaXRlX25hbWUnLCBjb250ZW50OiAnYnJpdGV2dWUnfSwKICAgICAgeyBuYW1lOiAndHdpdHRlcjpjYXJkJywgY29udGVudDogInN1bW1hcnlfbGFyZ2VfaW1hZ2UifSwKICAgICAgeyBuYW1lOiAndHdpdHRlcjp1cmwnLCBjb250ZW50OiAiaHR0cHM6Ly9icml0ZXZ1ZS5jb20vIn0sCiAgICAgIHsgbmFtZTogJ3R3aXR0ZXI6dGl0bGUnLCBjb250ZW50OiAiQnJpdGV2dWUgLSBCbG9ja2NoYWluIHZlcmlmaWVkIHJldmlld3Mgd2hlcmUgcmV2aWV3ZXJzIGdldCBwYWlkIn0sCiAgICAgIHsgbmFtZTogJ3R3aXR0ZXI6ZGVzY3JpcHRpb24nLCBjb250ZW50OiAiQmVnaW4gZWFybmluZyBtb25leSBmb3IgeW91ciByZXZpZXdzIG9mIGJ1c2luZXNzZXMgYW5kIHBsYWNlcyB3aXRoIEJyaXRldnVlLiBXZSB3aWxsIHBheSB5b3UgZm9yIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgaG9tZXRvd24gdG8gZ2V0IHN0YXJ0ZWQhIn0sCiAgICAgIHsgbmFtZTogJ3R3aXR0ZXI6aW1hZ2UnLCBjb250ZW50OiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKSB9LAogICAgXQogIH0KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZSBleHRlbmRzIFZ1ZSB7CiAgQEluamVjdCgndXNlclNlcnZpY2UnKQogIHVzZXJfc2VydmljZSE6IFVzZXJTZXJ2aWNlOwoKICBsb2FkaW5nUmV2aWV3cyA9IGZhbHNlCiAgc3RlcDogbnVtYmVyOwogIHByb2ZpbGU6IElVc2VyIHwgbnVsbCA9IG51bGw7CiAgcHJvZmlsZV9pZCE6IHN0cmluZzsKICBjdXJyZW50VXNlcjogSVVzZXIgfCBudWxsID0gbnVsbDsKICBub3RpZmljYXRpb25zOiBJTm90aWZpY2F0aW9uW10gPSBbXTsKICBmYXZvcml0ZV9yZXZpZXdlcnM6IElGYXZvcml0ZVtdID0gW107CiAgZmF2b3JpdGVfcGxhY2VzOiBJRmF2b3JpdGVbXSA9IFtdOwogIGZhdm9yaXRlX3VzZXIhOiBJVXNlcjsKICBmYXZvcml0ZV91c2VyczogSVVzZXJbXSA9IFtdOwogIGZhdm9yaXRlX2xvY2F0aW9uITogSVBsYWNlOwogIGZhdm9yaXRlX2xvY2F0aW9uczogSVBsYWNlW10gPSBbXTsKICByZXZpZXdzOiBJUmV2aWV3W10gPSBbXTsKICBASW5qZWN0KCdyZXZpZXdzU2VydmljZScpCiAgcmV2aWV3c19zZXIhOiBSZXZpZXdzU2VydmljZTsKCiAgQEluamVjdCgncGxhY2VTZXJ2aWNlJykKICBwbGFjZV9zZXIhOiBQbGFjZVNlcnZpY2U7CgogIEBJbmplY3QoJ2Zhdm9yaXRlc1NlcnZpY2UnKQogIGZhdm9yaXRlc19zZXIhOiBGYXZvcml0ZXNTZXJ2aWNlOwoKICBASW5qZWN0KCdnb29nbGVTZXJ2aWNlJykKICBnb29nbGVfc2VyITogR29vZ2xlU2VydmljZTsKICBzaG93UmV2aWV3czogbnVtYmVyOwoKICBASW5qZWN0KCdzdXJ2ZXlTZXJ2aWNlJykKICBzdXJ2ZXlfc2VyITogU3VydmV5U2VydmljZTsKCiAgQEluamVjdCgnbm90aWZpY2F0aW9uc1NlcnZpY2UnKQogIG5vdGlmaWNhdGlvbl9zZXJ2aWNlITogTm90aWZpY2F0aW9uc1NlcnZpY2U7CgogIC8vIE9uYm9hcmRpbmcgc3VydmV5IHZhcnMKICBzdXJ2ZXlMb2NhbFJlc3RhdXJhbnRRdWVzdGlvbjogc3RyaW5nOwogIHN1cnZleUxvY2FsUmVzdGF1cmFudDogc3RyaW5nOwogIHN1cnZleU1leGljYW5SZXN0YXVyYW50UXVlc3Rpb246IHN0cmluZzsKICBzdXJ2ZXlNZXhpY2FuUmVzdGF1cmFudDogc3RyaW5nOwogIHN1cnZleVBpenphUGxhY2VRdWVzdGlvbjogc3RyaW5nOwogIHN1cnZleVBpenphUGxhY2U6IHN0cmluZzsKICBzdXJ2ZXlCcmVha2Zhc3RQbGFjZVF1ZXN0aW9uOiBzdHJpbmc7CiAgc3VydmV5QnJlYWtmYXN0UGxhY2U6IHN0cmluZzsKICBzdXJ2ZXlDb2ZmZWVRdWVzdGlvbjogc3RyaW5nOwogIHN1cnZleUNvZmZlZTogc3RyaW5nOwoKICBvbmJvYXJkaW5nU3VydmV5ITogSVN1cnZleTsKICBmbGFzaDogYW55OwogIHVzZXJQaG90b0xvYWRpbmc6IGJvb2xlYW47CiAgc3VibWl0dGluZ1N1cnZleTogYm9vbGVhbjsKICByZXZpZXdQaG90b3M6IFtdOwogIHNob3dSZXZpZXdJbWFnZU1vZGFsOiBib29sZWFuOwogIG1haW5SZXZpZXdJbWFnZU1vZGVsOiBzdHJpbmc7CgogIHNob3dIYW5kY2FzaE1vZGFsOiBib29sZWFuOwoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgICBpZiAodHlwZW9mIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPSAndW5kZWZpbmVkJykgewogICAgICB0aGlzLnByb2ZpbGVfaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB9IGVsc2UgewogICAgIC8vIHRoaXMuZ2V0Um91dGVQYXRoKCdob21lJywgJycpOwogICAgfQogICAgdGhpcy5zdGVwID0gMjsKICAgIHRoaXMuc2hvd1Jldmlld3MgPSA2OwogICAgLy8gb25ib2FyZGluZyBzdXJ2ZXkKICAgIHRoaXMuc3VibWl0dGluZ1N1cnZleSA9IGZhbHNlOwogICAgdGhpcy5zdXJ2ZXlMb2NhbFJlc3RhdXJhbnRRdWVzdGlvbiA9ICJXaGF0J3MgeW91ciBmYXZvcml0ZSByZXN0YXVyYW50PyI7CiAgICB0aGlzLnN1cnZleUxvY2FsUmVzdGF1cmFudCA9ICIiOwogICAgdGhpcy5zdXJ2ZXlNZXhpY2FuUmVzdGF1cmFudFF1ZXN0aW9uID0gIldoYXQncyB5b3VyIGZhdm9yaXRlIE1leGljYW4gcmVzdGF1cmFudD8iOwogICAgdGhpcy5zdXJ2ZXlNZXhpY2FuUmVzdGF1cmFudCA9ICIiOwogICAgdGhpcy5zdXJ2ZXlQaXp6YVBsYWNlUXVlc3Rpb24gPSAiV2hhdCdzIHlvdXIgZmF2b3JpdGUgcGl6emEgcGxhY2U/IjsKICAgIHRoaXMuc3VydmV5UGl6emFQbGFjZSA9ICIiOwogICAgdGhpcy5zdXJ2ZXlCcmVha2Zhc3RQbGFjZVF1ZXN0aW9uID0gIldoYXQncyB5b3VyIGZhdm9yaXRlIHBsYWNlIHRvIGdldCBicmVha2Zhc3Q/IjsKICAgIHRoaXMuc3VydmV5QnJlYWtmYXN0UGxhY2UgPSAiIjsKICAgIHRoaXMuc3VydmV5Q29mZmVlUXVlc3Rpb24gPSAiV2hhdCdzIHlvdXIgZmF2b3JpdGUgY29mZmVlIHNob3A/IjsKICAgIHRoaXMuc3VydmV5Q29mZmVlID0gIiI7CiAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBbXTsKICAgIHRoaXMuc2hvd0hhbmRjYXNoTW9kYWwgPSBmYWxzZTsKICAgIHRoaXMudXNlclBob3RvTG9hZGluZyA9IGZhbHNlOwogICAgdGhpcy5yZXZpZXdQaG90b3MgPSBbXTsKICAgIHRoaXMuc2hvd1Jldmlld0ltYWdlTW9kYWwgPSBmYWxzZTsKICAgIHRoaXMubWFpblJldmlld0ltYWdlTW9kZWwgPSAnJzsKICAgIGNvbnN0IHVzZXIgPSB0aGlzLnVzZXJfc2VydmljZS5nZXRDdXJyZW50VXNlcigpOwogICAgaWYgKHVzZXIpIHsKICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7CiAgICB9CiAgfQoKICBhc3luYyBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuICE9IG51bGwgJiYgdGhpcy4kcm91dGUucXVlcnkudXNlcm5hbWUgIT0gbnVsbCkgewogICAgICBjb25zdCB0b2tlbk9iaiA9IHsKICAgICAgICB1c2VybmFtZTogdGhpcy4kcm91dGUucXVlcnkudXNlcm5hbWUsCiAgICAgICAgdG9rZW46IHRoaXMuJHJvdXRlLnF1ZXJ5LnRva2VuLAogICAgICAgIGV4cGlyZXNfYXQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LmV4cGlyZXNfYXQKICAgICAgfQogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBKU09OLnN0cmluZ2lmeSh0b2tlbk9iaikpCiAgICAgIGF3YWl0IHRoaXMudXNlcl9zZXJ2aWNlLnVwZGF0ZVVzZXJMb2NhbFN0b3JhZ2UodGhpcy4kcm91dGUucXVlcnkudXNlcm5hbWUgYXMgc3RyaW5nKQogICAgfSBlbHNlIHsKICAgICAgYXdhaXQgdGhpcy51c2VyX3NlcnZpY2UudXBkYXRlVXNlckxvY2FsU3RvcmFnZSgiIik7CiAgICB9CgogICAgdHJ5IHsKICAgICAgY29uc3QgZmV0Y2hVc2VyID0gYXdhaXQgdGhpcy51c2VyX3NlcnZpY2UuZ2V0VXNlcih0aGlzLnByb2ZpbGVfaWQpOwogICAgICBpZiAoZmV0Y2hVc2VyLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICBhd2FpdCB0aGlzLmdldFVzZXJOb3RpZmljYXRpb24oKTsKICAgICAgICB0aGlzLnByb2ZpbGUgPSBmZXRjaFVzZXIuZGF0YTsKICAgICAgICBpZiAodGhpcy5wcm9maWxlIS53YWxsZXQgIT0gJycpIHsKICAgICAgICAgIHRoaXMuc3RlcCA9IDM7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnByb2ZpbGUhLm9uYm9hcmRpbmdTdXJ2ZXlEb25lID09IHRydWUpIHsKICAgICAgICAgIHRoaXMuc3RlcCA9IDQ7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmFsbFVzZXJSZXZpZXdzKCk7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRmF2b3JpdGVMb2NhdGlvbnMoKTsKCiAgICAgICAgbGV0IGZhdm9yaXRlX3Jldmlld2VycyA9IGF3YWl0IHRoaXMuZmF2b3JpdGVzX3Nlci5yZXZpZXdlcnModGhpcy5wcm9maWxlIS5pZCk7CiAgICAgICAgaWYgKGZhdm9yaXRlX3Jldmlld2Vycy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBmYXZvcml0ZV9yZXZpZXdlcnMgPSBmYXZvcml0ZV9yZXZpZXdlcnMuZGF0YTsKICAgICAgICAgIGNvbnN0IGZhdm9yaXRlX3VzZXJzID0gbmV3IEFycmF5KGZhdm9yaXRlX3Jldmlld2Vycy5sZW5ndGgpCiAgICAgICAgICBpZiAoZmF2b3JpdGVfcmV2aWV3ZXJzICYmIGZhdm9yaXRlX3Jldmlld2Vycy5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5mYXZvcml0ZV9yZXZpZXdlcnMgPSBmYXZvcml0ZV9yZXZpZXdlcnM7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmF2b3JpdGVfcmV2aWV3ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgY29uc3QgZmF2b3JpdGVfdXNlciA9IGF3YWl0IHRoaXMudXNlcl9zZXJ2aWNlLmdldFVzZXIoZmF2b3JpdGVfcmV2aWV3ZXJzW2ldLmZhdm9yaXRlKTsKICAgICAgICAgICAgICBpZiAoZmF2b3JpdGVfdXNlci5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmZhdm9yaXRlX3VzZXIgPSBmYXZvcml0ZV91c2VyLmRhdGE7CiAgICAgICAgICAgICAgICBmYXZvcml0ZV91c2Vyc1tpXSA9IGZhdm9yaXRlX3VzZXIuZGF0YTsKICAgICAgICAgICAgICB9CiAKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmZhdm9yaXRlX3VzZXJzID0gZmF2b3JpdGVfdXNlcnM7CiAgICAgICAgICB9CgogICAgICAgIH0KCgogICAgICB9IGVsc2UgewogICAgICAvLyAgdGhpcy5nZXRSb3V0ZVBhdGgoJ2hvbWUnLCAnJyk7CiAgICAgIH0KICAgIH0gY2F0Y2goZSkgewogICAgICBjb25zb2xlLmVycm9yKGUpCiAgICAgIHRoaXMub3BlbkxvZ2luKCkKICAgIH0KICB9CgogIHN1cnZleUxvY2FsUmVzdGF1cmFudENoYW5nZWQocmV0OiBhbnksIHBsYWNlOiBhbnksIGlkOiBhbnkpIHsKICAgIGlmICh0eXBlb2YgcGxhY2UucGxhY2VfaWQgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgdGhpcy5zdXJ2ZXlMb2NhbFJlc3RhdXJhbnQgPSBwbGFjZS5wbGFjZV9pZAogICAgfQogIH0KCiAgb3BlbkxvZ2luKCkgewogICAgaWYgKCEodGhpcy4kcmVmc1snc2lnbnVwJ10gYXMgYW55KS5pc09wZW4oKSkgewogICAgICAodGhpcy4kcmVmc1snbG9naW4nXSBhcyBhbnkpLnNob3dNb2RhbCgpOwogICAgfQogIH0KCiAgb25Mb2dpbigpIHsKICAgIHRoaXMuZmxhc2goJ1lvdSBoYXZlIGxvZ2dlZCBpbiBzdWNjZXNzZnVsbHknLCAnc3VjY2VzcycsIHt0aW1lb3V0OiAzMDAwfSk7CiAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICB9CiAgb25TaWdudXAoKSB7CiAgICB0aGlzLmZsYXNoKCdZb3UgaGF2ZSBzaWduZWQgdXAgc3VjY2Vzc2Z1bGx5JywgJ3N1Y2Nlc3MnLCB7dGltZW91dDogMzAwMH0pOwogICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgfQogIG9wZW5TaWdudXAoKSB7CiAgICAodGhpcy4kcmVmc1snc2lnbnVwJ10gYXMgYW55KS5zaG93TW9kYWwoKTsKICB9CiAgc3VydmV5UGl6emFQbGFjZUNoYW5nZWQocmV0OiBhbnksIHBsYWNlOiBhbnksIGlkOiBhbnkpIHsKICAgIGlmICh0eXBlb2YgcGxhY2UucGxhY2VfaWQgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgdGhpcy5zdXJ2ZXlQaXp6YVBsYWNlID0gcGxhY2UucGxhY2VfaWQKICAgIH0KICB9CgogIHN1cnZleUNvZmZlZUNoYW5nZWQocmV0OiBhbnksIHBsYWNlOiBhbnksIGlkOiBhbnkpIHsKICAgIGlmICh0eXBlb2YgcGxhY2UucGxhY2VfaWQgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgdGhpcy5zdXJ2ZXlDb2ZmZWUgPSBwbGFjZS5wbGFjZV9pZAogICAgfQogIH0KCiAgc3VydmV5QnJlYWtmYXN0UGxhY2VDaGFuZ2VkKHJldDogYW55LCBwbGFjZTogYW55LCBpZDogYW55KSB7CiAgICBpZiAodHlwZW9mIHBsYWNlLnBsYWNlX2lkICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgIHRoaXMuc3VydmV5QnJlYWtmYXN0UGxhY2UgPSBwbGFjZS5wbGFjZV9pZAogICAgfQogIH0KCiAgc3VydmV5TWV4aWNhblJlc3RhdXJhbnRDaGFuZ2VkKHJldDogYW55LCBwbGFjZTogYW55LCBpZDogYW55KSB7CiAgICBpZiAodHlwZW9mIHBsYWNlLnBsYWNlX2lkICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgIHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnQgPSBwbGFjZS5wbGFjZV9pZAogICAgfQogIH0KCiAgaW1hZ2VVcmxBbHQoZXZlbnQ6IGFueSkgewogICAgZXZlbnQudGFyZ2V0LnNyYyA9IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9uby1waG90by1hdmF0YXIucG5nIik7CiAgfQoKICBzaG93TW9kYWwoKSB7CiAgICAodGhpcy4kcmVmc1snbW9kYWwtZWRpdC1wcm9maWxlJ10gYXMgYW55KS5zaG93KCk7CiAgfQoKICBoaWRlTW9kYWwoKSB7CiAgICAodGhpcy4kcmVmc1snbW9kYWwtZWRpdC1wcm9maWxlJ10gYXMgYW55KS5oaWRlKCk7CiAgfQoKCiAgc2tpcFN1cnZleSgpIHsKICAgIHRoaXMuc3RlcCA9IDQKICB9CiAgYXN5bmMgcHVyY2hhc2VSZXZpZXcocmV2aWV3X2lkOiBzdHJpbmcpIHsKICAgIGNvbnN0IHNwaW5uZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1cmNoYXNlLXNwaW5uZXItJyArIHJldmlld19pZCkgYXMgSFRNTEVsZW1lbnQ7CiAgICBjb25zdCBidXR0b249ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B1cmNoYXNlLWJ1dHRvbi0nICsgcmV2aWV3X2lkKSBhcyBIVE1MRWxlbWVudDsKICAgIGlmKHRoaXMuY2hlY2tVc2VyV2FsbGV0KCkpewogICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnZC1ub25lJykKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXZpZXdzX3Nlci5idXlSZXZpZXcocmV2aWV3X2lkKQogICAgICBpZiAocmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLmZsYXNoKCdTdWNjZXNzZnVsbHkgcHVyY2hhc2VkIHJldmlldyBpbiB0eCAnK3Jlcy5kYXRhLnBheW1lbnRUeCwgJ3N1Y2Nlc3MnLCB7dGltZW91dDogNTAwMH0pOwogICAgICB9IGVsc2UgaWYgKHJlcy5zdGF0dXMgPT0gNTU1KSB7CiAgICAgICAgdGhpcy5zaG93SGFuZGNhc2hNb2RhbCA9IHRydWUKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZsYXNoKCdGYWlsZWQgdG8gcHVyY2hhc2UgcmV2aWV3JywgJ2Vycm9yJywge3RpbWVvdXQ6IDUwMDB9KQogICAgICB9CiAgICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZCgnZC1ub25lJykKICAgICAgYXdhaXQgdGhpcy5hbGxVc2VyUmV2aWV3cygpCiAgICB9CiAgfQoKICBhc3luYyBsb2FkRmF2b3JpdGVMb2NhdGlvbnMoKSB7CiAgICBpZiAodGhpcy5wcm9maWxlKSB7CiAgICAgIGxldCBmYXZvcml0ZV9wbGFjZXMgPSBhd2FpdCB0aGlzLmZhdm9yaXRlc19zZXIucGxhY2VzKHRoaXMucHJvZmlsZS5pZCk7CgogICAgICBjb25zdCBmYXZvcml0ZV9sb2NhdGlvbnMgPSBuZXcgQXJyYXkoZmF2b3JpdGVfcGxhY2VzLmxlbmd0aCkKICAgICAgaWYgKGZhdm9yaXRlX3BsYWNlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgZmF2b3JpdGVfcGxhY2VzID0gZmF2b3JpdGVfcGxhY2VzLmRhdGE7CiAgICAgICAgaWYgKGZhdm9yaXRlX3BsYWNlcyAmJiBmYXZvcml0ZV9wbGFjZXMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLmZhdm9yaXRlX3BsYWNlcyA9IGZhdm9yaXRlX3BsYWNlczsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmF2b3JpdGVfcGxhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGZhdm9yaXRlX2xvY2F0aW9uID0gYXdhaXQgdGhpcy5wbGFjZV9zZXIuZ2V0UGxhY2UoZmF2b3JpdGVfcGxhY2VzW2ldLmZhdm9yaXRlKTsKICAgICAgICAgICAgdGhpcy5mYXZvcml0ZV9sb2NhdGlvbiA9IGZhdm9yaXRlX2xvY2F0aW9uOwogICAgICAgICAgICBmYXZvcml0ZV9sb2NhdGlvbnNbaV0gPSBmYXZvcml0ZV9sb2NhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmZhdm9yaXRlX2xvY2F0aW9ucyA9IGZhdm9yaXRlX2xvY2F0aW9uczsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGFzeW5jIGFsbFVzZXJSZXZpZXdzKCkgewogICAgdGhpcy5yZXZpZXdzID0gW107CiAgICB0aGlzLmxvYWRpbmdSZXZpZXdzID0gdHJ1ZQogICAgY29uc3QgcmV2aWV3cyA9IGF3YWl0IHRoaXMucmV2aWV3c19zZXIuYWxsVXNlclJldmlld3ModGhpcy5wcm9maWxlIS5pZCk7CiAgICBpZiAocmV2aWV3cy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgIHRoaXMucmV2aWV3cyA9IHJldmlld3MuZGF0YTsKICAgICAgaWYgKHRoaXMucmV2aWV3cyAhPSBudWxsKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkUmV2aWV3TG9jYXRpb25zKCkKICAgICAgfQoKICAgIH0KICAgIHRoaXMubG9hZGluZ1Jldmlld3MgPSBmYWxzZQogIH0KCiAgYXN5bmMgbG9hZFJldmlld0xvY2F0aW9ucygpIHsKICAgIGNvbnN0IHJldnMgPSBbXQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJldmlld3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgcmV2ID0gdGhpcy5yZXZpZXdzW2ldOwogICAgICBpZiAocmV2LnBsYWNlSUQgPT0gbnVsbCkgewogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBwbGFjZSA9IGF3YWl0IHRoaXMucGxhY2Vfc2VyLmdldFBsYWNlKHJldi5wbGFjZUlEKQogICAgICAgIHJldi50aXRsZSA9IHBsYWNlLm5hbWUKICAgICAgICByZXZzLnB1c2gocmV2KQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgfQogICAgfQogICAgdGhpcy5yZXZpZXdzID0gcmV2cwogICAgdGhpcy5sb2FkaW5nUmV2aWV3cyA9IGZhbHNlCiAgfQoKICBhc3luYyBzdWJtaXRPbmJvYXJkaW5nU3VydmV5KCkgewogICAgY29uc3Qgc3VydmV5UmVzcG9uc2VzID0gW10KICAgIGxldCByZXNwb25zZSA9IHsKICAgICAgcXVlc3Rpb246ICIiLAogICAgICBhbnN3ZXI6ICIiCiAgICB9CiAgICBpZiAodGhpcy5zdXJ2ZXlMb2NhbFJlc3RhdXJhbnQgIT0gIiIpIHsKICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgcXVlc3Rpb246IHRoaXMuc3VydmV5TG9jYWxSZXN0YXVyYW50UXVlc3Rpb24sCiAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleUxvY2FsUmVzdGF1cmFudAogICAgICB9CiAgICAgIHN1cnZleVJlc3BvbnNlcy5wdXNoKHJlc3BvbnNlKQogICAgfQogICAgaWYgKHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnQgIT0gIiIpIHsKICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgcXVlc3Rpb246IHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnRRdWVzdGlvbiwKICAgICAgICBhbnN3ZXI6IHRoaXMuc3VydmV5TWV4aWNhblJlc3RhdXJhbnQKICAgICAgfQogICAgICBzdXJ2ZXlSZXNwb25zZXMucHVzaChyZXNwb25zZSkKICAgIH0KICAgIGlmICh0aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlICE9ICIiKSB7CiAgICAgIHJlc3BvbnNlID0gewogICAgICAgIHF1ZXN0aW9uOiB0aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlUXVlc3Rpb24sCiAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleUJyZWFrZmFzdFBsYWNlCiAgICAgIH0KICAgICAgc3VydmV5UmVzcG9uc2VzLnB1c2gocmVzcG9uc2UpCiAgICB9CiAgICBpZiAodGhpcy5zdXJ2ZXlDb2ZmZWUgIT0gIiIpIHsKICAgICAgcmVzcG9uc2UgPSB7CiAgICAgICAgcXVlc3Rpb246IHRoaXMuc3VydmV5Q29mZmVlUXVlc3Rpb24sCiAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleUNvZmZlZQogICAgICB9CiAgICAgIHN1cnZleVJlc3BvbnNlcy5wdXNoKHJlc3BvbnNlKQogICAgfQogICAgaWYgKHRoaXMuc3VydmV5UGl6emFQbGFjZSAhPSAiIikgewogICAgICByZXNwb25zZSA9IHsKICAgICAgICBxdWVzdGlvbjogdGhpcy5zdXJ2ZXlQaXp6YVBsYWNlUXVlc3Rpb24sCiAgICAgICAgYW5zd2VyOiB0aGlzLnN1cnZleVBpenphUGxhY2UKICAgICAgfQogICAgICBzdXJ2ZXlSZXNwb25zZXMucHVzaChyZXNwb25zZSkKICAgIH0KICAgIGlmICh0aGlzLnByb2ZpbGUgPT0gbnVsbCkgewogICAgICByZXR1cm4KICAgIH0KICAgIGlmIChzdXJ2ZXlSZXNwb25zZXMubGVuZ3RoID09IDApIHsKICAgICAgdGhpcy5mbGFzaCgnUGxlYXNlIGluY2x1ZGUgYXQgbGVhc3Qgb25lIHN1cnZleSByZXNwb25zZSBvciBza2lwIHRoZSBzdXJ2ZXknLCAnZXJyb3InLCB7dGltZW91dDogMTAwMDB9KQogICAgICByZXR1cm4KICAgIH0KICAgIHRoaXMub25ib2FyZGluZ1N1cnZleSA9IHsKICAgICAgaWQ6ICIxIiwKICAgICAgdXNlcm5hbWU6IHRoaXMucHJvZmlsZS5pZCwKICAgICAgcmVzcG9uc2VzOiBzdXJ2ZXlSZXNwb25zZXMKICAgIH0KCiAgICB0aGlzLnN1Ym1pdHRpbmdTdXJ2ZXkgPSB0cnVlCgogICAgY29uc3Qgc3VydmV5X3JlcyA9IGF3YWl0IHRoaXMuc3VydmV5X3Nlci5wb3N0U3VydmV5KHRoaXMub25ib2FyZGluZ1N1cnZleSkKICAgIGlmIChzdXJ2ZXlfcmVzLnN0YXR1cyA9PSAyMDApIHsKICAgICAgdGhpcy5mbGFzaCgnU3VjY2Vzc2Z1bGx5IHN1Ym1pdHRlZCBzdXJ2ZXkgcmVzcG9uc2UhIFlvdSB3ZXJlIHBhaWQgJyArIHN1cnZleV9yZXMuZGF0YS50b3RhbEVhcm5pbmdzICsgJyBjZW50cyBpbiB0cmFuc2FjdGlvbiAnICsgc3VydmV5X3Jlcy5kYXRhLnBheW1lbnRUeCwgJ3N1Y2Nlc3MnLCB7dGltZW91dDogMTAwMDB9KTsKICAgICAgdGhpcy5wcm9maWxlLmVhcm5pbmdzID0gc3VydmV5X3Jlcy5kYXRhLnRvdGFsRWFybmluZ3MKICAgICAgdGhpcy5zdWJtaXR0aW5nU3VydmV5ID0gZmFsc2UKICAgICAgdGhpcy5sb2FkRmF2b3JpdGVMb2NhdGlvbnMoKQogICAgICB0aGlzLnN0ZXAgPSA0CiAgICB9IGVsc2UgewogICAgICB0aGlzLmZsYXNoKCdTb21ldGhpbmcgd2VudCB3cm9uZycsICdlcnJvcicsIHt0aW1lb3V0OiAxMDAwMH0pOwogICAgICB0aGlzLnN1Ym1pdHRpbmdTdXJ2ZXkgPSBmYWxzZQogICAgfQoKICB9CgogIHJlZGlyZWN0VG9IQygpIHsKICAgIGlmICh0aGlzLnByb2ZpbGUgIT0gbnVsbCkgewogICAgICB0aGlzLiRjb29raWVzLnNldCgndXNlcm5hbWUnLCB0aGlzLnByb2ZpbGUuaWQpCiAgICB9CiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdodHRwczovL2FwcC5oYW5kY2FzaC5pby8jL2F1dGhvcml6ZUFwcD9hcHBJZD0nICsgSGFuZGNhc2hBcHBJRAogIH0KCiAgZ2VuZXJhdGVTdGF0ZSgpIHsKICAgIGxldCByZXN1bHQgPSAnJzsKICAgIGNvbnN0IGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknOwogICAgY29uc3QgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZ2V0Um91dGVQYXRoKG5hbWU6IHN0cmluZywgcGFyYW1ldGVyczogYW55KSB7CiAgICByZXR1cm4gdGhpcy4kcm91dGVyLnB1c2goe25hbWU6IG5hbWUsIHBhcmFtczogcGFyYW1ldGVyc30pOwogIH0KCiAgYXN5bmMgdXB2b3RlKHJldmlld19pZDogc3RyaW5nLCBlOiBhbnkpIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGlmICh0aGlzLmNoZWNrVXNlcldhbGxldCgpKSB7CiAgICAgIGNvbnN0IHNwaW5uZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vwdm90ZS1zcGlubmVyLScgKyByZXZpZXdfaWQpIGFzIEhUTUxFbGVtZW50OwogICAgICBjb25zdCB1cHZvdGVFbGVtZW50PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cHZvdGUtJyArIHJldmlld19pZCkgYXMgSFRNTEVsZW1lbnQ7CiAgICAgIGNvbnN0IHVwdm90ZUljb249ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vwdm90ZS1pY29uLScgKyByZXZpZXdfaWQpIGFzIEhUTUxFbGVtZW50OwogICAgICBzcGlubmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICB1cHZvdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICB1cHZvdGVJY29uLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJldmlld3Nfc2VyLnVwdm90ZVJldmlldyh0aGlzLmN1cnJlbnRVc2VyIS5pZCwgcmV2aWV3X2lkKTsKICAgICAgc3Bpbm5lci5jbGFzc0xpc3QuYWRkKCdkLW5vbmUnKTsKICAgICAgdXB2b3RlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgdXB2b3RlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgY29uc3QgdXB2b3RlUmVzdWx0ID0gcmVzLmRhdGEKICAgICAgICBjb25zdCB2b3RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vwdm90ZS0nICsgcmV2aWV3X2lkKSEudGV4dENvbnRlbnQ7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vwdm90ZS0nICsgcmV2aWV3X2lkKSEuaW5uZXJIVE1MID0gKHBhcnNlSW50KHZvdGUhKSArIDEpLnRvU3RyaW5nKCk7CiAgICAgICAgdGhpcy5mbGFzaCgnU3VjY2Vzc2Z1bGx5IHVwdm90ZWQgcmV2aWV3JywgJ3N1Y2Nlc3MnLCB7dGltZW91dDogNTAwMH0pCiAgICAgIH0gZWxzZSBpZihyZXMuc3RhdHVzID09IDU1NSkgewogICAgICAgIHRoaXMuc2hvd0hhbmRjYXNoTW9kYWwgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgbXNnID0gcmVzLmRhdGEubWVzc2FnZQogICAgICAgIGlmICh0eXBlb2YgbXNnICE9ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICB0aGlzLmZsYXNoKG1zZywgJ2Vycm9yJywge3RpbWVvdXQ6IDUwMDB9KQogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGFzeW5jIGRvd252b3RlKHJldmlld19pZDogc3RyaW5nLCBlOiBhbnkpIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGlmICh0aGlzLmNoZWNrVXNlcldhbGxldCgpKSB7CiAgICAgIGNvbnN0IHNwaW5uZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd252b3RlLXNwaW5uZXItJyArIHJldmlld19pZCkgYXMgSFRNTEVsZW1lbnQ7CiAgICAgIGNvbnN0IGRvd252b3RlRWxlbWVudD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bnZvdGUtJyArIHJldmlld19pZCkgYXMgSFRNTEVsZW1lbnQ7CiAgICAgIGNvbnN0IGRvd252b3RlSWNvbj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bnZvdGUtaWNvbi0nICsgcmV2aWV3X2lkKSBhcyBIVE1MRWxlbWVudDsKICAgICAgc3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgZG93bnZvdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICBkb3dudm90ZUljb24uY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmV2aWV3c19zZXIuZG93blJldmlldyh0aGlzLnByb2ZpbGUhLmlkLCByZXZpZXdfaWQpOwogICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgICBkb3dudm90ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7CiAgICAgIGRvd252b3RlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgY29uc3Qgdm90ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3dudm90ZS0nICsgcmV2aWV3X2lkKSEudGV4dENvbnRlbnQ7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rvd252b3RlLScgKyByZXZpZXdfaWQpIS5pbm5lckhUTUwgPSAocGFyc2VJbnQodm90ZSEpIC0gMSkudG9TdHJpbmcoKTsKICAgICAgICB0aGlzLmZsYXNoKCdTdWNjZXNzZnVsbHkgZG93bnZvdGVkIHJldmlldycsICdzdWNjZXNzJywge3RpbWVvdXQ6IDUwMDB9KQogICAgICB9IGVsc2UgaWYocmVzLnN0YXR1cyA9PSA1NTUpIHsKICAgICAgICB0aGlzLnNob3dIYW5kY2FzaE1vZGFsID0gdHJ1ZQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IG1zZyA9IHJlcy5kYXRhLm1lc3NhZ2UKICAgICAgICBpZiAodHlwZW9mIG1zZyAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgdGhpcy5mbGFzaChtc2csICdlcnJvcicsIHt0aW1lb3V0OiA1MDAwfSkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGFzeW5jIHVwbG9hZFByb2ZpbGVQaWN0dXJlKGV2ZW50OiBhbnkpIHsKICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgRE9NIGlucHV0IGVsZW1lbnQKICAgIGNvbnN0IGlucHV0ID0gZXZlbnQudGFyZ2V0OwogICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7CiAgICAgIGNvbnN0IGZpbGVUeXBlID0gaW5wdXQuZmlsZXNbMF1bInR5cGUiXTsKICAgICAgY29uc3QgdmFsaWRJbWFnZVR5cGVzID0gWyJpbWFnZS9qcGciLCAiaW1hZ2UvZ2lmIiwgImltYWdlL2pwZWciLCAiaW1hZ2UvcG5nIl07CiAgICAgIGlmICh2YWxpZEltYWdlVHlwZXMuaW5jbHVkZXMoZmlsZVR5cGUpKSB7CiAgICAgICAgY29uc3QgcGhvdG8gPSBldmVudC50YXJnZXQuZmlsZXNbMF0gYXMgRmlsZTsKICAgICAgICBjb25zdCB1cGxvYWRfdXNlcl9waG90byA9IGF3YWl0IHRoaXMudXNlcl9zZXJ2aWNlLnVwbG9hZFVzZXJQaG90byhwaG90bywgdGhpcy5wcm9maWxlIS5pZCk7CiAgICAgICAgaWYgKHVwbG9hZF91c2VyX3Bob3RvKSB7CiAgICAgICAgICB0aGlzLnVzZXJQaG90b0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgYXdhaXQgdGhpcy51c2VyX3NlcnZpY2UudXBkYXRlVXNlckxvY2FsU3RvcmFnZSh0aGlzLnByb2ZpbGUhLmlkKTsKICAgICAgICAgIHRoaXMuZmxhc2goJ1VwZGF0ZWQgcHJvZmlsZSBwaWN0dXJlJywgJ3N1Y2Nlc3MnLCB7dGltZW91dDogNTAwMH0pOwogICAgICAgICAgdGhpcy51c2VyUGhvdG9Mb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mbGFzaCgnUGxlYXNlIHRyeSB0byB1cGxvYWQgYSB2YWxpZCBpbWFnZScsICdlcnJvcicsIHt0aW1lb3V0OiA1MDAwfSk7CiAgICAgIH0KICAgIH0KICB9CgogIHNob3dNb3JlUmV2aWV3cygpIHsKICAgIHRoaXMuc2hvd1Jldmlld3MgKz0gNjsKICB9CgogIGFzeW5jIHRva2VuRXhwaXJlZCgpIHsKICAgIGF3YWl0IHRoaXMudXNlcl9zZXJ2aWNlLmxvZ291dCgpOwogICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICJob21lIn0pOwogIH0KCiAgYXN5bmMgZGVsZXRlUmV2aWV3KHJldmlld19pZDogc3RyaW5nKSB7CiAgICBpZiAodGhpcy5jaGVja1VzZXJXYWxsZXQoKSkgewogICAgICBpZiAoY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHJldmlldycpKSB7CiAgICAgICAgY29uc3QgZGVsZXRlUmV2aWV3ID0gYXdhaXQgdGhpcy5yZXZpZXdzX3Nlci5kZWxldGVSZXZpZXcocmV2aWV3X2lkKTsKICAgICAgICBpZiAoZGVsZXRlUmV2aWV3LnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIHRoaXMuYWxsVXNlclJldmlld3MoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mbGFzaCgnRmFpbGVkIHRvIGRlbGV0ZSByZXZpZXcnLCAnZXJyb3InLCB7dGltZW91dDogNTAwMH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGFzeW5jIGVkaXRSZXZpZXcocGxhY2VfaWQ6IHN0cmluZywgcGxhY2VfbmFtZTogc3RyaW5nLCByZXZpZXdfaWQ6IHN0cmluZykgewogICAgaWYgKHRoaXMuY2hlY2tVc2VyV2FsbGV0KCkpIHsKICAgICAgdGhpcy5nZXRSb3V0ZVBhdGgoJ25ld19yZXZpZXcnLCB7J3BsYWNlX2lkJzogcGxhY2VfaWQsICdwbGFjZV9uYW1lJzogcGxhY2VfbmFtZSwgJ3Jldmlld19pZCc6IHJldmlld19pZH0pOwogICAgfQogIH0KCiAgY2hlY2tVc2VyV2FsbGV0KCkgewogICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIud2FsbGV0KSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLm9wZW5Mb2dpbigpCiAgICB9CiAgfQoKICBhc3luYyBnZXRVc2VyTm90aWZpY2F0aW9uKCkgewogICAgY29uc3QgeCA9IGF3YWl0IHRoaXMubm90aWZpY2F0aW9uX3NlcnZpY2UuZ2V0VXNlck5vdGlmaWNhdGlvbnMoKTsKICAgIGlmICh4LnN0YXR1cyA9PSAyMDApIHsKICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0geC5kYXRhLm5vdGlmaWNhdGlvbnM7CiAgICB9CiAgfQoKICBhc3luYyBjbGVhck5vdGlmaWNhdGlvbnMoKSB7CiAgICBjb25zdCB4ID0gYXdhaXQgdGhpcy5ub3RpZmljYXRpb25fc2VydmljZS5jbGVhclVzZXJOb3RpZmljYXRpb25zKCk7CiAgICBpZiAoeC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAvKmF3YWl0IHRoaXMuZ2V0VXNlck5vdGlmaWNhdGlvbigpOyovCiAgICB9CiAgfQoKICBhc3luYyB1cGRhdGVQcm9maWxlRm9ybShlOiBhbnkpIHsKCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICBsZXQgYXBwcm92ZWQgPSB0cnVlOwogICAgY29uc3QgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1haWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50OwogICAgLy9jb25zdCBwYXNzd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7CiAgICBjb25zdCBmaXJzdF9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpcnN0X25hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50OwogICAgY29uc3QgbGFzdF9uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RfbmFtZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7CgogICAgaWYgKGVtYWlsLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsX2Vycm9yJykhLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgfSBlbHNlIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYWlsX2Vycm9yJykhLmNsYXNzTGlzdC5yZW1vdmUoJ2Qtbm9uZScpOwogICAgICBhcHByb3ZlZCA9IGZhbHNlOwogICAgfQogICAgLyppZiAocGFzc3dvcmQudmFsdWUubGVuZ3RoID4gMCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRfZXJyb3InKSEuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7CiAgICB9IGVsc2UgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRfZXJyb3InKSEuY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7CiAgICAgIGFwcHJvdmVkID0gZmFsc2U7CiAgICB9Ki8KICAgIGlmIChmaXJzdF9uYW1lLnZhbHVlLmxlbmd0aCA+IDApIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpcnN0X25hbWVfZXJyb3InKSEuY2xhc3NMaXN0LmFkZCgnZC1ub25lJyk7CiAgICB9IGVsc2UgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlyc3RfbmFtZV9lcnJvcicpIS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgYXBwcm92ZWQgPSBmYWxzZTsKICAgIH0KICAgIGlmIChsYXN0X25hbWUudmFsdWUubGVuZ3RoID4gMCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFzdF9uYW1lX2Vycm9yJykhLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpOwogICAgfSBlbHNlIHsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RfbmFtZV9lcnJvcicpIS5jbGFzc0xpc3QucmVtb3ZlKCdkLW5vbmUnKTsKICAgICAgYXBwcm92ZWQgPSBmYWxzZTsKICAgIH0KCiAgICBpZiAoYXBwcm92ZWQpIHsKICAgICAgY29uc3QgdXBkYXRlX3Byb2ZpbGUgPSBhd2FpdCB0aGlzLnVzZXJfc2VydmljZS51cGRhdGVQcm9maWxlKHRoaXMucHJvZmlsZSEpOwogICAgICBpZiAodXBkYXRlX3Byb2ZpbGUuc3RhdHVzID09IDIwMCkgewogICAgICAgIHRoaXMuZmxhc2goJ1lvdXIgcHJvZmlsZSBoYXMgYmVlbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJywge3RpbWVvdXQ6IDMwMDB9KTsKICAgICAgfQogICAgfQoKICB9CgogIG9wZW5SZXZpZXdJbWFnZU1vZGVsKHJldmlld19waG90b3M6IGFueSkgewogICAgdGhpcy5yZXZpZXdQaG90b3MgPSByZXZpZXdfcGhvdG9zOwogICAgdGhpcy5tYWluUmV2aWV3SW1hZ2VNb2RlbCA9IHJldmlld19waG90b3NbMF0udXJsOwogICAgdGhpcy5zaG93UmV2aWV3SW1hZ2VNb2RhbCA9ICF0aGlzLnNob3dSZXZpZXdJbWFnZU1vZGFsOwoKICB9CgogIGNoYW5nZVNob3dSZXZpZXdJbWFnZU1vZGFsKCkgewogICAgdGhpcy5zaG93UmV2aWV3SW1hZ2VNb2RhbCA9IGZhbHNlOwogIH0KfQo="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views/Dashboard/Profile","sourcesContent":["<template>\n  <div>\n    <div class=\"alert-container\">\n      <flash-message class=\"myCustomClass\"></flash-message>\n    </div>\n    <div v-if=\"profile\" class=\"profile__container py-3 py-sm-5\">\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col-12 col-lg-auto\">\n            <div class=\"pr-0 pr-lg-4\">\n              <div class=\"profile__user-image\">\n                <form id=\"customer_profile_picture_form\" method=\"post\" enctype='multipart/form-data'>\n                  <div v-if=\"currentUser && profile.id==currentUser.id\" class=\"profile__user-image-overlay\">\n                    <b-spinner v-if=\"userPhotoLoading\"/>\n                    <img v-else src=\"@/assets/images/user-image-add.svg\" alt=\"\">\n                  </div>\n                  <input v-if=\"currentUser && profile.id==currentUser.id\" v-on:change=\"uploadProfilePicture($event)\" name=\"image\" type=\"file\"\n                         accept=\"image/x-png,image/gif,image/jpeg\">\n                  <img v-if=\"profile.profilePhoto.url == ''\" src=\"@/assets/images/user-image-avatar.png\" alt=\"\">\n                  <img v-else :src=\"profile.profilePhoto.url\" :alt=\"profile.firstName\">\n                </form>\n              </div>\n              <div class=\"text-center mt-4\">\n                <b-button v-if=\"currentUser != null && profile.id==currentUser.id\"  @click=\"showModal\" variant=\"outline-primary\">Edit Profile</b-button>\n                <b-modal ref=\"modal-edit-profile\" title=\"Update Profile Information\" hide-footer>\n                  <form v-on:submit=\"updateProfileForm($event)\" id=\"profile_form\">\n                    <div class=\"form-group\">\n                      <label for=\"email\">Email address:</label>\n                      <input v-model=\"profile.email\" required type=\"email\" class=\"form-control\"\n                             placeholder=\"Enter email\" id=\"email\">\n                      <label id=\"email_error\" class=\"error d-none\">This field is requierd</label>\n                    </div>\n                    <!--<div class=\"form-group\">\n                      <label for=\"password\">Password:</label>\n                      <input v-model=\"profile.password\" required type=\"password\" class=\"form-control\"\n                             placeholder=\"Enter Password\" id=\"password\">\n                      <label id=\"password_error\" class=\"error d-none\">This field is requierd</label>\n                    </div>-->\n                    <div class=\"form-group\">\n                      <label for=\"first_name\">First Name:</label>\n                      <input v-model=\"profile.firstName\" required type=\"text\" class=\"form-control\"\n                             placeholder=\"First Name\" id=\"first_name\">\n                      <label id=\"first_name_error\" class=\"error d-none\">This field is requierd</label>\n                    </div>\n                    <div class=\"form-group\">\n                      <label for=\"last_name\">Last Name:</label>\n                      <input v-model=\"profile.lastName\" required type=\"text\" class=\"form-control\"\n                             placeholder=\"Last Name\" id=\"last_name\">\n                      <label id=\"last_name_error\" class=\"error d-none\">This field is requierd</label>\n                    </div>\n                    <b-button type=\"submit\" variant=\"primary\" @click=\"hideModal\">Submit</b-button>\n                  </form>\n                </b-modal>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-12 col-lg\">\n            <div class=\"row profile__title\">\n              <div class=\"col-md-12\">\n                <h3 class=\"profile__title-name\">{{ profile.firstName }}</h3>\n                <p class=\"profile__title-location\">{{ profile.location }}</p>\n              </div>\n            </div>\n            <div class=\"row profile__info align-items-center\">\n              <div class=\"col-12 col-sm-3 mb-3 mb-sm-0\">\n                <div class=\"row no-gutters align-items-center profile__info-points\">\n                  <div class=\"col-auto profile__info-coin-icon\">\n                    <font-awesome-icon :icon=\"['far', 'coin']\"/>\n                  </div>\n                  <div class=\"col-auto\">\n                    <p class=\"profile__info-earnings\">{{ profile.earnings }}</p>\n                  </div>\n                  <div class=\"col-auto\">\n                    <p>Earned</p>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-12 col-sm-2 mb-3 mb-sm-0 profile__info-other\">\n                <p class=\"font-weight-bold\">Reputation</p>\n                <p>{{ profile.reputation }}</p>\n              </div>\n              <div class=\"col-12 col-sm profile__info-other\">\n                <p class=\"font-weight-bold\">Paymail</p>\n                <p>{{ profile.paymail }}</p>\n                <p v-show=\"!profile.paymail\" class=\"text-gray-500\">No paymail</p>\n              </div>\n            </div>\n            <div v-if=\"currentUser && profile.id==currentUser.id\">\n              <div v-if=\"step< 4 || reviews.length== 0 && !loadingReviews\" class=\"profile__steps-container\">\n                <div class=\"profile__steps\">\n                  <div class=\"row align-items-center justify-content-center\">\n                    <div class=\"col-12 col-sm-auto\">\n                      <div class=\"steps__item\"\n                           :class=\"{'steps__item--success': step > 1, 'steps__item--active': step == 1}\">\n                        <p class=\"steps__item-title\">Sign Up to Britevue</p>\n                        <img v-show=\"step > 1\" src=\"@/assets/images/check.svg\" alt=\"\" class=\"steps__item-check\">\n                      </div>\n                    </div>\n                    <div class=\"col-auto d-none d-sm-inline-block\">\n                      <span class=\"steps__item-chevron\">\n                        <font-awesome-icon :icon=\"['far', 'chevron-right']\"/>\n                      </span>\n                    </div>\n                    <div class=\"col-12 col-sm-auto\">\n                      <div class=\"steps__item\"\n                           :class=\"{'steps__item--success': step > 2, 'steps__item--active': step == 2}\">\n                        <p class=\"steps__item-title\">Set Up Your Wallet</p>\n                        <img v-show=\"step > 2\" src=\"@/assets/images/check.svg\" alt=\"\" class=\"steps__item-check\">\n                      </div>\n                    </div>\n                    <div class=\"col-auto d-none d-sm-inline-block\">\n                      <span class=\"steps__item-chevron\">\n                        <font-awesome-icon :icon=\"['far', 'chevron-right']\"/>\n                      </span>\n                    </div>\n                    <div class=\"col-12 col-sm-auto\">\n                      <div class=\"steps__item\"\n                           :class=\"{'steps__item--success': step > 3, 'steps__item--active': step == 3}\">\n                        <p class=\"steps__item-title\">Claim Your Free Cash</p>\n                        <img v-show=\"step > 3\" src=\"@/assets/images/check.svg\" alt=\"\" class=\"steps__item-check\">\n                      </div>\n                    </div>\n                    <div class=\"col-auto d-none d-sm-inline-block\">\n                      <span class=\"steps__item-chevron\">\n                        <font-awesome-icon :icon=\"['far', 'chevron-right']\"/>\n                      </span>\n                    </div>\n                    <div class=\"col-12 col-sm-auto\">\n                      <div class=\"steps__item\" :class=\"{'steps__item--active': step == 4}\">\n                        <p class=\"steps__item-title\">Write Your First Review</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"profile__steps-content\">\n                  <div v-show=\"step==1\" id=\"step1\" ref=\"step1\"></div>\n                  <div v-show=\"step==2\" id=\"step2\" ref=\"step2\">\n                    <div class=\"row align-items-center justify-content-center\">\n                      <div class=\"col-12 col-md-6 col-lg-4\">\n                        <h3 class=\"profile__steps-wallet-title\">Connect your wallet to claim your free cash.</h3>\n                      </div>\n                      <div class=\"col-12 col-md-auto text-center\">\n                        <div class=\"profile__steps-handcash\">\n                          <p>Recommended</p>\n                          <div id=\"connectButton\" @click=\"redirectToHC\">\n                            Connect with HandCash\n                          </div>\n                          <!--<button type=\"button\" @click=\"redirectToMB\" class=\"btn btn-secondary signup-moneybutton\">\n                                                      <img src=\"@/assets/images/moneybutton_logo.svg\" alt=\"\">\n                                                      Connect with Money Button\n                                                    </button>-->\n                        </div>\n                        <!--\n                        ** Other wallet providers. Currently only supporting MB and HC\n                        <p class=\"other-options\">Other Options</p>\n                        <button class=\"btn btn-outline-dark\">Handcash</button>\n                        <button class=\"btn btn-outline-dark\">DotWallet</button>\n                        -->\n                      </div>\n                    </div>\n                  </div>\n                  <div v-show=\"step==3\" id=\"step3\" ref=\"step3\" class=\"profile__steps-survey\">\n                    <div class=\"row\">\n                      <div class=\"col-12 col-md-5\">\n                        <h3 class=\"profile__steps-survey-title\">Answer a quick survey about your hometown to get\n                          started!</h3>\n                        <p class=\"profile__steps-survey-text\">\n                          To ensure you have some money to get started on Britevue,\n                          please take some time to answer a short survey on your\n                          favorite local places! Each question is optional and any\n                          responses will be automatically added to your favorites list!\n                          Earn a little bit of money for each response.\n                        </p>\n                      </div>\n                      <div class=\"col-12 col-md form-container\">\n                        <form>\n                          <div class=\"form-group\">\n                            <label for=\"surveyLocalRestaurant\">{{ this.surveyLocalRestaurantQuestion }}</label>\n                            <vue-google-autocomplete\n                                id=\"surveyLocalRestaurant\"\n                                class=\"form-control\"\n                                placeholder=\"Search\"\n                                v-bind:enable-geolocation=true\n                                types=\"establishment\"\n                                v-on:placechanged=\"surveyLocalRestaurantChanged\"\n                            >\n                            </vue-google-autocomplete>\n                          </div>\n                          <div class=\"form-group\">\n                            <label for=\"surveyPizzaPlace\">{{ this.surveyPizzaPlaceQuestion }}</label>\n                            <vue-google-autocomplete\n                                id=\"surveyPizzaPlace\"\n                                class=\"form-control\"\n                                placeholder=\"Search\"\n                                v-bind:enable-geolocation=true\n                                types=\"establishment\"\n                                v-on:placechanged=\"surveyPizzaPlaceChanged\"\n                            >\n                            </vue-google-autocomplete>\n                          </div>\n                          <div class=\"form-group\">\n                            <label for=\"surveyBreakfastPlace\">{{ this.surveyBreakfastPlaceQuestion }}</label>\n                            <vue-google-autocomplete\n                                id=\"surveyBreakfastPlace\"\n                                class=\"form-control\"\n                                placeholder=\"Search\"\n                                v-bind:enable-geolocation=true\n                                types=\"establishment\"\n                                v-on:placechanged=\"surveyBreakfastPlaceChanged\"\n                            >\n                            </vue-google-autocomplete>\n                          </div>\n                          <div class=\"form-group\">\n                            <label for=\"surveyMexicanRestaurant\">{{ this.surveyMexicanRestaurantQuestion }}</label>\n                            <vue-google-autocomplete\n                                id=\"surveyMexicanRestaurant\"\n                                class=\"form-control\"\n                                placeholder=\"Search\"\n                                v-bind:enable-geolocation=true\n                                types=\"establishment\"\n                                v-on:placechanged=\"surveyMexicanRestaurantChanged\"\n                            >\n                            </vue-google-autocomplete>\n                          </div>\n                          <div class=\"form-group\">\n                            <label for=\"surveyCoffee\">{{ this.surveyCoffeeQuestion }}</label>\n                            <vue-google-autocomplete\n                                id=\"surveyCoffee\"\n                                class=\"form-control\"\n                                placeholder=\"Search\"\n                                v-bind:enable-geolocation=true\n                                types=\"establishment\"\n                                v-on:placechanged=\"surveyCoffeeChanged\"\n                            >\n                            </vue-google-autocomplete>\n                          </div>\n                          <div v-if=\"submittingSurvey\" class=\"d-flex justify-content-between pt-3\">\n                            <b-spinner class=\"spinner\"/>\n                          </div>\n                          <div v-else class=\"d-flex justify-content-between pt-3\">\n                            <button type=\"button\" class=\"btn btn-primary\" @click=\"submitOnboardingSurvey\">Submit\n                            </button>\n                            <button type=\"reset\" class=\"btn btn-outline-gray-700\" @click=\"skipSurvey\">Skip for now\n                            </button>\n                          </div>\n                        </form>\n                      </div>\n                    </div>\n                  </div>\n                  <div v-show=\"step==4\" id=\"step4\" ref=\"step4\" class=\"profile__steps-thanks\">\n                    <div>\n                      <p class=\"profile__steps-thanks-title\"><span>Thanks for taking the survey!</span> You now have some\n                        money to get started writing.</p>\n                    </div>\n                    <div class=\" row align-items-center justify-content-center\">\n                      <div class=\"col-12 col-md-auto mb-3 mb-sm-0\">\n                        <font-awesome-layers full-width class=\"fa-3x\">\n                          <font-awesome-icon :icon=\"['fal', 'map-marked-alt']\"/>\n                        </font-awesome-layers>\n                      </div>\n                      <div class=\"col-12 col-md-6 mb-3 mb-sm-0\">\n                        <p class=\"profile__steps-thanks-write\">Find a place where you have been and write a review that\n                          will help others</p>\n                      </div>\n                      <div class=\"col-12 col-md-auto\">\n                        <div class=\"custom-tooltip\">\n                          <button v-on:click=\"getRoutePath('dashboard','')\" type=\"button\" class=\"btn btn-primary btn-lg\">\n                            Write a review now\n                          </button>\n                          <span v-if=\"!checkUserWallet()\" class=\"custom-tooltip-text custom-tooltip-text-top\">Connect a wallet to your account before you can write a review</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n\n            <div class=\"row\" >\n              <div class=\"col-12 col-md-8\">\n                <div v-if=\"currentUser && profile.id==currentUser.id\" class=\"profile__notifications mb-5\">\n                  <div class=\"mb-3\">\n                    <h4 class=\"profile__notifications-title\">Notifications</h4>\n                    <button v-on:click=\"clearNotifications()\"\n                            class=\"btn btn-outline-primary profile__notifications-clear\">Clear All\n                    </button>\n                  </div>\n                  <template v-if=\"notifications.length\">\n                    <div class=\"row\">\n                      <div  class=\"col-12\" v-for=\"(notification, index) in notifications\" :key=\"notification.id\">\n                        <div class=\"row no-gutters\"\n                             :class=\"notifications.length === index +1? 'notification last': 'notification'\">\n                          <div class=\"col-7\">\n                            <p class=\"content\">\n                              <span class=\"icon\"><img src=\"@/assets/images/activities_grey.svg\"\n                                                      alt=\"Notification\"></span>\n                              {{ notification }}\n                            </p>\n                          </div>\n                          <div class=\"col-12\">\n                            <span class=\"divider\"></span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </template>\n                  <div class=\"row\">\n                    <div class=\"col-12\" v-if=\"!notifications.length\">\n                      <p>No Notifications were found.</p>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"profile__reviews mb-5\">\n                  <div v-if=\"loadingReviews\" class=\"row justify-content-center spinner\">\n                    <b-spinner/>\n                  </div>\n                  <div v-else class=\"profile__reviews-list\">\n                    <div v-if=\"reviews != null\">\n                      <h4 class=\"mb-4\">Reviews</h4>\n\n                      <div class=\"activity-card\" v-for=\"review in reviews.slice(0,showReviews)\" :key=\"review.id\">\n                        <div class=\"row no-gutters\">\n                          <div v-if=\"typeof review.photos != 'undefined' && review.photos != null \"\n                               class=\"col-12 col-sm-auto pr-0 pr-sm-3 mb-3 mb-sm-0\">\n                            <div v-if=\"review.photos.length > 0\">\n                              <img @click=\"openReviewImageModel(review.photos)\" :src=\"review.photos[0].url\" alt=\"Place\"\n                                   class=\"activity-card__header-horizontal-image\">\n                            </div>\n                          </div>\n                          <div class=\"col-12 col-sm\">\n                            <div class=\"activity-card__header\">\n                              <div class=\"row align-items-center\">\n                                <div class=\"col\">\n                                  <p class=\"activity-card__header-name\"\n                                     @click=\"getRoutePath('place',{'id':review.placeID})\">{{ review.title }}</p>\n                                  <p class=\"activity-card__header-date\">{{ review.date }}</p>\n                                </div>\n                              </div>\n                            </div>\n                            <div class=\"activity-card__body\">\n                              <div class=\"row\">\n                                <div class=\"col\">\n                                  <div class=\"place-card__rating\">\n                                    <img src=\"@/assets/images/star.svg\" alt=\"Rating\"/>\n                                    <p>\n                                      <span class=\"place-card__rating-value\">{{ review.ratingAverage }}</span>\n                                    </p>\n                                  </div>\n                                </div>\n                                <div class=\"col text-right\">\n                                  <p><strong>Score: {{review.score }}</strong></p>\n                                </div>\n                              </div>\n                              <div class=\"row\" v-if=\"review.paywall && review.paywall.cost != 0\">\n                                <div class=\"col text-right\">\n                                  <p><strong>Cost: ${{ review.paywall.cost }}</strong></p>\n                                </div>\n                              </div>\n                              <p class=\"card-text\" :class=\"review.paywall && review.paywall.cost != 0 && review.user != currentUser.id && !review.paywall.paidFor ? 'blur' : ''\">{{ review.reviewBody }}</p>\n                              <!--<p class=\"user-rep\">User Rep: &lt;!&ndash;{{ activity.user.reputation }}&ndash;&gt;</p>-->\n                            </div>\n                            <div class=\"activity-card__footer\">\n                              <div class=\"row\">\n                                <div class=\"col-auto pr-0\">\n                                  <div class=\"activity-card__footer-vote custom-tooltip\" @click=\"upvote(review.id,$event)\">\n                                    <b-spinner :id=\"`upvote-spinner-`+review.id\" class=\"spinner  d-none\"/>\n                                    <img :id=\"`upvote-icon-`+review.id\" src=\"@/assets/images/upvote.svg\" alt=\"Up Vote\">\n                                    <span :id=\"`upvote-`+review.id\">{{ review.upvotes }}</span>\n                                    <span v-if=\"!checkUserWallet()\" class=\"custom-tooltip-text custom-tooltip-text-top\">Connect a wallet to your account before you can upvote</span>\n                                  </div>\n                                </div>\n                                <div class=\"col-auto pr-0\">\n                                  <div class=\"activity-card__footer-vote custom-tooltip\" @click=\"downvote(review.id,$event)\">\n                                    <b-spinner :id=\"`downvote-spinner-`+review.id\" class=\"spinner  d-none\"/>\n                                    <img :id=\"`downvote-icon-`+review.id\" src=\"@/assets/images/downvote.svg\" alt=\"Down Vote\">\n                                    <span :id=\"`downvote-`+review.id\">{{ review.downvotes }}</span>\n                                    <span v-if=\"!checkUserWallet()\" class=\"custom-tooltip-text custom-tooltip-text-top\">Connect a wallet to your account before you can downvote</span>\n                                  </div>\n                                </div>\n                                <div class=\"col text-right\">\n\n                                  <div v-if=\"currentUser && profile.id==currentUser.id\" class=\"custom-tooltip\">\n                                    <font-awesome-icon v-on:click=\"deleteReview(review.id)\"\n                                                       style=\"color:#FF9800;font-size: 24px;\"\n                                                       class=\"mx-2\" :icon=\"['far', 'trash-alt']\"></font-awesome-icon>\n                                    <span v-if=\"!checkUserWallet()\" class=\"custom-tooltip-text custom-tooltip-text-top\">Connect a wallet to your account before you can delete a review</span>\n                                  </div>\n                                  <div v-if=\"currentUser && profile.id==currentUser.id\" class=\"custom-tooltip\">\n                                    <font-awesome-icon v-on:click=\"editReview(review.placeID,review.title,review.id)\"\n                                                       style=\"color:#FF9800;font-size: 24px;\" class=\"mx-2\"\n                                                       :icon=\"['far', 'pen']\"></font-awesome-icon>\n                                    <span v-if=\"!checkUserWallet()\" class=\"custom-tooltip-text custom-tooltip-text-top\">Connect a wallet to your account before you can edit a review</span>\n                                  </div>\n\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div class=\"activity-card__purchase-btn\" v-if=\"review.paywall && review.paywall.cost != 0 && review.user != currentUser.id && !review.paywall.paidFor\">\n                          <b-spinner :id=\"`purchase-spinner-`+review.id\" class=\"spinner d-none\"/>\n                          <button :id=\"`purchase-button-`+review.id\" class=\"btn btn-secondary\" @click=\"purchaseReview(review.id)\">Purchase ${{ review.paywall.cost }}</button>\n                        </div>\n                      </div>\n                    </div>\n\n                    <p v-if=\"reviews == null\">You don't have any reviews yet.</p>\n\n                    <div v-if=\"reviews != null\" class=\"text-center\">\n                      <div class=\"profile__reviews-list-load-more\" :class=\"{'d-none': showReviews > reviews.length}\"\n                           v-on:click=\"showMoreReviews()\">\n                        <img src=\"@/assets/images/arrow_down.svg\" alt=\"Show More Reviews\">\n                        <p>Show More Reviews</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-12 col-md-4\">\n                <!--<div class=\"profile__side-reviewers\">\n                  <p class=\"profile__side-title\">My Favorite Reviewers</p>\n                  <div class=\"profile__side-reviewers-list\" v-if=\"favorite_users.length\">\n                    <div class=\"side-info-item\" v-for=\"(person, index) in favorite_users\" :key=\"person.id\"\n                         :class=\"favorite_users.length === index +1? 'last': ''\">\n                      <div class=\"row align-items-center\">\n                        <div class=\"col-auto pr-0\">\n                          <img v-if=\"person.profilePhoto.url!=''\" class=\"side-info-item__image\"\n                               :src=\"person.profilePhoto.url\"\n                               :alt=\"person.firstName\">\n                          <img v-else class=\"side-info-item__image\" src=\"@/assets/images/person.png\"\n                               :alt=\"person.firstName\">\n                        </div>\n                        <div class=\"col\">\n                          <p class=\"side-info-item__name\">{{ person.firstName + \" \" + person.lastName }}</p>\n                          <p v-if=\"person.reviewsCount > 1\" class=\"side-info-item__info\">{{ person.reviewsCount }}\n                            Reviews</p>\n                          <p v-else class=\"side-info-item__info\">{{ person.reviewsCount }} Review</p>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <p v-if=\"!favorite_users.length\">No Favorite Reviewers were found.</p>\n                </div>-->\n                <div class=\"profile__side-places\">\n                  <p class=\"profile__side-title\"><span v-if=\"currentUser && profile.id==currentUser.id\" >My </span>Favorite Places</p>\n                  <div class=\"profile__side-places-list\" v-if=\"favorite_locations.length\">\n                    <div class=\"side-info-item\" v-for=\"(place, index) in favorite_locations\" :key=\"place.id\"\n                         :class=\"favorite_locations.length === index +1? 'last': ''\">\n                      <div class=\"row align-items-center\">\n                        <div v-if=\"typeof place.britevue_photos !='undefined' && place.britevue_photos != null\"\n                             class=\"col-auto pr-0\">\n                          <img v-if=\"place.britevue_photos.length > 0\" :src=\"place.britevue_photos[0].url\"\n                               :alt=\"place.title\" class=\"side-info-item__image\">\n                          <img v-else class=\"side-info-item__image\" src=\"@/assets/images/no-photo-avatar-1.png\"\n                               :alt=\"place.title\">\n                        </div>\n                        <div v-else class=\"col-auto pr-0\">\n                          <img v-if=\"typeof place.photos !='undefined' && place.photos != null\"\n                               :src=\"`https://maps.googleapis.com/maps/api/place/photo?key=AIzaSyDMqrI8hMqiyIPdQUkRUerdohx28Fuv4wE&photo_reference=`+place.photos[0].photo_reference+`&maxwidth=50`\"\n                               @error=\"imageUrlAlt\" alt=\"Card image cap\" class=\"side-info-item__image\">\n                          <img v-else class=\"side-info-item__image\" src=\"@/assets/images/no-photo-avatar-1.png\"\n                               :alt=\"place.title\">\n                        </div>\n                        <div class=\"col\">\n                          <a\n                              v-on:click=\"getRoutePath('place', { id: place.place_id })\"\n                              href=\"javascript:;\"\n                              class=\"place-card__title\"\n                          >\n                            <p class=\"side-info-item__name\">{{ place.name }}</p>\n                          </a>\n                          <div class=\"row no-gutters\">\n                            <div class=\"col\">\n                              <p class=\"side-info-item__info\">{{ place.formatted_address }}</p>\n                            </div>\n                            <div class=\"col text-right\">\n                              <div v-if=\"place.review_total > 0\" class=\"side-info-item__rating\">\n                                <img src=\"@/assets/images/star.svg\" alt=\"Rating\">\n                                <span>{{ place.britevue_ratings.average }}</span><span\n                                  class=\"side-info-item__rating-count\">({{ place.review_total }})</span>\n                              </div>\n                              <div v-else class=\"side-info-item__rating\">\n                                <img src=\"@/assets/images/star.svg\" alt=\"Rating\">\n                                <span>N/A</span><span class=\"side-info-item__rating-count\">({{\n                                  place.review_total\n                                }})</span>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                  <p v-if=\"!favorite_locations.length\">No Favorite Places were found.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <Modal :show-handcash-modal=\"showHandcashModal\"  :title=\"'Top Up!'\" :body=\"'You need to reset your spending limit in the Handcash app'\" :icon=\"'times-circle'\" :actions=\"[{ text:'Open Handcash', url:'https://app.handcash.io/', variant:'handcash', target:'_blank' }]\"></Modal>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div>\n      <ReviewImageModal @changeShowReviewImageModal=\"changeShowReviewImageModal\" ref=\"reviewImageModal\"\n                        :photos=\"reviewPhotos\" :show-review-image-modal=\"showReviewImageModal\"\n                        :main-review-image-model=\"mainReviewImageModel\"></ReviewImageModal>\n    </div>\n    <Login ref=\"login\" @openSignup=\"openSignup\" @onLogin=\"onLogin\"></Login>\n    <Signup ref=\"signup\" @onSignup=\"onSignup\"></Signup>\n  </div>\n</template>\n\n<style lang=\"scss\" src=\"./Profile.scss\"></style>\n<script lang=\"ts\">\nimport {Vue, Component, Inject} from 'vue-property-decorator';\nimport {IReview} from \"@/interfaces/IReview\";\nimport {INotification} from \"@/interfaces/INotification\";\nimport {ISurvey} from \"@/interfaces/ISurvey\";\nimport {IUser} from \"@/interfaces/IUser\";\nimport {IPlace} from \"@/interfaces/IPlace\";\nimport {IFavorite} from \"@/interfaces/IFavorite\";\nimport {ReviewsService} from \"@/services/ReviewsService\";\nimport {FavoritesService} from \"@/services/FavoritesService\";\nimport {UserService} from \"@/services/UserService\";\nimport {PlaceService} from \"@/services/PlaceService\";\nimport {GoogleService} from \"@/services/GoogleService\";\nimport {SurveyService} from \"@/services/SurveyService\";\nimport Login from \"@/components/Login/Login.vue\";\nimport Signup from \"@/components/Signup/Signup.vue\";\nimport Modal from \"@/components/Modal/Modal.vue\";\nimport VueGoogleAutocomplete from \"vue-google-autocomplete\"\nimport \"./Handcash.css\";\nimport {NotificationsService} from \"@/services/NotficationsService\";\nimport ReviewImageModal from \"@/components/ImageModal/ReviewImageModal.vue\";\n\nconst HandcashAppID = process.env.VUE_APP_HC_APP_ID\nconst MoneybuttonAppID = process.env.VUE_APP_MB_APP_ID\nconst MoneybuttonRedirectURI = process.env.VUE_APP_MB_REDIRECT_URI\n@Component({\n  components: {\n    Login,\n    Signup,\n    Modal,\n    VueGoogleAutocomplete,\n    ReviewImageModal\n  },\n  metaInfo:{\n    title: \"Britevue - Blockchain verified reviews where reviewers get paid\",\n    meta: [\n      { name:'title',content:'Britevue - Blockchain verified reviews where reviewers get paid'},\n      { name: 'description', content:  'Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!'},\n      { itemprop: 'name', content: \"Britevue\"},\n      { itemprop: 'description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { itemprop: 'image', content:  require('@/assets/images/logo_black.svg')},\n      { property: 'og:type', content: \"website\"},\n      { property: 'og:url', content: \"https://britevue.com/\"},\n      { property: 'og:title', content: \"Britevue - Blockchain verified reviews where reviewers get paid\"},\n      { property: 'og:description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { property: 'og:image', content:  require('@/assets/images/logo_black.svg')},\n      { property: 'og:site_name', content: 'britevue'},\n      { name: 'twitter:card', content: \"summary_large_image\"},\n      { name: 'twitter:url', content: \"https://britevue.com/\"},\n      { name: 'twitter:title', content: \"Britevue - Blockchain verified reviews where reviewers get paid\"},\n      { name: 'twitter:description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { name: 'twitter:image', content: require('@/assets/images/logo_black.svg') },\n    ]\n  }\n})\nexport default class Profile extends Vue {\n  @Inject('userService')\n  user_service!: UserService;\n\n  loadingReviews = false\n  step: number;\n  profile: IUser | null = null;\n  profile_id!: string;\n  currentUser: IUser | null = null;\n  notifications: INotification[] = [];\n  favorite_reviewers: IFavorite[] = [];\n  favorite_places: IFavorite[] = [];\n  favorite_user!: IUser;\n  favorite_users: IUser[] = [];\n  favorite_location!: IPlace;\n  favorite_locations: IPlace[] = [];\n  reviews: IReview[] = [];\n  @Inject('reviewsService')\n  reviews_ser!: ReviewsService;\n\n  @Inject('placeService')\n  place_ser!: PlaceService;\n\n  @Inject('favoritesService')\n  favorites_ser!: FavoritesService;\n\n  @Inject('googleService')\n  google_ser!: GoogleService;\n  showReviews: number;\n\n  @Inject('surveyService')\n  survey_ser!: SurveyService;\n\n  @Inject('notificationsService')\n  notification_service!: NotificationsService;\n\n  // Onboarding survey vars\n  surveyLocalRestaurantQuestion: string;\n  surveyLocalRestaurant: string;\n  surveyMexicanRestaurantQuestion: string;\n  surveyMexicanRestaurant: string;\n  surveyPizzaPlaceQuestion: string;\n  surveyPizzaPlace: string;\n  surveyBreakfastPlaceQuestion: string;\n  surveyBreakfastPlace: string;\n  surveyCoffeeQuestion: string;\n  surveyCoffee: string;\n\n  onboardingSurvey!: ISurvey;\n  flash: any;\n  userPhotoLoading: boolean;\n  submittingSurvey: boolean;\n  reviewPhotos: [];\n  showReviewImageModal: boolean;\n  mainReviewImageModel: string;\n\n  showHandcashModal: boolean;\n\n  constructor() {\n    super();\n    if (typeof this.$route.params.id != 'undefined') {\n      this.profile_id = this.$route.params.id;\n    } else {\n     // this.getRoutePath('home', '');\n    }\n    this.step = 2;\n    this.showReviews = 6;\n    // onboarding survey\n    this.submittingSurvey = false;\n    this.surveyLocalRestaurantQuestion = \"What's your favorite restaurant?\";\n    this.surveyLocalRestaurant = \"\";\n    this.surveyMexicanRestaurantQuestion = \"What's your favorite Mexican restaurant?\";\n    this.surveyMexicanRestaurant = \"\";\n    this.surveyPizzaPlaceQuestion = \"What's your favorite pizza place?\";\n    this.surveyPizzaPlace = \"\";\n    this.surveyBreakfastPlaceQuestion = \"What's your favorite place to get breakfast?\";\n    this.surveyBreakfastPlace = \"\";\n    this.surveyCoffeeQuestion = \"What's your favorite coffee shop?\";\n    this.surveyCoffee = \"\";\n    this.notifications = [];\n    this.showHandcashModal = false;\n    this.userPhotoLoading = false;\n    this.reviewPhotos = [];\n    this.showReviewImageModal = false;\n    this.mainReviewImageModel = '';\n    const user = this.user_service.getCurrentUser();\n    if (user) {\n      this.currentUser = user;\n    }\n  }\n\n  async mounted() {\n    if (this.$route.query.token != null && this.$route.query.username != null) {\n      const tokenObj = {\n        username: this.$route.query.username,\n        token: this.$route.query.token,\n        expires_at: this.$route.query.expires_at\n      }\n      localStorage.setItem('token', JSON.stringify(tokenObj))\n      await this.user_service.updateUserLocalStorage(this.$route.query.username as string)\n    } else {\n      await this.user_service.updateUserLocalStorage(\"\");\n    }\n\n    try {\n      const fetchUser = await this.user_service.getUser(this.profile_id);\n      if (fetchUser.status == 200) {\n        await this.getUserNotification();\n        this.profile = fetchUser.data;\n        if (this.profile!.wallet != '') {\n          this.step = 3;\n        }\n        if (this.profile!.onboardingSurveyDone == true) {\n          this.step = 4;\n        }\n\n        this.allUserReviews();\n        await this.loadFavoriteLocations();\n\n        let favorite_reviewers = await this.favorites_ser.reviewers(this.profile!.id);\n        if (favorite_reviewers.status == 200) {\n          favorite_reviewers = favorite_reviewers.data;\n          const favorite_users = new Array(favorite_reviewers.length)\n          if (favorite_reviewers && favorite_reviewers.length) {\n            this.favorite_reviewers = favorite_reviewers;\n            for (let i = 0; i < favorite_reviewers.length; i++) {\n              const favorite_user = await this.user_service.getUser(favorite_reviewers[i].favorite);\n              if (favorite_user.status == 200) {\n                this.favorite_user = favorite_user.data;\n                favorite_users[i] = favorite_user.data;\n              }\n \n            }\n            this.favorite_users = favorite_users;\n          }\n\n        }\n\n\n      } else {\n      //  this.getRoutePath('home', '');\n      }\n    } catch(e) {\n      console.error(e)\n      this.openLogin()\n    }\n  }\n\n  surveyLocalRestaurantChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyLocalRestaurant = place.place_id\n    }\n  }\n\n  openLogin() {\n    if (!(this.$refs['signup'] as any).isOpen()) {\n      (this.$refs['login'] as any).showModal();\n    }\n  }\n\n  onLogin() {\n    this.flash('You have logged in successfully', 'success', {timeout: 3000});\n    location.reload();\n  }\n  onSignup() {\n    this.flash('You have signed up successfully', 'success', {timeout: 3000});\n    location.reload();\n  }\n  openSignup() {\n    (this.$refs['signup'] as any).showModal();\n  }\n  surveyPizzaPlaceChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyPizzaPlace = place.place_id\n    }\n  }\n\n  surveyCoffeeChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyCoffee = place.place_id\n    }\n  }\n\n  surveyBreakfastPlaceChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyBreakfastPlace = place.place_id\n    }\n  }\n\n  surveyMexicanRestaurantChanged(ret: any, place: any, id: any) {\n    if (typeof place.place_id != \"undefined\") {\n      this.surveyMexicanRestaurant = place.place_id\n    }\n  }\n\n  imageUrlAlt(event: any) {\n    event.target.src = require(\"@/assets/images/no-photo-avatar.png\");\n  }\n\n  showModal() {\n    (this.$refs['modal-edit-profile'] as any).show();\n  }\n\n  hideModal() {\n    (this.$refs['modal-edit-profile'] as any).hide();\n  }\n\n\n  skipSurvey() {\n    this.step = 4\n  }\n  async purchaseReview(review_id: string) {\n    const spinner=document.getElementById('purchase-spinner-' + review_id) as HTMLElement;\n    const button=document.getElementById('purchase-button-' + review_id) as HTMLElement;\n    if(this.checkUserWallet()){\n      spinner.classList.remove('d-none');\n      button.classList.add('d-none')\n      const res = await this.reviews_ser.buyReview(review_id)\n      if (res.status == 200) {\n        this.flash('Successfully purchased review in tx '+res.data.paymentTx, 'success', {timeout: 5000});\n      } else if (res.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        this.flash('Failed to purchase review', 'error', {timeout: 5000})\n      }\n      spinner.classList.add('d-none')\n      await this.allUserReviews()\n    }\n  }\n\n  async loadFavoriteLocations() {\n    if (this.profile) {\n      let favorite_places = await this.favorites_ser.places(this.profile.id);\n\n      const favorite_locations = new Array(favorite_places.length)\n      if (favorite_places.status == 200) {\n        favorite_places = favorite_places.data;\n        if (favorite_places && favorite_places.length) {\n          this.favorite_places = favorite_places;\n          for (let i = 0; i < favorite_places.length; i++) {\n            const favorite_location = await this.place_ser.getPlace(favorite_places[i].favorite);\n            this.favorite_location = favorite_location;\n            favorite_locations[i] = favorite_location;\n          }\n\n          this.favorite_locations = favorite_locations;\n        }\n      }\n    }\n  }\n\n  async allUserReviews() {\n    this.reviews = [];\n    this.loadingReviews = true\n    const reviews = await this.reviews_ser.allUserReviews(this.profile!.id);\n    if (reviews.status == 200) {\n      this.reviews = reviews.data;\n      if (this.reviews != null) {\n        await this.loadReviewLocations()\n      }\n\n    }\n    this.loadingReviews = false\n  }\n\n  async loadReviewLocations() {\n    const revs = []\n    for (let i = 0; i < this.reviews.length; i++) {\n      const rev = this.reviews[i];\n      if (rev.placeID == null) {\n        continue\n      }\n      try {\n        const place = await this.place_ser.getPlace(rev.placeID)\n        rev.title = place.name\n        revs.push(rev)\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    this.reviews = revs\n    this.loadingReviews = false\n  }\n\n  async submitOnboardingSurvey() {\n    const surveyResponses = []\n    let response = {\n      question: \"\",\n      answer: \"\"\n    }\n    if (this.surveyLocalRestaurant != \"\") {\n      response = {\n        question: this.surveyLocalRestaurantQuestion,\n        answer: this.surveyLocalRestaurant\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyMexicanRestaurant != \"\") {\n      response = {\n        question: this.surveyMexicanRestaurantQuestion,\n        answer: this.surveyMexicanRestaurant\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyBreakfastPlace != \"\") {\n      response = {\n        question: this.surveyBreakfastPlaceQuestion,\n        answer: this.surveyBreakfastPlace\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyCoffee != \"\") {\n      response = {\n        question: this.surveyCoffeeQuestion,\n        answer: this.surveyCoffee\n      }\n      surveyResponses.push(response)\n    }\n    if (this.surveyPizzaPlace != \"\") {\n      response = {\n        question: this.surveyPizzaPlaceQuestion,\n        answer: this.surveyPizzaPlace\n      }\n      surveyResponses.push(response)\n    }\n    if (this.profile == null) {\n      return\n    }\n    if (surveyResponses.length == 0) {\n      this.flash('Please include at least one survey response or skip the survey', 'error', {timeout: 10000})\n      return\n    }\n    this.onboardingSurvey = {\n      id: \"1\",\n      username: this.profile.id,\n      responses: surveyResponses\n    }\n\n    this.submittingSurvey = true\n\n    const survey_res = await this.survey_ser.postSurvey(this.onboardingSurvey)\n    if (survey_res.status == 200) {\n      this.flash('Successfully submitted survey response! You were paid ' + survey_res.data.totalEarnings + ' cents in transaction ' + survey_res.data.paymentTx, 'success', {timeout: 10000});\n      this.profile.earnings = survey_res.data.totalEarnings\n      this.submittingSurvey = false\n      this.loadFavoriteLocations()\n      this.step = 4\n    } else {\n      this.flash('Something went wrong', 'error', {timeout: 10000});\n      this.submittingSurvey = false\n    }\n\n  }\n\n  redirectToHC() {\n    if (this.profile != null) {\n      this.$cookies.set('username', this.profile.id)\n    }\n    window.location.href = 'https://app.handcash.io/#/authorizeApp?appId=' + HandcashAppID\n  }\n\n  generateState() {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    const charactersLength = characters.length;\n    for (let i = 0; i < 10; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n\n  getRoutePath(name: string, parameters: any) {\n    return this.$router.push({name: name, params: parameters});\n  }\n\n  async upvote(review_id: string, e: any) {\n    e.preventDefault();\n    if (this.checkUserWallet()) {\n      const spinner=document.getElementById('upvote-spinner-' + review_id) as HTMLElement;\n      const upvoteElement=document.getElementById('upvote-' + review_id) as HTMLElement;\n      const upvoteIcon=document.getElementById('upvote-icon-' + review_id) as HTMLElement;\n      spinner.classList.remove('d-none');\n      upvoteElement.classList.add('d-none');\n      upvoteIcon.classList.add('d-none');\n      const res = await this.reviews_ser.upvoteReview(this.currentUser!.id, review_id);\n      spinner.classList.add('d-none');\n      upvoteElement.classList.remove('d-none');\n      upvoteIcon.classList.remove('d-none');\n      if (res.status == 200) {\n        const upvoteResult = res.data\n        const vote = document.getElementById('upvote-' + review_id)!.textContent;\n        document.getElementById('upvote-' + review_id)!.innerHTML = (parseInt(vote!) + 1).toString();\n        this.flash('Successfully upvoted review', 'success', {timeout: 5000})\n      } else if(res.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        const msg = res.data.message\n        if (typeof msg != 'undefined') {\n          this.flash(msg, 'error', {timeout: 5000})\n        }\n      }\n    }\n\n  }\n\n  async downvote(review_id: string, e: any) {\n    e.preventDefault();\n    if (this.checkUserWallet()) {\n      const spinner=document.getElementById('downvote-spinner-' + review_id) as HTMLElement;\n      const downvoteElement=document.getElementById('downvote-' + review_id) as HTMLElement;\n      const downvoteIcon=document.getElementById('downvote-icon-' + review_id) as HTMLElement;\n      spinner.classList.remove('d-none');\n      downvoteElement.classList.add('d-none');\n      downvoteIcon.classList.add('d-none');\n      const res = await this.reviews_ser.downReview(this.profile!.id, review_id);\n      spinner.classList.add('d-none');\n      downvoteElement.classList.remove('d-none');\n      downvoteIcon.classList.remove('d-none');\n      if (res.status == 200) {\n        const vote = document.getElementById('downvote-' + review_id)!.textContent;\n        document.getElementById('downvote-' + review_id)!.innerHTML = (parseInt(vote!) - 1).toString();\n        this.flash('Successfully downvoted review', 'success', {timeout: 5000})\n      } else if(res.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        const msg = res.data.message\n        if (typeof msg != 'undefined') {\n          this.flash(msg, 'error', {timeout: 5000})\n        }\n      }\n    }\n  }\n\n  async uploadProfilePicture(event: any) {\n    // Reference to the DOM input element\n    const input = event.target;\n    if (input.files && input.files[0]) {\n      const fileType = input.files[0][\"type\"];\n      const validImageTypes = [\"image/jpg\", \"image/gif\", \"image/jpeg\", \"image/png\"];\n      if (validImageTypes.includes(fileType)) {\n        const photo = event.target.files[0] as File;\n        const upload_user_photo = await this.user_service.uploadUserPhoto(photo, this.profile!.id);\n        if (upload_user_photo) {\n          this.userPhotoLoading = true;\n          await this.user_service.updateUserLocalStorage(this.profile!.id);\n          this.flash('Updated profile picture', 'success', {timeout: 5000});\n          this.userPhotoLoading = false;\n          location.reload();\n        }\n      } else {\n        this.flash('Please try to upload a valid image', 'error', {timeout: 5000});\n      }\n    }\n  }\n\n  showMoreReviews() {\n    this.showReviews += 6;\n  }\n\n  async tokenExpired() {\n    await this.user_service.logout();\n    this.$router.push({name: \"home\"});\n  }\n\n  async deleteReview(review_id: string) {\n    if (this.checkUserWallet()) {\n      if (confirm('Are you sure you want to delete this review')) {\n        const deleteReview = await this.reviews_ser.deleteReview(review_id);\n        if (deleteReview.status == 200) {\n          this.allUserReviews();\n        } else {\n          this.flash('Failed to delete review', 'error', {timeout: 5000});\n        }\n      }\n    }\n\n  }\n\n  async editReview(place_id: string, place_name: string, review_id: string) {\n    if (this.checkUserWallet()) {\n      this.getRoutePath('new_review', {'place_id': place_id, 'place_name': place_name, 'review_id': review_id});\n    }\n  }\n\n  checkUserWallet() {\n    if (this.currentUser) {\n      if (this.currentUser.wallet) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      this.openLogin()\n    }\n  }\n\n  async getUserNotification() {\n    const x = await this.notification_service.getUserNotifications();\n    if (x.status == 200) {\n      this.notifications = x.data.notifications;\n    }\n  }\n\n  async clearNotifications() {\n    const x = await this.notification_service.clearUserNotifications();\n    if (x.status == 200) {\n      location.reload();\n      /*await this.getUserNotification();*/\n    }\n  }\n\n  async updateProfileForm(e: any) {\n\n    e.preventDefault();\n    let approved = true;\n    const email = document.getElementById('email') as HTMLInputElement;\n    //const password = document.getElementById('password') as HTMLInputElement;\n    const first_name = document.getElementById('first_name') as HTMLInputElement;\n    const last_name = document.getElementById('last_name') as HTMLInputElement;\n\n    if (email.value.length > 0) {\n      document.getElementById('email_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('email_error')!.classList.remove('d-none');\n      approved = false;\n    }\n    /*if (password.value.length > 0) {\n      document.getElementById('password_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('password_error')!.classList.remove('d-none');\n      approved = false;\n    }*/\n    if (first_name.value.length > 0) {\n      document.getElementById('first_name_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('first_name_error')!.classList.remove('d-none');\n      approved = false;\n    }\n    if (last_name.value.length > 0) {\n      document.getElementById('last_name_error')!.classList.add('d-none');\n    } else {\n      document.getElementById('last_name_error')!.classList.remove('d-none');\n      approved = false;\n    }\n\n    if (approved) {\n      const update_profile = await this.user_service.updateProfile(this.profile!);\n      if (update_profile.status == 200) {\n        this.flash('Your profile has been updated successfully', 'success', {timeout: 3000});\n      }\n    }\n\n  }\n\n  openReviewImageModel(review_photos: any) {\n    this.reviewPhotos = review_photos;\n    this.mainReviewImageModel = review_photos[0].url;\n    this.showReviewImageModal = !this.showReviewImageModal;\n\n  }\n\n  changeShowReviewImageModal() {\n    this.showReviewImageModal = false;\n  }\n}\n</script>\n"]}]}