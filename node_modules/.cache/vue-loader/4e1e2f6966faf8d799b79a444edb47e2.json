{"remainingRequest":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cmurray/britevue-frontend/src/components/Tip/Tip.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cmurray/britevue-frontend/src/components/Tip/Tip.vue","mtime":1628691920056},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIFZ1ZSwgUHJvcH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpcCBleHRlbmRzIFZ1ZXsKICBAUHJvcCh7ZGVmYXVsdDogIlVTRCJ9KSBjdXJyZW5jeSE6IHN0cmluZzsKICBAUHJvcCgpIHJldmlld0lkITogc3RyaW5nOwogIEBQcm9wKCkgdXNlcklkITogc3RyaW5nOwogIEBQcm9wKCkgdGlwU3RhdHVzITogYm9vbGVhbjsKICBkaXNhYmxlZDogYm9vbGVhbjsKICB2YWx1ZTogc3RyaW5nOwogIHNob3dQb3BvdmVyOiBib29sZWFuOwogIHRpcFN1Y2Nlc3M6IGJvb2xlYW47CiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7CiAgICB0aGlzLnZhbHVlID0gIiI7CiAgICB0aGlzLnNob3dQb3BvdmVyID0gZmFsc2U7CiAgICB0aGlzLnRpcFN1Y2Nlc3MgPSBmYWxzZTsKCiAgfQoKICBmaWx0ZXIoZXZ0OiBhbnkpewogICAgaWYoZXZ0LmtleUNvZGUgPT09IDY5KXsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CiAgfQoKICBjaGVja1ZhbHVlKCl7CiAgICB0aGlzLmRpc2FibGVkID0gIXRoaXMudmFsdWUgJiYgIXRoaXMudmFsdWUubGVuZ3RoIHx8IHRoaXMudmFsdWUgPT09ICIwIjsKICB9CgogYXN5bmMgc3VibWl0KCl7CiAgIGNvbnN0IGFtb3VudCA9IHBhcnNlRmxvYXQodGhpcy52YWx1ZSkKICAgY29uc3QgeCA9YXdhaXQgIHRoaXMuJGVtaXQoJ29uU3VibWl0JyxhbW91bnQsdGhpcy51c2VySWQsdGhpcy5yZXZpZXdJZCk7CiAgIGNvbnNvbGUuY2xlYXIoKTsKICAgY29uc29sZS5sb2coeCk7CiAgIGlmICh4LnRpcFN0YXR1cykgewogICAgIHRoaXMudGlwU3VjY2VzcyA9IHRydWU7CiAgIH0KCgogIH0KICBzaG93KCl7CiAgICB0aGlzLiRidk1vZGFsLnNob3coInRpcF9tb2RhbF8iICsgdGhpcy5yZXZpZXdJZCk7CiAgICB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKCk7CiAgfQogIGNhbGN1bGF0ZVBvc2l0aW9uKCl7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgY29uc3QgdHJpZ2dlcjogYW55ID0gdGhpcy4kcmVmc1sndGlwX21vZGFsX3RyaWdnZXJfJyArIHRoaXMucmV2aWV3SWRdOwogICAgICBjb25zdCBwb3NpdGlvbiA9IHRyaWdnZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIGNvbnN0IG1vZGFsID0gKHRoaXMuJHJlZnNbInRpcF9tb2RhbF8iICsgdGhpcy5yZXZpZXdJZF0gYXMgYW55KS4kcmVmc1snY29udGVudCddOwogICAgICBtb2RhbCEucGFyZW50RWxlbWVudCEuc3R5bGUudG9wID0gcGFyc2VJbnQocG9zaXRpb24udG9wKSAtIDIwMCArICJweCI7CiAgICAgIG1vZGFsIS5wYXJlbnRFbGVtZW50IS5zdHlsZS5yaWdodCA9IHBhcnNlSW50KHRyaWdnZXIub2Zmc2V0TGVmdCkgLSAxODAgKyAicHgiOwogICAgfSwgMjApOwogIH0KCiAgdG9nZ2xlUG9wb3ZlcigpIHsKICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9wb3Zlci1vdmVybGF5LSIgKyB0aGlzLnJldmlld0lkKTsKICAgIHRoaXMuc2hvd1BvcG92ZXIgPSAhdGhpcy5zaG93UG9wb3ZlcjsKICAgIGlmKHRoaXMuc2hvd1BvcG92ZXIgPT0gdHJ1ZSkgewogICAgICBpZiAob3ZlcmxheSkgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCJ0aXAtcG9wb3Zlci1vdmVybGF5LS1vcGVuZWQiKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoInRpcC1wb3BvdmVyLW92ZXJsYXktLW9wZW5lZCIpOwogICAgfQogIH0KCn0K"},{"version":3,"sources":["Tip.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Tip.vue","sourceRoot":"src/components/Tip","sourcesContent":["<template>\n  <div class=\"tip\">\n    <button class=\"btn tip-trigger p-0\" :id=\"'popover-target-' + reviewId\" @click=\"togglePopover\">\n      <font-awesome-icon :icon=\"['fal', 'coin']\" />\n    </button>\n\n    <!-- <button class=\"btn tip-trigger p-0\" @click=\"show\" :ref=\"'tip_modal_trigger_' + reviewId\">\n      <font-awesome-icon :icon=\"['fal', 'coin']\" />\n    </button> -->\n\n<b-popover :target=\"'popover-target-' + reviewId\" triggers=\"click\" placement=\"top\" :show.sync=\"showPopover\">\n      <div class=\"icon\">\n        <font-awesome-icon :icon=\"['far', 'smile-wink']\" />\n      </div>\n      <div class=\"tip-title\">\n        <b v-show=\"!tipSuccess\">Leave a Tip!</b>\n        <b v-show=\"tipSuccess\">Thanks!</b>\n      </div>\n\n      <div class=\"input-group tip-form\" v-show=\"!tipSuccess\">\n        <div class=\"input-group-prepend\">\n          <span class=\"input-group-text\">$</span>\n        </div>\n        <input type=\"number\" v-model=\"value\" @keydown=\"filter\" @keyup=\"checkValue\" class=\"form-control\" placeholder=\"0.00\" aria-label=\"Tip\" aria-describedby=\"tip-button\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-secondary\" type=\"button\" id=\"tip-button\" :disabled=\"disabled\" @click=\"submit\"><font-awesome-icon :icon=\"['far', 'check']\" /></button>\n        </div>\n      </div>\n\n      <!-- <div class=\"tip-btn-con\">\n        <div class=\"tip-inner\">\n          <button class=\"btn tip-btn\" :disabled=\"disabled\" @click=\"submit\"></button>\n          <input type=\"hidden\" :value=\"userId\" id=\"user-id\">\n          <input type=\"number\" v-model=\"value\" @keydown=\"filter\" @keyup=\"checkValue\" class=\"tip-input\">\n          <span class=\"currency\" :class=\"{show: disabled}\">{{ currency }}</span>\n        </div>\n      </div> -->\n  </b-popover>\n  \n  <div class=\"tip-popover-overlay\" :id=\"'popover-overlay-' + reviewId\" @click=\"togglePopover\"></div>\n\n  </div>\n</template>\n<style lang=\"scss\" src=\"./Tip.scss\"></style>\n<script lang=\"ts\">\nimport {Component, Vue, Prop} from \"vue-property-decorator\";\n\n@Component\nexport default class Tip extends Vue{\n  @Prop({default: \"USD\"}) currency!: string;\n  @Prop() reviewId!: string;\n  @Prop() userId!: string;\n  @Prop() tipStatus!: boolean;\n  disabled: boolean;\n  value: string;\n  showPopover: boolean;\n  tipSuccess: boolean;\n  constructor() {\n    super();\n    this.disabled = true;\n    this.value = \"\";\n    this.showPopover = false;\n    this.tipSuccess = false;\n\n  }\n\n  filter(evt: any){\n    if(evt.keyCode === 69){\n      evt.preventDefault();\n    }\n  }\n\n  checkValue(){\n    this.disabled = !this.value && !this.value.length || this.value === \"0\";\n  }\n\n async submit(){\n   const amount = parseFloat(this.value)\n   const x =await  this.$emit('onSubmit',amount,this.userId,this.reviewId);\n   console.clear();\n   console.log(x);\n   if (x.tipStatus) {\n     this.tipSuccess = true;\n   }\n\n\n  }\n  show(){\n    this.$bvModal.show(\"tip_modal_\" + this.reviewId);\n    this.calculatePosition();\n  }\n  calculatePosition(){\n    setTimeout(() => {\n      const trigger: any = this.$refs['tip_modal_trigger_' + this.reviewId];\n      const position = trigger.getBoundingClientRect();\n      const modal = (this.$refs[\"tip_modal_\" + this.reviewId] as any).$refs['content'];\n      modal!.parentElement!.style.top = parseInt(position.top) - 200 + \"px\";\n      modal!.parentElement!.style.right = parseInt(trigger.offsetLeft) - 180 + \"px\";\n    }, 20);\n  }\n\n  togglePopover() {\n    const overlay = document.getElementById(\"popover-overlay-\" + this.reviewId);\n    this.showPopover = !this.showPopover;\n    if(this.showPopover == true) {\n      if (overlay) overlay.classList.add(\"tip-popover-overlay--opened\");\n    } else {\n      if (overlay) overlay.classList.remove(\"tip-popover-overlay--opened\");\n    }\n  }\n\n}\n</script>\n"]}]}