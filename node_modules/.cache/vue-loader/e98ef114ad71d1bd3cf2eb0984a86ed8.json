{"remainingRequest":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cmurray/britevue-frontend/src/components/Login/Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cmurray/britevue-frontend/src/components/Login/Login.vue","mtime":1628691920056},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtWdWUsIENvbXBvbmVudCwgSW5qZWN0fSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0ICIuL0xvZ2luLnNjc3MiOwoKaW1wb3J0IHtVc2VyU2VydmljZX0gZnJvbSAiQC9zZXJ2aWNlcy9Vc2VyU2VydmljZSI7CmNvbnN0IEhhbmRjYXNoQXBwSUQgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0hDX0FQUF9JRAoKQENvbXBvbmVudApleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpbiBleHRlbmRzIFZ1ZSB7CiAgdXNlcm5hbWU6IHN0cmluZzsKICBwYXNzd29yZDogc3RyaW5nOwogIEBJbmplY3QoJ3VzZXJTZXJ2aWNlJykKICB1c2VyX3NlciE6IFVzZXJTZXJ2aWNlOwogIGVycm9yX21lc3NhZ2U6IHN0cmluZzsKICBvcGVuOiBib29sZWFuOwogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMudXNlcm5hbWUgPSAiIjsKICAgIHRoaXMucGFzc3dvcmQgPSAiIjsKICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgdGhpcy5lcnJvcl9tZXNzYWdlID0gIiI7CiAgfQogIHNob3dNb2RhbCgpewogICAgdGhpcy5vcGVuID0gdHJ1ZTsKICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygibG9naW4tbW9kYWwiKTsKICB9CiAgYXN5bmMgbG9naW5IYW5kY2FzaCgpIHsKICAgIGNvbnN0IGV4cGlyZUluID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyA1ICogNjAgKiAxMDAwKTsKICAgIHRoaXMuJGNvb2tpZXMuc2V0KCdsb2dpblVzZXInLCB0cnVlLCBleHBpcmVJbikKICAgIHRoaXMuJGNvb2tpZXMuc2V0KCdsb2dpblBhdGgnLCB0aGlzLiRyb3V0ZS5wYXRoLCBleHBpcmVJbikKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vYXBwLmhhbmRjYXNoLmlvLyMvYXV0aG9yaXplQXBwP2FwcElkPScgKyBIYW5kY2FzaEFwcElECiAgfQogIGFzeW5jIGxvZ2luKCl7CiAgICB0aGlzLmVycm9yX21lc3NhZ2UgPSAiIjsKICAgIGxldCBlcnIgPSBudWxsOwogICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy51c2VyX3Nlci5sb2dpbih0aGlzLnVzZXJuYW1lLCB0aGlzLnBhc3N3b3JkKS5jYXRjaChlID0+IGVyciA9IGUpOwogICAgaWYoZXJyIHx8IHJlcy5zdGF0dXMgPT09IDQwMCl7CiAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9ICJQbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFscy4iOwogICAgICByZXR1cm47CiAgICB9CiAgICB0aGlzLnVzZXJfc2VyLmN1cnJlbnRVc2VyID0gcmVzOwogICAgdGhpcy4kYnZNb2RhbC5oaWRlKCJsb2dpbi1tb2RhbCIpOwogICAgdGhpcy5vcGVuID0gZmFsc2U7CiAgICB0aGlzLiRlbWl0KCdvbkxvZ2luJywgdHJ1ZSk7CiAgfQogIGlzT3BlbigpIHsKICAgIHJldHVybiB0aGlzLm9wZW4KICB9CiAgc2lnbnVwKCl7CiAgICB0aGlzLm9wZW4gPSBmYWxzZTsKICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgibG9naW4tbW9kYWwiKTsKICAgIHRoaXMuJGVtaXQoJ29wZW5TaWdudXAnLCB0cnVlKTsKICB9Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/Login","sourcesContent":["<template>\n  <b-modal id=\"login-modal\" title=\"Login to Britevue\" centered>\n    <template #modal-header=\"{close}\">\n      <button type=\"button\" class=\"close\" aria-label=\"Close\" @click=\"close\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n      <b-container fluid>\n        <!-- Emulate built in modal header close button action -->\n        <b-row class=\"no-gutters\">\n          <b-col cols=\"12\" class=\"text-center mb-4\">\n            <h4 class=\"modal-title\">Login to Britevue</h4>\n          </b-col>\n        </b-row>\n      </b-container>\n    </template>\n    <b-container fluid>\n      <b-row>\n        <b-col cols=\"12\">\n          <b-form-input v-model=\"username\" onkeyup=\"this.value = this.value.toLowerCase()\" placeholder=\"Username\"></b-form-input>\n        </b-col>\n        <b-col cols=\"12\">\n          <b-form-input type=\"password\" v-model=\"password\" placeholder=\"Password\"></b-form-input>\n        </b-col>\n      </b-row>\n    </b-container>\n    <template #modal-footer=\"{  }\">\n      <b-container fluid>\n        <b-row>\n          <b-col cols=\"12\">\n            <!-- Emulate built in modal footer ok and cancel button actions -->\n            <b-button  variant=\"primary\" @click=\"login\">\n              Login\n            </b-button>\n            <p class=\"text-danger\">{{error_message}}</p>\n          </b-col>\n          <b-col cols=\"12\">\n            <div class=\"singup-text\">\n              <p>Or login with your</p>\n              <div @click=\"loginHandcash\" id=\"connectButtonSignup\">\n                HandCash\n              </div>\n            </div>\n          </b-col>\n          <b-col cols=\"12\">\n            <div class=\"singup-text\">\n              <p>If you donâ€™t have an account yet... <span v-on:click=\"signup()\">Sign Up</span></p>\n            </div>\n          </b-col>\n        </b-row>\n      </b-container>\n    </template>\n  </b-modal>\n</template>\n<script lang=\"ts\">\nimport {Vue, Component, Inject} from 'vue-property-decorator';\nimport \"./Login.scss\";\n\nimport {UserService} from \"@/services/UserService\";\nconst HandcashAppID = process.env.VUE_APP_HC_APP_ID\n\n@Component\nexport default class Login extends Vue {\n  username: string;\n  password: string;\n  @Inject('userService')\n  user_ser!: UserService;\n  error_message: string;\n  open: boolean;\n  constructor() {\n    super();\n    this.username = \"\";\n    this.password = \"\";\n    this.open = false;\n    this.error_message = \"\";\n  }\n  showModal(){\n    this.open = true;\n    this.$bvModal.show(\"login-modal\");\n  }\n  async loginHandcash() {\n    const expireIn = new Date(new Date().getTime() + 5 * 60 * 1000);\n    this.$cookies.set('loginUser', true, expireIn)\n    this.$cookies.set('loginPath', this.$route.path, expireIn)\n    window.location.href = 'https://app.handcash.io/#/authorizeApp?appId=' + HandcashAppID\n  }\n  async login(){\n    this.error_message = \"\";\n    let err = null;\n    const res = await this.user_ser.login(this.username, this.password).catch(e => err = e);\n    if(err || res.status === 400){\n      this.error_message = \"Please check your credentials.\";\n      return;\n    }\n    this.user_ser.currentUser = res;\n    this.$bvModal.hide(\"login-modal\");\n    this.open = false;\n    this.$emit('onLogin', true);\n  }\n  isOpen() {\n    return this.open\n  }\n  signup(){\n    this.open = false;\n    this.$bvModal.hide(\"login-modal\");\n    this.$emit('openSignup', true);\n  }\n}\n</script>\n"]}]}