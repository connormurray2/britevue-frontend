{"remainingRequest":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cmurray/britevue-frontend/src/views/Dashboard/NewReview/NewReview.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/cmurray/britevue-frontend/src/views/Dashboard/NewReview/NewReview.vue","mtime":1628691920057},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cmurray/britevue-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHtDb21wb25lbnQsIEluamVjdCwgVnVlfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IFRpcCBmcm9tICJAL2NvbXBvbmVudHMvVGlwL1RpcC52dWUiOwppbXBvcnQgTW9kYWwgZnJvbSAiQC9jb21wb25lbnRzL01vZGFsL01vZGFsLnZ1ZSI7CmltcG9ydCB7VXNlclNlcnZpY2V9IGZyb20gIkAvc2VydmljZXMvVXNlclNlcnZpY2UiOwppbXBvcnQge1Jldmlld3NTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL1Jldmlld3NTZXJ2aWNlIjsKaW1wb3J0IHtQbGFjZVNlcnZpY2V9IGZyb20gIkAvc2VydmljZXMvUGxhY2VTZXJ2aWNlIjsKaW1wb3J0IHtJVXNlcn0gZnJvbSAiQC9pbnRlcmZhY2VzL0lVc2VyIjsKaW1wb3J0IHtGYXZvcml0ZXNTZXJ2aWNlfSBmcm9tICJAL3NlcnZpY2VzL0Zhdm9yaXRlc1NlcnZpY2UiOwoKCkBDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIFRpcCwKICAgIE1vZGFsLAogIH0sCiAgbWV0YUluZm86ewogICAgdGl0bGU6ICJCcml0ZXZ1ZSAtIEJsb2NrY2hhaW4gdmVyaWZpZWQgcmV2aWV3cyB3aGVyZSByZXZpZXdlcnMgZ2V0IHBhaWQiLAogICAgbWV0YTogWwogICAgICB7IG5hbWU6J3RpdGxlJyxjb250ZW50OidCcml0ZXZ1ZSAtIEJsb2NrY2hhaW4gdmVyaWZpZWQgcmV2aWV3cyB3aGVyZSByZXZpZXdlcnMgZ2V0IHBhaWQnfSwKICAgICAgeyBuYW1lOiAnZGVzY3JpcHRpb24nLCBjb250ZW50OiAgJ0JlZ2luIGVhcm5pbmcgbW9uZXkgZm9yIHlvdXIgcmV2aWV3cyBvZiBidXNpbmVzc2VzIGFuZCBwbGFjZXMgd2l0aCBCcml0ZXZ1ZS4gV2Ugd2lsbCBwYXkgeW91IGZvciBpbmZvcm1hdGlvbiBhYm91dCB5b3VyIGhvbWV0b3duIHRvIGdldCBzdGFydGVkISd9LAogICAgICB7IGl0ZW1wcm9wOiAnbmFtZScsIGNvbnRlbnQ6ICJCcml0ZXZ1ZSJ9LAogICAgICB7IGl0ZW1wcm9wOiAnZGVzY3JpcHRpb24nLCBjb250ZW50OiAiQmVnaW4gZWFybmluZyBtb25leSBmb3IgeW91ciByZXZpZXdzIG9mIGJ1c2luZXNzZXMgYW5kIHBsYWNlcyB3aXRoIEJyaXRldnVlLiBXZSB3aWxsIHBheSB5b3UgZm9yIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgaG9tZXRvd24gdG8gZ2V0IHN0YXJ0ZWQhIn0sCiAgICAgIHsgaXRlbXByb3A6ICdpbWFnZScsIGNvbnRlbnQ6ICByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKX0sCiAgICAgIHsgcHJvcGVydHk6ICdvZzp0eXBlJywgY29udGVudDogIndlYnNpdGUifSwKICAgICAgeyBwcm9wZXJ0eTogJ29nOnVybCcsIGNvbnRlbnQ6ICJodHRwczovL2JyaXRldnVlLmNvbS8ifSwKICAgICAgeyBwcm9wZXJ0eTogJ29nOnRpdGxlJywgY29udGVudDogIkJyaXRldnVlIC0gQmxvY2tjaGFpbiB2ZXJpZmllZCByZXZpZXdzIHdoZXJlIHJldmlld2VycyBnZXQgcGFpZCJ9LAogICAgICB7IHByb3BlcnR5OiAnb2c6ZGVzY3JpcHRpb24nLCBjb250ZW50OiAiQmVnaW4gZWFybmluZyBtb25leSBmb3IgeW91ciByZXZpZXdzIG9mIGJ1c2luZXNzZXMgYW5kIHBsYWNlcyB3aXRoIEJyaXRldnVlLiBXZSB3aWxsIHBheSB5b3UgZm9yIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgaG9tZXRvd24gdG8gZ2V0IHN0YXJ0ZWQhIn0sCiAgICAgIHsgcHJvcGVydHk6ICdvZzppbWFnZScsIGNvbnRlbnQ6ICByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKX0sCiAgICAgIHsgcHJvcGVydHk6ICdvZzpzaXRlX25hbWUnLCBjb250ZW50OiAnYnJpdGV2dWUnfSwKICAgICAgeyBuYW1lOiAndHdpdHRlcjpjYXJkJywgY29udGVudDogInN1bW1hcnlfbGFyZ2VfaW1hZ2UifSwKICAgICAgeyBuYW1lOiAndHdpdHRlcjp1cmwnLCBjb250ZW50OiAiaHR0cHM6Ly9icml0ZXZ1ZS5jb20vIn0sCiAgICAgIHsgbmFtZTogJ3R3aXR0ZXI6dGl0bGUnLCBjb250ZW50OiAiQnJpdGV2dWUgLSBCbG9ja2NoYWluIHZlcmlmaWVkIHJldmlld3Mgd2hlcmUgcmV2aWV3ZXJzIGdldCBwYWlkIn0sCiAgICAgIHsgbmFtZTogJ3R3aXR0ZXI6ZGVzY3JpcHRpb24nLCBjb250ZW50OiAiQmVnaW4gZWFybmluZyBtb25leSBmb3IgeW91ciByZXZpZXdzIG9mIGJ1c2luZXNzZXMgYW5kIHBsYWNlcyB3aXRoIEJyaXRldnVlLiBXZSB3aWxsIHBheSB5b3UgZm9yIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgaG9tZXRvd24gdG8gZ2V0IHN0YXJ0ZWQhIn0sCiAgICAgIHsgbmFtZTogJ3R3aXR0ZXI6aW1hZ2UnLCBjb250ZW50OiByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvbG9nb19ibGFjay5zdmcnKSB9LAogICAgXQogIH0KCn0pCgpleHBvcnQgZGVmYXVsdCBjbGFzcyBOZXdSZXZpZXcgZXh0ZW5kcyBWdWUgewogIHBsYWNlX2lkOiBzdHJpbmc7CiAgcGxhY2VfbmFtZTogc3RyaW5nOwogIGZsYXNoOiBhbnk7CiAgc3VibWl0dGluZ1JldmlldzogYm9vbGVhbjsKICByZXZpZXdfYm9keTogc3RyaW5nOwogIHJldmlld19wYXl3YWxsOiBudW1iZXI7CiAgQEluamVjdCgncmV2aWV3c1NlcnZpY2UnKQogIHJldmlld19zZXIhOiBSZXZpZXdzU2VydmljZTsKICBASW5qZWN0KCd1c2VyU2VydmljZScpCiAgdXNlcl9zZXIhOiBVc2VyU2VydmljZTsKCiAgQEluamVjdCgncGxhY2VTZXJ2aWNlJykKICBwbGFjZV9zZXIhOiBQbGFjZVNlcnZpY2U7CgogIEBJbmplY3QoJ2Zhdm9yaXRlc1NlcnZpY2UnKQogIGZhdm9yaXRlc19zZXIhOiBGYXZvcml0ZXNTZXJ2aWNlOwoKICBzaG93SGFuZGNhc2hNb2RhbDogYm9vbGVhbjsKICB1c2VyOiBJVXNlciB8IG51bGwgPSBudWxsOwogIHJlcXVlc3RFcnJvck1lc3NhZ2U6IHN0cmluZzsKICBsYXRlc3RUeDogc3RyaW5nOwogIG9wdGlvbnM6IGFueTsKICBzdGVwOiBudW1iZXI7CiAgZmlsZXM6IEZpbGVbXSA9IFtdOwogIGltYWdlSGFzaGVzOiBvYmplY3RbXSA9IFtdOwogIHVwbG9hZFByb2dyZXNzOiBudW1iZXI7CiAgc2hvd1VwbG9hZFByb2dyZXNzQmFyOiBib29sZWFuOwogIGRyYWdJbWFnZTogbnVtYmVyOwoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgICBpZiAodHlwZW9mIHRoaXMuJHJvdXRlLnBhcmFtcy5wbGFjZV9pZCA9PSAndW5kZWZpbmVkJykgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7bmFtZTogImRhc2hib2FyZCJ9KTsKICAgIH0KICAgIHRoaXMucGxhY2VfaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGxhY2VfaWQ7CiAgICB0aGlzLnBsYWNlX25hbWUgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGxhY2VfbmFtZTsKCiAgICB0aGlzLnJldmlld19ib2R5ID0gJyc7CiAgICB0aGlzLnJldmlld19wYXl3YWxsID0gMC4wMAogICAgdGhpcy5zdWJtaXR0aW5nUmV2aWV3ID0gZmFsc2U7CiAgICB0aGlzLnNob3dIYW5kY2FzaE1vZGFsID0gZmFsc2U7CiAgICB0aGlzLnJlcXVlc3RFcnJvck1lc3NhZ2UgPSAnJzsKICAgIHRoaXMubGF0ZXN0VHggPSAnJzsKICAgIGNvbnN0IHVzZXIgPSB0aGlzLnVzZXJfc2VyLmdldEN1cnJlbnRVc2VyKCk7CiAgICBpZiAodXNlcikgewogICAgICB0aGlzLnVzZXIgPSB1c2VyOwogICAgfQogICAgdGhpcy5vcHRpb25zID0gewogICAgICB0ZXh0OiB7CiAgICAgICAgY29sb3I6ICcjRkZGRkZGJywKICAgICAgICBzaGFkb3dFbmFibGU6IHRydWUsCiAgICAgICAgc2hhZG93Q29sb3I6ICcjMDAwMDAwJywKICAgICAgICBmb250U2l6ZTogMTQsCiAgICAgICAgZm9udEZhbWlseTogJ0hlbHZldGljYScsCiAgICAgICAgZHluYW1pY1Bvc2l0aW9uOiBmYWxzZSwKICAgICAgICBoaWRlVGV4dDogZmFsc2UKICAgICAgfSwKICAgICAgcHJvZ3Jlc3M6IHsKICAgICAgICBjb2xvcjogJyNjYzdhMDAnLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMzMzMzMzMnCiAgICAgIH0sCiAgICAgIGxheW91dDogewogICAgICAgIGhlaWdodDogMzUsCiAgICAgICAgd2lkdGg6IDE0MCwKICAgICAgICB2ZXJ0aWNhbFRleHRBbGlnbjogNjEsCiAgICAgICAgaG9yaXpvbnRhbFRleHRBbGlnbjogNDMsCiAgICAgICAgemVyb09mZnNldDogMCwKICAgICAgICBzdHJva2VXaWR0aDogMzAsCiAgICAgICAgcHJvZ3Jlc3NQYWRkaW5nOiAwLAogICAgICAgIHR5cGU6ICdsaW5lJwogICAgICB9CiAgICB9CiAgICB0aGlzLnVwbG9hZFByb2dyZXNzID0gMDsKICAgIHRoaXMuc2hvd1VwbG9hZFByb2dyZXNzQmFyID0gZmFsc2U7CiAgICB0aGlzLnN0ZXAgPSAxOwogICAgdGhpcy5kcmFnSW1hZ2UgPSAwOwogIH0KCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIGlmICh0eXBlb2YgdGhpcy4kcm91dGUucGFyYW1zLnJldmlld19pZCAhPSAndW5kZWZpbmVkJykgewogICAgICAvL2ZldGNoIHJldmlldyBoZXJlCiAgICAgIGxldCBmZXRjaGVkX3JldmlldyA9IGF3YWl0IHRoaXMucmV2aWV3X3Nlci5nZXRSZXZpZXcodGhpcy4kcm91dGUucGFyYW1zLnJldmlld19pZCk7CgogICAgICBpZiAoZmV0Y2hlZF9yZXZpZXcuc3RhdHVzID09IDIwMCkgewogICAgICAgIGZldGNoZWRfcmV2aWV3ID0gZmV0Y2hlZF9yZXZpZXcuZGF0YTsKICAgICAgICB0aGlzLnJldmlld19ib2R5ID0gZmV0Y2hlZF9yZXZpZXcucmV2aWV3Qm9keTsKICAgICAgICBpZiAoZmV0Y2hlZF9yZXZpZXcucGF5d2FsbCAhPSBudWxsKSB7CiAgICAgICAgICB0aGlzLnJldmlld19wYXl3YWxsID0gZmV0Y2hlZF9yZXZpZXcucGF5d2FsbC5jb3N0OwogICAgICAgIH0KICAgICAgICB0aGlzLnN0YXJzWydxdWFsaXR5J10ucmF0ZSA9IGZldGNoZWRfcmV2aWV3LnJhdGluZ3MucXVhbGl0eTsKICAgICAgICB0aGlzLnN0YXJzWydleHBlcmllbmNlJ10ucmF0ZSA9IGZldGNoZWRfcmV2aWV3LnJhdGluZ3MuZXhwZXJpZW5jZTsKICAgICAgICB0aGlzLnN0YXJzWyd2YWx1ZSddLnJhdGUgPSBmZXRjaGVkX3Jldmlldy5yYXRpbmdzLnZhbHVlOwogICAgICAgIHRoaXMuY2FsY3VsYXRlUmF0aW5nKCk7CiAgICAgICAgdGhpcy5sYXRlc3RUeCA9IGZldGNoZWRfcmV2aWV3LmxhdGVzdFR4OwoKICAgICAgfQogICAgfQogIH0KCiAgc2hvd0hlbHBNb2RhbCgpIHsKICAgICh0aGlzLiRyZWZzWydtb2RhbC1oZWxwLXRleHQnXSBhcyBhbnkpLnNob3coKTsKICB9CgogIGFzeW5jIG9uU3VibWl0KGU6IGFueSkgewogICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgdGhpcy5yZXF1ZXN0RXJyb3JNZXNzYWdlID0gJyc7CiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvck1lc3NhZ2UnKQogICAgaWYgKGVsID09IG51bGwpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsZWQgdG8gZmluZCBlcnJvck1lc3NhZ2UgZGl2JykKICAgIH0KICAgIGlmICh0aGlzLnJldmlld19ib2R5ID09ICIiKSB7CiAgICAgIGVsLmlubmVySFRNTCA9ICdSZXZpZXcgQm9keSBpcyByZXF1aXJlZCc7CiAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICBpZiAodGhpcy5zdGFyc1sncXVhbGl0eSddLnJhdGUgPT0gbnVsbCB8fCB0aGlzLnN0YXJzWydleHBlcmllbmNlJ10ucmF0ZSA9PSBudWxsIHx8IHRoaXMuc3RhcnNbJ3ZhbHVlJ10ucmF0ZSA9PSBudWxsKSB7CiAgICAgIGVsLmlubmVySFRNTCA9ICdQbGVhc2UgcHJvdmlkZSByYXRpbmdzIGJlZm9yZSBzdWJtaXR0aW5nIHJldmlldyc7CiAgICAgIHJldHVybiAnJzsKICAgIH0KICAgIGVsLmlubmVySFRNTCA9ICcnOwogICAgaWYgKHRoaXMudXNlciA9PSBudWxsKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY2Fubm90IGNyZWF0ZSByZXZpZXcgd2l0aCBubyB1c2VyJykKICAgIH0KICAgIHRoaXMuc3VibWl0dGluZ1JldmlldyA9IHRydWUKICAgIGF3YWl0IHRoaXMudXBsb2FkSW1hZ2VzKCk7CgogICAgaWYgKHR5cGVvZiB0aGlzLiRyb3V0ZS5wYXJhbXMucmV2aWV3X2lkICE9ICd1bmRlZmluZWQnKSB7CiAgICAgIGNvbnN0IHJldmlldyA9IGF3YWl0IHRoaXMucmV2aWV3X3Nlci5lZGl0UmV2aWV3KHRoaXMuJHJvdXRlLnBhcmFtcy5yZXZpZXdfaWQsIHRoaXMubGF0ZXN0VHgsIHRoaXMudXNlciwgdGhpcy5wbGFjZV9pZCwgdGhpcy5yZXZpZXdfYm9keSwgdGhpcy5zdGFycywgdGhpcy5pbWFnZUhhc2hlcywgdGhpcy5yZXZpZXdfcGF5d2FsbCk7CgogICAgICBpZiAocmV2aWV3LnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLmZsYXNoKCdZb3VyIHJldmlldyBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgdXBkYXRlZCEnLCAnc3VjY2VzcycsIHt0aW1lb3V0OiAxMDAwMH0pOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICduYW1lJzogJ2Rhc2hib2FyZCcsCiAgICAgICAgICBwYXJhbXM6IHsncmV2aWV3JzogJ3RydWUnLCAncGxhY2VfbmFtZSc6IHRoaXMucGxhY2VfbmFtZSwgJ3BsYWNlX2lkJzogdGhpcy5wbGFjZV9pZH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZsYXNoKCdZb3VyIHJldmlldyBmYWlsZWQgdG8gYmUgZWRpdGVkLCBwbGVhc2UgdHJ5IGFnYWluIGFuZCBpZiB5b3UgY29udGludWUgdG8gaGF2ZSBwcm9ibGVtcyBwbGVhc2UgY29udGFjdCBvdXIgc3VwcG9ydCB0ZWFtJywgJ2Vycm9yJywge3RpbWVvdXQ6IDEwMDAwfSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IHJldmlldyA9IGF3YWl0IHRoaXMucmV2aWV3X3Nlci5jcmVhdGVSZXZpZXcodGhpcy51c2VyLCB0aGlzLnBsYWNlX2lkLCB0aGlzLnJldmlld19ib2R5LCB0aGlzLnN0YXJzLCB0aGlzLmltYWdlSGFzaGVzLCB0aGlzLnJldmlld19wYXl3YWxsKTsKICAgICAgaWYgKHJldmlldy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdGhpcy5mbGFzaCgnWW91ciByZXZpZXcgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHN1Ym1pdHRlZCEnLCAnc3VjY2VzcycsIHt0aW1lb3V0OiAxMDAwMH0pOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICduYW1lJzogJ2Rhc2hib2FyZCcsCiAgICAgICAgICBwYXJhbXM6IHsncmV2aWV3JzogJ3RydWUnLCAncGxhY2VfbmFtZSc6IHRoaXMucGxhY2VfbmFtZSwgJ3BsYWNlX2lkJzogdGhpcy5wbGFjZV9pZH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChyZXZpZXcuc3RhdHVzID09IDU1NSkgewogICAgICAgIHRoaXMuc2hvd0hhbmRjYXNoTW9kYWwgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mbGFzaCgnWW91ciByZXZpZXcgZmFpbGVkIHRvIGJlIHN1Ym1pdHRlZCwgcGxlYXNlIHRyeSBhZ2FpbiBhbmQgaWYgeW91IGNvbnRpbnVlIHRvIGhhdmUgcHJvYmxlbXMgcGxlYXNlIGNvbnRhY3Qgb3VyIHN1cHBvcnQgdGVhbScsICdlcnJvcicsIHt0aW1lb3V0OiAxMDAwMH0pOwogICAgICB9CiAgICB9CiAgICB0aGlzLnN1Ym1pdHRpbmdSZXZpZXcgPSBmYWxzZQogIH0KCiAgYXN5bmMgdXBsb2FkSW1hZ2VzKCkgewogICAgdGhpcy5zdGVwID0gMTsKICAgIHRoaXMuc2hvd1VwbG9hZFByb2dyZXNzQmFyID0gdHJ1ZTsKICAgIGxldCBpID0gMDsKICAgIGxldCBzdGF0dXMgPSBmYWxzZTsKICAgIGNvbnN0IHByb2dyZXNzID0gMTAwIC8gKHRoaXMuZmlsZXMubGVuZ3RoKTsKICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDsgaSsrKSB7CgogICAgICAvL3VwbG9hZCBpbWFnZXMKICAgICAgY29uc3QgdXBsb2FkUGxhY2VJbWFnZSA9IGF3YWl0IHRoaXMucGxhY2Vfc2VyLnVwbG9hZFBsYWNlSW1hZ2UodGhpcy5maWxlc1tpXSwgdGhpcy5wbGFjZV9pZCk7CiAgICAgIGlmICh1cGxvYWRQbGFjZUltYWdlLnN0YXR1cyAhPSAyMDApIHsKICAgICAgICB0aGlzLmZsYXNoKHVwbG9hZFBsYWNlSW1hZ2UuZGF0YS5tZXNzYWdlLCAnZXJyb3InLCB7dGltZW91dDogNTAwMH0pOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmICh1cGxvYWRQbGFjZUltYWdlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICBzdGF0dXMgPSB0cnVlOwogICAgICAgIHRoaXMuaW1hZ2VIYXNoZXMucHVzaCh7J2hhc2gnOiB1cGxvYWRQbGFjZUltYWdlLmRhdGEuaGFzaCwgJ2lkJzogdXBsb2FkUGxhY2VJbWFnZS5kYXRhLmlkfSk7CiAgICAgICAgdGhpcy5mbGFzaCgnSW1hZ2UgaGFzIGJlZW4gdXBsb2FkZWQnLCAnc3VjY2VzcycsIHt0aW1lb3V0OiA1MDAwfSk7CiAgICAgIH0KICAgICAgdGhpcy51cGxvYWRQcm9ncmVzcyArPSBwYXJzZUludChwcm9ncmVzcy50b0ZpeGVkKDIpKTsKICAgIH0KICAgIHRoaXMuc2hvd1VwbG9hZFByb2dyZXNzQmFyID0gZmFsc2U7CgogIH0KCiAgc3RhcnM6IGFueSA9IHsKICAgIHF1YWxpdHk6IHsKICAgICAgdGl0bGU6ICJRdWFsaXR5IiwKICAgICAgc3RhcnM6IDUsCiAgICAgIGFjdGl2ZTogbnVsbCwKICAgICAgcmF0ZTogbnVsbCwKICAgIH0sCiAgICBleHBlcmllbmNlOiB7CiAgICAgIHRpdGxlOiAiRXhwZXJpZW5jZSIsCiAgICAgIHN0YXJzOiA1LAogICAgICBhY3RpdmU6IG51bGwsCiAgICAgIHJhdGU6IG51bGwsCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdGl0bGU6ICJWYWx1ZSIsCiAgICAgIHN0YXJzOiA1LAogICAgICBhY3RpdmU6IG51bGwsCiAgICAgIHJhdGU6IG51bGwsCiAgICB9CiAgfTsKICByYXRpbmdfZGVzY3JpcHRpb24gPSBbCiAgICAiQmFkIiwKICAgICJPa2F5IiwKICAgICJHb29kIiwKICAgICJWZXJ5IGdvb2QiLAogICAgIkV4Y2VsbGVudCIsCiAgXTsKICByYXRpbmdfcmVzdWx0ID0gIjAiOwoKICBzZXRBY3RpdmUodHlwZTogc3RyaW5nLCBzdGFyczogbnVtYmVyKSB7CiAgICB0aGlzLnN0YXJzW3R5cGVdLmFjdGl2ZSA9IHN0YXJzOwogIH0KCiAgY2xlYXJTdGFycyh0eXBlOiBzdHJpbmcpIHsKICAgIHRoaXMuc3RhcnNbdHlwZV0uYWN0aXZlID0gbnVsbDsKICB9CgogIHNldFJhdGUodHlwZTogc3RyaW5nLCBzdGFyczogbnVtYmVyKSB7CiAgICB0aGlzLnN0YXJzW3R5cGVdLnJhdGUgPSBzdGFyczsKICAgIHRoaXMuY2FsY3VsYXRlUmF0aW5nKCk7CiAgfQoKICBwYXl3YWxsQ2hhbmdlZChlOiBhbnkpIHsKICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gJycpIHsKICAgICAgdGhpcy5yZXZpZXdfcGF5d2FsbCA9IDAKICAgIH0KICB9CgogIGNhbGN1bGF0ZVJhdGluZygpIHsKICAgIGxldCB0b3RhbF9yYXRlZCA9IDA7CiAgICBmb3IgKGNvbnN0IHR5cGUgaW4gdGhpcy5zdGFycykgewogICAgICB0b3RhbF9yYXRlZCArPSB0aGlzLnN0YXJzW3R5cGVdLnJhdGU7CiAgICB9CiAgICB0aGlzLnJhdGluZ19yZXN1bHQgPSAodG90YWxfcmF0ZWQgLyAzKS50b0ZpeGVkKDEpOwogIH0KCiAgZ2V0Um91dGVQYXRoKG5hbWU6IHN0cmluZywgcGFyYW1ldGVyczogYW55KSB7CiAgICByZXR1cm4gdGhpcy4kcm91dGVyLnB1c2goe25hbWU6IG5hbWUsIHBhcmFtczogcGFyYW1ldGVyc30pOwogIH0KCiAgIGhhbmRsZUZpbGVEcm9wKGU6IGFueSkgewogICAgIHRoaXMuZHJhZ0ltYWdlID0gMTsKICAgIGNvbnN0IGRyb3BwZWRGaWxlcyA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgaWYgKCFkcm9wcGVkRmlsZXMpIHJldHVybjsKICAgIC8vIHRoaXMgdGlwLCBjb252ZXJ0IEZpbGVMaXN0IHRvIGFycmF5CiAgICAoWy4uLmRyb3BwZWRGaWxlc10pLmZvckVhY2goKGY6IGFueSkgPT4gewogICAgICB0aGlzLmZpbGVzLnB1c2goZik7CiAgICB9KTsKICAgIHRoaXMuc3RlcCA9IDI7CiAgfQoKICBoYW5kbGVGaWxlSW5wdXQoZTogYW55KSB7CgogICAgaWYgKHRoaXMuZHJhZ0ltYWdlID09IDApIHsKICAgICAgY29uc3QgaW5wdXRfZmlsZXMgPSBlLnRhcmdldC5maWxlczsKICAgICAgaWYgKCFpbnB1dF9maWxlcykgcmV0dXJuOwogICAgICAvLyB0aGlzIHRpcCwgY29udmVydCBGaWxlTGlzdCB0byBhcnJheQogICAgICAoWy4uLmlucHV0X2ZpbGVzXSkuZm9yRWFjaCgoZjogRmlsZSkgPT4gewogICAgICAgIHRoaXMuZmlsZXMucHVzaChmKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc3RlcCA9IDI7CiAgICB9CgogIH0KCiAgcmVtb3ZlRmlsZShmaWxlS2V5OiBhbnkpIHsKICAgIHRoaXMuZmlsZXMuc3BsaWNlKGZpbGVLZXksIDEpOwogICAgaWYgKHRoaXMuZmlsZXMubGVuZ3RoID09IDApIHsKICAgICAgdGhpcy5zdGVwID0gMTsKICAgIH0KICB9CgogIGZpbGVEcmFnSW4oKSB7CiAgICBjb25zb2xlLmxvZygnJyk7CiAgfQoKICBmaWxlRHJhZ091dCgpIHsKICAgIGNvbnNvbGUubG9nKCcnKTsKICB9CgogIHNob3dJbWFnZVVwbG9hZGVyKCkgewogICAgdGhpcy5zdGVwID0gMTsKICB9CgogIGhpZGVJbWFnZVVwbG9hZGVyKCkgewogICAgdGhpcy5zdGVwID0gMTsKICAgIHRoaXMuZmlsZXMgPSBbXTsKICB9CgogIGNyZWF0ZVVybChpbWFnZUZpbGU6IEZpbGUpIHsKICAgIHJldHVybiB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChpbWFnZUZpbGUpOwogIH0KCiAgYXN5bmMgYWRkRmF2b3JpdGVQbGFjZShwbGFjZV9pZDogYW55KSB7CiAgICBpZiAodGhpcy5jaGVja1VzZXJXYWxsZXQoKSkgewogICAgICBjb25zdCBhZGRfZmF2b3JpdGVfcGxhY2UgPSBhd2FpdCB0aGlzLmZhdm9yaXRlc19zZXIuYWRkRmF2b3JpdGUodGhpcy51c2VyIS5pZCwgJ2xvY2F0aW9uJywgcGxhY2VfaWQpOwogICAgICBpZiAoYWRkX2Zhdm9yaXRlX3BsYWNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLmZsYXNoKCdQbGFjZSBoYXMgYmVlbiBhZGRlZCB0byB5b3VyIGZhdm9yaXRlcycsICdzdWNjZXNzJywge3RpbWVvdXQ6IDUwMDB9KTsKICAgICAgfQogICAgICBpZiAoYWRkX2Zhdm9yaXRlX3BsYWNlLnN0YXR1cyA9PSA0MDkpIHsKICAgICAgICB0aGlzLmZsYXNoKCdZb3UgaGF2ZSBhbHJlYWR5IGFkZGVkIHRoaXMgcGxhY2UgYXMgYSBmYXZvcml0ZScsICdlcnJvcicsIHt0aW1lb3V0OiA1MDAwfSk7CiAgICAgIH0KICAgIH0KICB9CgogIGNoZWNrVXNlcldhbGxldCgpIHsKICAgIGlmICh0aGlzLnVzZXIpIHsKICAgICAgaWYgKHRoaXMudXNlci53YWxsZXQpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9CiAgY2hhbmdlRHJhZ1ZhbHVlKCl7CiAgICB0aGlzLmRyYWdJbWFnZT0wOwogIH0KfQo="},{"version":3,"sources":["NewReview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewReview.vue","sourceRoot":"src/views/Dashboard/NewReview","sourcesContent":["<template>\n  <div class=\"new-review py-5\">\n    <div class=\"container\">\n      <div class=\"alert-container\">\n        <flash-message class=\"myCustomClass\"></flash-message>\n      </div>\n      <div class=\"text-center mt-4\">\n        <b-modal ref=\"modal-help-text\" title=\"Why set a paywall?\" hide-footer>\n          <p>You have the option to charge other users to read your review. The\n          user will simply know other user's votes on the review and your user\n          reputation. If you have no reputation on the site, it is not very\n          likely a user will spend a lot of money to view your review. We\n          recommend leaving some reviews without a paywall to build up your\n          reputation before charging other users to view your content.</p>\n        </b-modal>\n      </div>\n      <form @submit=\"onSubmit\" data-vv-scope=\"contact-form\">\n\n        <div class=\"row align-items-center\">\n          <div class=\"col-12 col-md-auto\">\n            <h2 @click=\"getRoutePath('place',{'id':place_id})\" class=\"place-detail__title\">{{ place_name }}</h2>\n          </div>\n          <div class=\"col-12 col-md place-detail__title-actions\">\n            <button v-on:click=\"addFavoritePlace(place_id)\" class=\"btn btn-link custom-tooltip\">\n              <font-awesome-icon :icon=\"['far', 'heart']\"/>\n              <span v-if=\"!checkUserWallet()\" class=\"custom-tooltip-text custom-tooltip-text-top\">Connect a wallet to your account before you can add to favorite</span>\n            </button>\n          </div>\n        </div>\n            \n        <div class=\"row\">\n          <div class=\"col-12 col-lg-8\">\n            <div class=\"row rating\">\n              <div class=\"col\">\n                <div class=\"row\">\n                  <div class=\"col-12 col-lg mb-2 mb-lg-3\" v-for=\"(star_type, type_name) in stars\" :key=\"type_name\">\n                    <div class=\"rating-item\">\n                      <p class=\"rating-text\">{{ star_type.title }}</p>\n                      <ul class=\"rating-stars\" @mouseleave=\"clearStars(type_name)\">\n                        <li v-for=\"index in star_type.stars\" :key=\"index\" @mouseover=\"setActive(type_name, index)\"\n                            @click=\"setRate(type_name, index)\">\n                          <span class=\"star\"\n                                :class=\"{active: star_type.active >=index || star_type.rate >=index}\"></span>\n                        </li>\n                      </ul>\n                      <span class=\"rating-description\">{{\n                          rating_description[stars[type_name].active - 1] || rating_description[stars[type_name].rate - 1]\n                        }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-auto rating-result\">\n                <span class=\"icon\">\n                  <font-awesome-icon :icon=\"['far', 'chevron-right']\"/>\n                </span>\n                <h2> {{ rating_result }}</h2>\n              </div>\n            </div>\n            <div class=\"row mb-5\">\n              <div class=\"col\">\n                <textarea placeholder=\"Write your review here\" v-model=\"review_body\" id=\"review-body\" name=\"review-body\"\n                          class=\"form-control review-body\"></textarea>\n              </div>\n            </div>\n            <div class=\"row form-container\">\n              <div class=\"col-12 col-sm-6 col-md-5 col-lg-4 col-xl-3\">\n                <progress-bar\n                    :options=\"options\"\n                    :value=\"uploadProgress\"\n                    v-show=\"showUploadProgressBar\"\n                />\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-12 mb-4\">\n                <div v-if=\"step==1\" class=\"image-uploader\"\n                    @dragover.prevent @drop.prevent=\"handleFileDrop($event)\">\n                  <div id=\"image-uploader\" class=\"image-uploader__drag-container\" @dragleave=\"fileDragOut\" @dragover=\"fileDragIn\"\n                      @drop=\"handleFileDrop($event)\">\n\n                              <div class=\"image-uploader__content\">\n                                <p class=\"image-uploader__title\">Drag your photo here</p>\n                                <div class=\"image-uploader__icon\">\n                                  <font-awesome-icon :icon=\"['fal', 'camera']\"/>\n                                </div>\n                                <button type=\"button\" class=\"btn btn-outline-primary\">Or Browse Files</button>\n                              </div>\n                              <input type=\"file\" name=\"file-input\" multiple=\"True\" class=\"image-uploader__input\"\n                          @change=\"handleFileInput($event)\">\n\n                    <ul style=\"display:none\">\n                      <li v-bind:key=\"index\" v-for=\"(file, index) in files\">\n                        {{ file.name }} ({{ file.size }} b)\n                        <button @click=\"removeFile(index)\" title=\"Remove\">X</button>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n                <div v-show=\"step==2\" id=\"images-container\" v-if=\"files.length > 0\" class=\"image-uploader-list row mx-n2\">\n                  <div v-bind:key=\"index\" v-for=\"(file, index) in files\" class=\"col-12 col-sm-6 col-lg-4 mb-3 px-2\">\n                    <div class=\"image-uploader-list__item\">\n                      <img\n                          :src=\"createUrl(file)\"\n                          class=\"image-uploader-list__item-image\">\n                      <span class=\"image-uploader-list__item-delete\" @click=\"removeFile(index)\">\n                            <font-awesome-icon class=\"image-uploader-list__item-delete-icon\" :icon=\"['far', 'trash-alt']\"/>\n                        </span>\n\n                      <!--<textarea class=\"mt-3\" placeholder=\"Add a caption\"></textarea>-->\n                    </div>\n                  </div>\n                </div>\n                <div v-if=\"step==2\">\n                  <div>\n                    <div class=\"image-uploader\" @dragover.prevent @drop.prevent>\n                      <div class=\"image-uploader__drag-container\" @dragleave=\"fileDragOut\"\n                          @dragover=\"fileDragIn\" @drop=\"handleFileDrop($event)\">\n\n\n                        <div class=\"image-uploader__content\">\n                          <p class=\"image-uploader__title\">Drag your photo here</p>\n                          <div class=\"image-uploader__icon\">\n                            <font-awesome-icon :icon=\"['fal', 'camera']\"/>\n                          </div>\n                          <button type=\"button\" class=\"btn btn-outline-primary\">Or Browse Files</button>\n                        </div>\n\n                        <input @click=\"changeDragValue\" type=\"file\" name=\"file-input\" multiple=\"True\" class=\"image-uploader__input\"\n                              @change=\"handleFileInput($event)\">\n\n\n                        <ul style=\"display:none\">\n                          <li v-bind:key=\"index\" v-for=\"(file, index) in files\">\n                            {{ file.name }} ({{ file.size }} b)\n                            <span class=\"ml-3\" @click=\"removeFile(index)\"> <font-awesome-icon class=\"text-right\"\n                                                                                              style=\"margin-top: 13px;\"\n                                                                                              :icon=\"['fal', 'times']\"/></span>\n                          </li>\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n          <div class=\"col-12 col-lg-3 offset-lg-1\">\n            <div class=\"new-review__side-wrapper\">\n              <div class=\"new-review__side-sticky\">\n                <div class=\"row justify-content-center\">\n                  <div class=\"col-12 col-sm-auto paywall\">\n                    <div class=\"new-review__paywall-money mb-4\">\n                      <div class=\"form-group row align-items-center mb-0\">\n                        <label for=\"exampleInputEmail1\" class=\"col-12 col-sm-auto mb-3 mb-sm-0\">Set paywall price <font-awesome-icon :icon=\"['fas', 'question-circle']\" @click=\"showHelpModal\"/></label>\n                        <div class=\"input-group col-12 col-sm\">\n                          <div class=\"input-group-prepend\">\n                            <span class=\"input-group-text\" id=\"basic-addon1\">$</span>\n                          </div>\n                          <input class=\"form-control\" v-model.number=\"review_paywall\" type=\"number\" min=\"0.00\" step=\"0.01\" max=\"5\" value=\"0.00\" placeholder=\"0.00\" v-on:change=\"paywallChanged\"/>\n                        </div>\n                        <!-- <small id=\"emailHelp\" class=\"form-text text-muted\">We'll never share your email with anyone else.</small> -->\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-12\">\n                    <p class=\"form-text text-danger\" id=\"errorMessage\"></p>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-12\" v-if=!submittingReview>\n                    <button class=\"btn btn-primary btn-lg\">Submit Review</button>\n                  </div>\n                  <div class=\"col-12 spinner\" v-else>\n                    <b-spinner/>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <Modal :show-handcash-modal=\"showHandcashModal\" :title=\"'Top Up!'\" :body=\"'You need to reset your spending limit in the Handcash app'\" :icon=\"'times-circle'\" :actions=\"[{ text:'Open Handcash', url:'https://app.handcash.io/', variant:'handcash', target:'_blank' }]\"></Modal>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" src=\"./NewReview.scss\" scoped></style>\n<script lang=\"ts\">\nimport {Component, Inject, Vue} from \"vue-property-decorator\";\nimport Tip from \"@/components/Tip/Tip.vue\";\nimport Modal from \"@/components/Modal/Modal.vue\";\nimport {UserService} from \"@/services/UserService\";\nimport {ReviewsService} from \"@/services/ReviewsService\";\nimport {PlaceService} from \"@/services/PlaceService\";\nimport {IUser} from \"@/interfaces/IUser\";\nimport {FavoritesService} from \"@/services/FavoritesService\";\n\n\n@Component({\n  components: {\n    Tip,\n    Modal,\n  },\n  metaInfo:{\n    title: \"Britevue - Blockchain verified reviews where reviewers get paid\",\n    meta: [\n      { name:'title',content:'Britevue - Blockchain verified reviews where reviewers get paid'},\n      { name: 'description', content:  'Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!'},\n      { itemprop: 'name', content: \"Britevue\"},\n      { itemprop: 'description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { itemprop: 'image', content:  require('@/assets/images/logo_black.svg')},\n      { property: 'og:type', content: \"website\"},\n      { property: 'og:url', content: \"https://britevue.com/\"},\n      { property: 'og:title', content: \"Britevue - Blockchain verified reviews where reviewers get paid\"},\n      { property: 'og:description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { property: 'og:image', content:  require('@/assets/images/logo_black.svg')},\n      { property: 'og:site_name', content: 'britevue'},\n      { name: 'twitter:card', content: \"summary_large_image\"},\n      { name: 'twitter:url', content: \"https://britevue.com/\"},\n      { name: 'twitter:title', content: \"Britevue - Blockchain verified reviews where reviewers get paid\"},\n      { name: 'twitter:description', content: \"Begin earning money for your reviews of businesses and places with Britevue. We will pay you for information about your hometown to get started!\"},\n      { name: 'twitter:image', content: require('@/assets/images/logo_black.svg') },\n    ]\n  }\n\n})\n\nexport default class NewReview extends Vue {\n  place_id: string;\n  place_name: string;\n  flash: any;\n  submittingReview: boolean;\n  review_body: string;\n  review_paywall: number;\n  @Inject('reviewsService')\n  review_ser!: ReviewsService;\n  @Inject('userService')\n  user_ser!: UserService;\n\n  @Inject('placeService')\n  place_ser!: PlaceService;\n\n  @Inject('favoritesService')\n  favorites_ser!: FavoritesService;\n\n  showHandcashModal: boolean;\n  user: IUser | null = null;\n  requestErrorMessage: string;\n  latestTx: string;\n  options: any;\n  step: number;\n  files: File[] = [];\n  imageHashes: object[] = [];\n  uploadProgress: number;\n  showUploadProgressBar: boolean;\n  dragImage: number;\n\n  constructor() {\n    super();\n    if (typeof this.$route.params.place_id == 'undefined') {\n      this.$router.push({name: \"dashboard\"});\n    }\n    this.place_id = this.$route.params.place_id;\n    this.place_name = this.$route.params.place_name;\n\n    this.review_body = '';\n    this.review_paywall = 0.00\n    this.submittingReview = false;\n    this.showHandcashModal = false;\n    this.requestErrorMessage = '';\n    this.latestTx = '';\n    const user = this.user_ser.getCurrentUser();\n    if (user) {\n      this.user = user;\n    }\n    this.options = {\n      text: {\n        color: '#FFFFFF',\n        shadowEnable: true,\n        shadowColor: '#000000',\n        fontSize: 14,\n        fontFamily: 'Helvetica',\n        dynamicPosition: false,\n        hideText: false\n      },\n      progress: {\n        color: '#cc7a00',\n        backgroundColor: '#333333'\n      },\n      layout: {\n        height: 35,\n        width: 140,\n        verticalTextAlign: 61,\n        horizontalTextAlign: 43,\n        zeroOffset: 0,\n        strokeWidth: 30,\n        progressPadding: 0,\n        type: 'line'\n      }\n    }\n    this.uploadProgress = 0;\n    this.showUploadProgressBar = false;\n    this.step = 1;\n    this.dragImage = 0;\n  }\n\n  async mounted() {\n    if (typeof this.$route.params.review_id != 'undefined') {\n      //fetch review here\n      let fetched_review = await this.review_ser.getReview(this.$route.params.review_id);\n\n      if (fetched_review.status == 200) {\n        fetched_review = fetched_review.data;\n        this.review_body = fetched_review.reviewBody;\n        if (fetched_review.paywall != null) {\n          this.review_paywall = fetched_review.paywall.cost;\n        }\n        this.stars['quality'].rate = fetched_review.ratings.quality;\n        this.stars['experience'].rate = fetched_review.ratings.experience;\n        this.stars['value'].rate = fetched_review.ratings.value;\n        this.calculateRating();\n        this.latestTx = fetched_review.latestTx;\n\n      }\n    }\n  }\n\n  showHelpModal() {\n    (this.$refs['modal-help-text'] as any).show();\n  }\n\n  async onSubmit(e: any) {\n    e.preventDefault();\n    this.requestErrorMessage = '';\n    const el = document.getElementById('errorMessage')\n    if (el == null) {\n      throw new Error('failed to find errorMessage div')\n    }\n    if (this.review_body == \"\") {\n      el.innerHTML = 'Review Body is required';\n      return '';\n    }\n\n    if (this.stars['quality'].rate == null || this.stars['experience'].rate == null || this.stars['value'].rate == null) {\n      el.innerHTML = 'Please provide ratings before submitting review';\n      return '';\n    }\n    el.innerHTML = '';\n    if (this.user == null) {\n      throw new Error('cannot create review with no user')\n    }\n    this.submittingReview = true\n    await this.uploadImages();\n\n    if (typeof this.$route.params.review_id != 'undefined') {\n      const review = await this.review_ser.editReview(this.$route.params.review_id, this.latestTx, this.user, this.place_id, this.review_body, this.stars, this.imageHashes, this.review_paywall);\n\n      if (review.status == 200) {\n        this.flash('Your review has been successfully updated!', 'success', {timeout: 10000});\n        this.$router.push({\n          'name': 'dashboard',\n          params: {'review': 'true', 'place_name': this.place_name, 'place_id': this.place_id}\n        });\n      } else {\n        this.flash('Your review failed to be edited, please try again and if you continue to have problems please contact our support team', 'error', {timeout: 10000});\n      }\n    } else {\n      const review = await this.review_ser.createReview(this.user, this.place_id, this.review_body, this.stars, this.imageHashes, this.review_paywall);\n      if (review.status == 200) {\n        this.flash('Your review has been successfully submitted!', 'success', {timeout: 10000});\n        this.$router.push({\n          'name': 'dashboard',\n          params: {'review': 'true', 'place_name': this.place_name, 'place_id': this.place_id}\n        });\n      } else if (review.status == 555) {\n        this.showHandcashModal = true\n      } else {\n        this.flash('Your review failed to be submitted, please try again and if you continue to have problems please contact our support team', 'error', {timeout: 10000});\n      }\n    }\n    this.submittingReview = false\n  }\n\n  async uploadImages() {\n    this.step = 1;\n    this.showUploadProgressBar = true;\n    let i = 0;\n    let status = false;\n    const progress = 100 / (this.files.length);\n    for (i = 0; i < this.files.length; i++) {\n\n      //upload images\n      const uploadPlaceImage = await this.place_ser.uploadPlaceImage(this.files[i], this.place_id);\n      if (uploadPlaceImage.status != 200) {\n        this.flash(uploadPlaceImage.data.message, 'error', {timeout: 5000});\n        continue;\n      }\n      if (uploadPlaceImage.status == 200) {\n        status = true;\n        this.imageHashes.push({'hash': uploadPlaceImage.data.hash, 'id': uploadPlaceImage.data.id});\n        this.flash('Image has been uploaded', 'success', {timeout: 5000});\n      }\n      this.uploadProgress += parseInt(progress.toFixed(2));\n    }\n    this.showUploadProgressBar = false;\n\n  }\n\n  stars: any = {\n    quality: {\n      title: \"Quality\",\n      stars: 5,\n      active: null,\n      rate: null,\n    },\n    experience: {\n      title: \"Experience\",\n      stars: 5,\n      active: null,\n      rate: null,\n    },\n    value: {\n      title: \"Value\",\n      stars: 5,\n      active: null,\n      rate: null,\n    }\n  };\n  rating_description = [\n    \"Bad\",\n    \"Okay\",\n    \"Good\",\n    \"Very good\",\n    \"Excellent\",\n  ];\n  rating_result = \"0\";\n\n  setActive(type: string, stars: number) {\n    this.stars[type].active = stars;\n  }\n\n  clearStars(type: string) {\n    this.stars[type].active = null;\n  }\n\n  setRate(type: string, stars: number) {\n    this.stars[type].rate = stars;\n    this.calculateRating();\n  }\n\n  paywallChanged(e: any) {\n    if (e.target.value === '') {\n      this.review_paywall = 0\n    }\n  }\n\n  calculateRating() {\n    let total_rated = 0;\n    for (const type in this.stars) {\n      total_rated += this.stars[type].rate;\n    }\n    this.rating_result = (total_rated / 3).toFixed(1);\n  }\n\n  getRoutePath(name: string, parameters: any) {\n    return this.$router.push({name: name, params: parameters});\n  }\n\n   handleFileDrop(e: any) {\n     this.dragImage = 1;\n    const droppedFiles = e.dataTransfer.files;\n    if (!droppedFiles) return;\n    // this tip, convert FileList to array\n    ([...droppedFiles]).forEach((f: any) => {\n      this.files.push(f);\n    });\n    this.step = 2;\n  }\n\n  handleFileInput(e: any) {\n\n    if (this.dragImage == 0) {\n      const input_files = e.target.files;\n      if (!input_files) return;\n      // this tip, convert FileList to array\n      ([...input_files]).forEach((f: File) => {\n        this.files.push(f);\n      });\n      this.step = 2;\n    }\n\n  }\n\n  removeFile(fileKey: any) {\n    this.files.splice(fileKey, 1);\n    if (this.files.length == 0) {\n      this.step = 1;\n    }\n  }\n\n  fileDragIn() {\n    console.log('');\n  }\n\n  fileDragOut() {\n    console.log('');\n  }\n\n  showImageUploader() {\n    this.step = 1;\n  }\n\n  hideImageUploader() {\n    this.step = 1;\n    this.files = [];\n  }\n\n  createUrl(imageFile: File) {\n    return window.URL.createObjectURL(imageFile);\n  }\n\n  async addFavoritePlace(place_id: any) {\n    if (this.checkUserWallet()) {\n      const add_favorite_place = await this.favorites_ser.addFavorite(this.user!.id, 'location', place_id);\n      if (add_favorite_place.status == 200) {\n        this.flash('Place has been added to your favorites', 'success', {timeout: 5000});\n      }\n      if (add_favorite_place.status == 409) {\n        this.flash('You have already added this place as a favorite', 'error', {timeout: 5000});\n      }\n    }\n  }\n\n  checkUserWallet() {\n    if (this.user) {\n      if (this.user.wallet) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n  changeDragValue(){\n    this.dragImage=0;\n  }\n}\n</script>\n"]}]}